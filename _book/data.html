<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Get your app in an R package">
<title>Shiny App-Packages - Data files</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./inst_www.html" rel="next">
<link href="./app.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
</head>
<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./app_packages.html">App-packages</a></li><li class="breadcrumb-item"><a href="./data.html">Data files</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Shiny App-Packages</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/mjfrigaard/shinyap" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome!</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./shiny.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Shiny apps</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./devtools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span style="font-size: 1.05em;"><code>devtools</code></span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./app_packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">App-packages</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roxygen2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span style="font-size: 1.05em;"><code>roxygen2</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dependencies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dependencies</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span style="font-size: 1.05em;"><code>app.R</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Data files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inst_www.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span style="font-size: 1.05em;"><code>inst/</code></span> &amp; <span style="font-size: 1.05em;"><code>www/</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tests</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./frameworks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Frameworks</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./golem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>goelm</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./leprechaun.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>leprechaun</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rhino.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>rhino</code></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./special_topics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Special topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./debugging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Debugging</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./css.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CSS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./js.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">JavaScript</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code_tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Code tools</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Glossary of terms</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GitHub</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./create.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix: Creating packages in Posit Workbench</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul>
<li><a href="#app-package-data" id="toc-app-package-data" class="nav-link active" data-scroll-target="#app-package-data">App-package data</a></li>
  <li>
<a href="#the-data-folder" id="toc-the-data-folder" class="nav-link" data-scroll-target="#the-data-folder">The <span style="font-size: 1.05em"><code>data/</code></span> folder</a>
  <ul>
<li><a href="#lazydata-true" id="toc-lazydata-true" class="nav-link" data-scroll-target="#lazydata-true"><span style="font-size: 1.05em"><code>LazyData: true</code></span></a></li>
  <li><a href="#usethisuse_data" id="toc-usethisuse_data" class="nav-link" data-scroll-target="#usethisuse_data"><span style="font-size: 1.05em"><code>usethis::use_data()</code></span></a></li>
  <li>
<a href="#documenting-data" id="toc-documenting-data" class="nav-link" data-scroll-target="#documenting-data">Documenting <code>data/</code></a>
  <ul>
<li><a href="#format" id="toc-format" class="nav-link" data-scroll-target="#format"><span style="font-size: 0.90em;"><code>@format</code></span></a></li>
  <li><a href="#describe-item" id="toc-describe-item" class="nav-link" data-scroll-target="#describe-item"><span style="font-size: 0.90em;"><code>\describe</code> &amp; <code>\item</code></span></a></li>
  </ul>
</li>
  <li>
<a href="#remove-load" id="toc-remove-load" class="nav-link" data-scroll-target="#remove-load">Remove <code>load()</code></a>
  <ul>
<li><a href="#dplyr-example" id="toc-dplyr-example" class="nav-link" data-scroll-target="#dplyr-example"><code>dplyr</code> example</a></li>
  </ul>
</li>
  <li>
<a href="#the-data-raw-folder" id="toc-the-data-raw-folder" class="nav-link" data-scroll-target="#the-data-raw-folder">The <span style="font-size: 1.05em"><code>data-raw/</code></span> folder</a>
  <ul>
<li><a href="#dplyr-example-1" id="toc-dplyr-example-1" class="nav-link" data-scroll-target="#dplyr-example-1"><code>dplyr</code> example</a></li>
  </ul>
</li>
  </ul>
</li>
  <li><a href="#the-instextdata-folder" id="toc-the-instextdata-folder" class="nav-link" data-scroll-target="#the-instextdata-folder">The <span style="font-size: 1.05em"><code>inst/extdata/</code></span> folder</a></li>
  <li><a href="#recap" id="toc-recap" class="nav-link" data-scroll-target="#recap">Recap</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/mjfrigaard/shinyap/edit/main/data.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/mjfrigaard/shinyap/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Data files</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p>This section is currently being revised. Thank you for your patience.</p>
</div>
</div>
</div>
</div>
<p>We’ve documented the functions in <code>pkgApp</code> and successfully managed the dependencies with the <code>NAMESPACE</code> and <code>DESCRIPTION</code> files. In this chapter, we’re going to cover how make the sure <code>movie.RData</code> file becomes part of <code>pkgApp</code>, and other locations for data files in app-packages.</p>
<section id="app-package-data" class="level2"><h2 class="anchored" data-anchor-id="app-package-data">App-package data</h2>
<p>There are three folders used to store data in R packages: <code>data/</code>, <code>data-raw/</code>, and <code>inst/extdata/</code>. The folder you’ll use will depend on the format, accessibility, and intended purpose of the data file in your app-package.</p>
</section><section id="the-data-folder" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="the-data-folder">The <span style="font-size: 1.05em"><code>data/</code></span> folder</h2>
<p>You can read more about the data folder in the <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Data-in-packages">‘Data in packages’ section of Writing R Extenstions</a> and the <a href="https://r-pkgs.org/data.html">‘Data’ chapter of R Packages, 2ed</a>.</p>
<p>The primary location for app-package data is the <code>data/</code> folder. Data objects in the <code>data/</code> folder are available in the package namespace when it’s installed and loaded, and can be accessed with the <code>package::data</code> syntax. See the example below:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/storms.html">storms</a></span><span class="op">)</span></span>
<span><span class="co">## # A tibble: 6 × 13</span></span>
<span><span class="co">##   name   year month   day  hour   lat  long status</span></span>
<span><span class="co">##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt; </span></span>
<span><span class="co">## 1 Amy    1975     6    27     0  27.5 -79   tropi…</span></span>
<span><span class="co">## 2 Amy    1975     6    27     6  28.5 -79   tropi…</span></span>
<span><span class="co">## 3 Amy    1975     6    27    12  29.5 -79   tropi…</span></span>
<span><span class="co">## 4 Amy    1975     6    27    18  30.5 -79   tropi…</span></span>
<span><span class="co">## 5 Amy    1975     6    28     0  31.5 -78.8 tropi…</span></span>
<span><span class="co">## 6 Amy    1975     6    28     6  32.4 -78.7 tropi…</span></span>
<span><span class="co">## # ℹ 5 more variables: category &lt;dbl&gt;, wind &lt;int&gt;,</span></span>
<span><span class="co">## #   pressure &lt;int&gt;,</span></span>
<span><span class="co">## #   tropicalstorm_force_diameter &lt;int&gt;,</span></span>
<span><span class="co">## #   hurricane_force_diameter &lt;int&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="lazydata-true" class="level4"><h4 class="anchored" data-anchor-id="lazydata-true"><span style="font-size: 1.05em"><code>LazyData: true</code></span></h4>
<p>Files in <code>data/</code> should be in the <code>.rda</code> or <code>.RData</code> format. Data files become part of a package when they’re added to the <code>data/</code> folder and <code>LazyData: true</code> is added to the <code>DESCRIPTION</code> file.</p>
<ul>
<li><p><code>LazyData: true</code>: the data is only loaded into memory if it is explicitly accessed by the user or a function in the package. Until then, only the dataset names is loaded. This practice user-friendly and is the default for most R packages.</p></li>
<li><p><code>LazyData: false</code> (or omitted): accessing a data file from the package requires explicitly loading it using the <code><a href="https://rdrr.io/r/utils/data.html">data()</a></code> function.</p></li>
</ul>
<p>Below are the steps for adding <code>movies</code> to <code>pkgApp</code>:</p>
<ol type="1">
<li>
<p>Move the <code>movies.RData</code> file into a newly created the <code>data/</code> folder:</p>
<p>::: {.cell}</p>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pkgApp/</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="ex">└──data/</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>      <span class="ex">└──</span> movies.RData</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>:::</p>
</li>
<li>
<p>Include <code>LazyData: true</code> in the <code>DESCRIPTION</code> file (I’ve added it above <code>Imports:</code>):</p>
<p>::: {.cell}</p>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Package:</span> pkgApp</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Version:</span> 0.0.0.9000</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Type:</span> Package</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Title:</span> movies app</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Description:</span> A movies data shiny application.</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="ex">Author:</span> John Smith [aut, cre]</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="ex">Maintainer:</span> John Smith <span class="op">&lt;</span>John.Smith@email.io<span class="op">&gt;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="ex">License:</span> GPL-3</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="ex">RoxygenNote:</span> 7.2.3</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="ex">Encoding:</span> UTF-8</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="ex">Roxygen:</span> list<span class="er">(</span><span class="ex">markdown</span> = TRUE<span class="kw">)</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="ex">LazyData:</span> true</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="ex">Imports:</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="ex">shiny,</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="ex">ggplot2,</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="ex">rlang,</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="ex">stringr,</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="ex">tools</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>:::</p>
</li>
<li><p>Load, document, and install.</p></li>
</ol>
<p><span style="font-style: italic; font-weight: bold; font-size: 1.10em"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>L</kbd></span></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>ℹ Loading pkgApp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><span style="font-style: italic; font-weight: bold; font-size: 1.10em"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>D</kbd></span></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>==&gt; devtools::document(roclets = c('rd', 'collate', 'namespace'))</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>ℹ Updating pkgApp documentation</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>ℹ Loading pkgApp</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>Documentation completed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><span style="font-style: italic; font-weight: bold; font-size: 1.10em"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>B</kbd></span></p>
<p>In the <strong>Build</strong> pane, you’ll notice a few new <code>** data</code> lines of output after adding data:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>** data</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>*** moving datasets to lazyload DB</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>** byte-compile and prepare package for lazy loading</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can check to see if movies has been included in <code>pkgApp</code> using the <code>package::data</code> syntax:</p>
<div id="fig-07_data_namespace" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-07_data_namespace" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/07_data_namespace.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-07_data_namespace"></p>
<figcaption class="figure-caption">(a) <code>roxygen2</code></figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;1: <code>movies</code> is now part of <code>pkgApp</code></figcaption></figure>
</div>
</section><section id="usethisuse_data" class="level4"><h4 class="anchored" data-anchor-id="usethisuse_data"><span style="font-size: 1.05em"><code>usethis::use_data()</code></span></h4>
<p>If you’d prefer to store data using the <code>.rda</code> format, the <code>usethis</code> package has the <a href="https://usethis.r-lib.org/reference/use_data.html"><code>use_data()</code> function</a> that will automatically store an object in <code>data/</code> in the <code>.rda</code> format.</p>
<p>To use <code><a href="https://usethis.r-lib.org/reference/use_data.html">usethis::use_data()</a></code>, we can load the <code>movies</code> data into the global environment with <code>load("movies.RData")</code>, then run <code>usethis::use_data(movies)</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_data.html">use_data</a></span><span class="op">(</span><span class="va">movies</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb8"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>✔ Setting active project to '/path/to/pkgApp'</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>✔ Adding 'R' to Depends field in DESCRIPTION</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>✔ Creating 'data/'</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>✔ Saving 'movies' to 'data/movies.rda'</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>• Document your data (see 'https://r-pkgs.org/data.html')</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>Depends:</code> field is added to the <code>DESCRIPTION</code> file with an R version (this ensures the data files will be loaded)</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>Depends: </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    R (&gt;= 2.10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(<em>this function will also add <code>LazyData: true</code> to the <code>DESCRIPTION</code></em>)</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Mastering Shiny data example
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p>If you happened to download, install and load the <a href="https://github.com/hadley/monthApp"><code>monthApp</code> example from Mastering Shiny</a>, you may have noticed the <code>NAMESPACE</code> was empty, but the data was exported from the package:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/monthApp_exports.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption"><code>monthApp</code> exports</figcaption></figure>
</div>
<p>Data files in <code>data/</code> don’t require <code>roxygen2</code> tags to be included in a package namespace.</p>
</div>
</div>
</div>
</div>
</section><section id="documenting-data" class="level3"><h3 class="anchored" data-anchor-id="documenting-data">Documenting <code>data/</code>
</h3>
<p>Documenting data can be tedious, but it’s worth the effort if you’ll be sharing your application with collaborators. There are multiple ways to store the documentation for datasets. For example, we could create a <code>data.R</code> file in the <code>R/</code> folder.</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/create.html">file_create</a></span><span class="op">(</span><span class="st">"R/data.R"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In <code>data.R</code>, we provide a <code>@title</code>, <code>@description</code>, and <code>@details</code> for the data (with or without the tags), followed by <code>@format</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' @title IMDB movies data </span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @description</span></span>
<span><span class="co">#' Movie review data. Note: these data come from the [Building Web Applications with shiny course](https://rstudio-education.github.io/shiny-course/). </span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @details</span></span>
<span><span class="co">#' Read more about acquiring these data in the ['Web Scraping and programming' section of Data science in a box](https://datasciencebox.org/02-exploring-data#web-scraping-and-programming)   </span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @format</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="format" class="level4"><h4 class="anchored" data-anchor-id="format"><span style="font-size: 0.90em;"><code>@format</code></span></h4>
<p>The text following <code>@format</code> is a one-sentence description of the data (with it’s dimensions).</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' @title IMDB movies data </span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @description</span></span>
<span><span class="co">#' Movie review data. Note: these data come from the [Building Web Applications with shiny course](https://rstudio-education.github.io/shiny-course/). </span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @details</span></span>
<span><span class="co">#' Read more about acquiring these data in the ['Web Scraping and programming' section of Data science in a box](https://datasciencebox.org/02-exploring-data#web-scraping-and-programming) </span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @format A data frame with [] rows and [] variables:</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="describe-item" class="level4"><h4 class="anchored" data-anchor-id="describe-item"><span style="font-size: 0.90em;"><code>\describe</code> &amp; <code>\item</code></span></h4>
<p>Each variable (column) in the data is documented with a combination of <code>\describe</code> and <code>\item</code> (<strong>pay close attention to the curly brackets</strong>):</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' \describe{</span></span>
<span><span class="co">#'  \item{variable}{description}</span></span>
<span><span class="co">#' }</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>After closing the curly brackets in <code>\describe</code>, place the name of the data in quotes (<code>"movies"</code>) on the following line.</p>
<p>Below is the documentation for the first five columns in the <code>movies</code> dataset:</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' @title IMDB movies data </span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @description</span></span>
<span><span class="co">#' Movie review data. Note: these data come from the [Building Web Applications with shiny course](https://rstudio-education.github.io/shiny-course/). </span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @details</span></span>
<span><span class="co">#' Read more about acquiring these data in the ['Web Scraping and programming' section of Data science in a box](https://datasciencebox.org/02-exploring-data#web-scraping-and-programming) </span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @format A data frame with 651 rows and 34 variables:</span></span>
<span><span class="co">#' \describe{</span></span>
<span><span class="co">#'  \item{title}{movie title}</span></span>
<span><span class="co">#'  \item{title_type}{type, fct (Documentary, Feature Film, TV Movie)}</span></span>
<span><span class="co">#'  \item{genre}{movie genre, fct (Action &amp; Adventure, Animation, etc.}</span></span>
<span><span class="co">#'  \item{runtime}{movie length in minutes, num, avg = 106, sd = 19.4}</span></span>
<span><span class="co">#'  \item{mpaa_rating}{movie rating, fct (G, NC-17, PG, PG-13, R, Unrated)}</span></span>
<span><span class="co">#' }</span></span>
<span><span class="co">#'</span></span>
<span><span class="st">"movies"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we load and document <code>pkgApp</code>, we can see a preview of the help file:</p>
<p><span style="font-style: italic; font-weight: bold; font-size: 1.10em"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>L</kbd></span></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>ℹ Loading pkgApp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><span style="font-style: italic; font-weight: bold; font-size: 1.10em"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>D</kbd></span></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>==&gt; devtools::document(roclets = c('rd', 'collate', 'namespace'))</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>ℹ Updating pkgApp documentation</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>ℹ Loading pkgApp</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>Writing movies.Rd</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>Documentation completed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">?</span><span class="va">movies</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="fig-07_data_rd" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-07_data_rd" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/07_data_rd.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-07_data_rd"></p>
<figcaption class="figure-caption">(a) The <code>movies</code> help file</figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;2: Documentation for the <code>movies</code> dataset</figcaption></figure>
</div>
<p>I’ve provided documentation for the full <code>movies</code> dataset below.</p>
<div class="cell">
<details><summary>show/hide full movies data documenation</summary><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' @title IMDB movies data </span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @description</span></span>
<span><span class="co">#' Movie review data. Note: these data come from the [Building Web Applications with shiny course](https://rstudio-education.github.io/shiny-course/). </span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @details</span></span>
<span><span class="co">#' Read more about acquiring these data in the ['Web Scraping and programming' section of Data science in a box](https://datasciencebox.org/02-exploring-data#web-scraping-and-programming) </span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @format A data frame with 651 rows and 34 variables:</span></span>
<span><span class="co">#' \describe{</span></span>
<span><span class="co">#'  \item{title}{movie title}</span></span>
<span><span class="co">#'  \item{title_type}{type, fct (Documentary, Feature Film, TV Movie)}</span></span>
<span><span class="co">#'  \item{genre}{movie genre, fct (Action &amp; Adventure, Animation, etc.}</span></span>
<span><span class="co">#'  \item{runtime}{movie length in minutes, num, avg = 106, sd = 19.4}</span></span>
<span><span class="co">#'  \item{mpaa_rating}{movie rating, fct (G, NC-17, PG, PG-13, R, Unrated)}</span></span>
<span><span class="co">#'  \item{studio}{name of studio, chr}</span></span>
<span><span class="co">#'  \item{thtr_rel_date}{Theatre release date, POSIXct, min = 1970-05-19 21:00:00, max = 2014-12-24 21:00:00}</span></span>
<span><span class="co">#'  \item{thtr_rel_year}{Theatre release year, num, min = 1970, max = 2014}</span></span>
<span><span class="co">#'  \item{thtr_rel_month}{Theatre release month, num, min = 1, max =12}</span></span>
<span><span class="co">#'  \item{thtr_rel_day}{Theatre release day, num, min = 1, max =31}</span></span>
<span><span class="co">#'  \item{dvd_rel_date}{DVD release date, POSIXct, min = 1991-03-27 21:00:00, max = 2015-03-02 21:00:00}</span></span>
<span><span class="co">#'  \item{dvd_rel_year}{DVD release year, num, min = 1991, max = 2015}</span></span>
<span><span class="co">#'  \item{dvd_rel_month}{DVD release month, num, min = 1, max = 12}</span></span>
<span><span class="co">#'  \item{dvd_rel_day}{DVD release day, num, min = 1, max = 31}</span></span>
<span><span class="co">#'  \item{imdb_rating}{Internet movie database rating, avg = 6.49, sd = 1.08}</span></span>
<span><span class="co">#'  \item{imdb_num_votes}{Internet movie database votes, avg = 57533, sd = 112124}</span></span>
<span><span class="co">#'  \item{critics_rating}{Rotten tomatoes rating, fct (Certified Fresh, Fresh, Rotten)}</span></span>
<span><span class="co">#'  \item{critics_score}{Rotten tomatoes score, avg = 57.7, sd = 28.4}</span></span>
<span><span class="co">#'  \item{audience_rating}{Audience rating, fct (Spilled, Upright)}</span></span>
<span><span class="co">#'  \item{audience_score}{Audience score, avg = 62.4, sd = 20.2}</span></span>
<span><span class="co">#'  \item{best_pic_nom}{Best picture nomination, fct (no, yes)}</span></span>
<span><span class="co">#'  \item{best_pic_win}{Best picture win, fct (no, yes)}</span></span>
<span><span class="co">#'  \item{best_actor_win}{Best actor win, fct (no, yes)}</span></span>
<span><span class="co">#'  \item{best_actress_win}{Best actress win, fct (no, yes)}</span></span>
<span><span class="co">#'  \item{best_dir_win}{Best director win, fct (no, yes)}</span></span>
<span><span class="co">#'  \item{top200_box}{Top 20 box-office, fct (no, yes)}</span></span>
<span><span class="co">#'  \item{director}{Name of director, chr}</span></span>
<span><span class="co">#'  \item{actor1}{Name of leading actor, chr}</span></span>
<span><span class="co">#'  \item{actor2}{Name of supporting actor, chr}</span></span>
<span><span class="co">#'  \item{actor3}{Name of #3 actor, chr}</span></span>
<span><span class="co">#'  \item{actor4}{Name of #4 actor, chr}</span></span>
<span><span class="co">#'  \item{actor5}{Name of #5 actor, chr}</span></span>
<span><span class="co">#'  \item{imdb_url}{IMDB URL}</span></span>
<span><span class="co">#'  \item{rt_url}{Rotten tomatoes URL}</span></span>
<span><span class="co">#' }</span></span>
<span><span class="co">#'</span></span>
<span><span class="st">"movies"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section><section id="remove-load" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="remove-load">Remove <code>load()</code>
</h3>
<p>After documenting the movies data in <code>data.R</code>, we’ll remove the call to <code><a href="https://rdrr.io/r/base/load.html">load()</a></code> in the <code>mod_scatter_display_server()</code> function and replace it with a direct call to the dataset:</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mod_scatter_display_server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">var_inputs</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>    <span class="va">inputs</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="va">plot_title</span> <span class="op">&lt;-</span> <span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/toTitleCase.html">toTitleCase</a></span><span class="op">(</span><span class="va">var_inputs</span><span class="op">$</span><span class="fu">plot_title</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>        x <span class="op">=</span> <span class="va">var_inputs</span><span class="op">$</span><span class="fu">x</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        y <span class="op">=</span> <span class="va">var_inputs</span><span class="op">$</span><span class="fu">y</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        z <span class="op">=</span> <span class="va">var_inputs</span><span class="op">$</span><span class="fu">z</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        alpha <span class="op">=</span> <span class="va">var_inputs</span><span class="op">$</span><span class="fu">alpha</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        size <span class="op">=</span> <span class="va">var_inputs</span><span class="op">$</span><span class="fu">size</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        plot_title <span class="op">=</span> <span class="va">plot_title</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">scatterplot</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html">renderPlot</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu">scatter_plot</span><span class="op">(</span></span>
<span>        <span class="co"># data -----------------------------------------------------</span></span>
<span>        df <span class="op">=</span> <span class="va">movies</span>,</span>
<span>        x_var <span class="op">=</span> <span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">x</span>,</span>
<span>        y_var <span class="op">=</span> <span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">y</span>,</span>
<span>        col_var <span class="op">=</span> <span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">z</span>,</span>
<span>        alpha_var <span class="op">=</span> <span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">alpha</span>,</span>
<span>        size_var <span class="op">=</span> <span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">size</span></span>
<span>      <span class="op">)</span></span>
<span>      <span class="va">plot</span> <span class="op">+</span></span>
<span>        <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>          title <span class="op">=</span> <span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">plot_title</span>,</span>
<span>          x <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/toTitleCase.html">toTitleCase</a></span><span class="op">(</span><span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">x</span><span class="op">)</span>, <span class="st">"_"</span>, <span class="st">" "</span><span class="op">)</span>,</span>
<span>          y <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/toTitleCase.html">toTitleCase</a></span><span class="op">(</span><span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">y</span><span class="op">)</span>, <span class="st">"_"</span>, <span class="st">" "</span><span class="op">)</span></span>
<span>        <span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>After loading, documenting, and installing the package, we see the following application:</p>
<div class="column-body-outset-right">
<div id="fig-07_data_movies_app_data" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-07_data_movies_app_data" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/07_data_movies_app_data.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-07_data_movies_app_data"></p>
<figcaption class="figure-caption">(a) <code>movies_app()</code> with <code>movies</code> data file</figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;3: <code>pkgApp::movies</code> in <code>movies_app()</code></figcaption></figure>
</div>
</div>
<section id="dplyr-example" class="level4"><h4 class="anchored" data-anchor-id="dplyr-example">
<code>dplyr</code> example</h4>
<p>To illustrate other options for data documentation, we’ll use the <a href="https://github.com/tidyverse/dplyr"><code>dplyr</code> package.</a> <code>dplyr</code> stores its data in the <code>data/</code> folder:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>data/</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>├── band_instruments.rda</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>├── band_instruments2.rda</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>├── band_members.rda</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>├── starwars.rda</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>└── storms.rda</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The documentation for the datasets in <code>dplyr</code> are stored in <code>R/</code> using a <code>data-</code> prefix:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>R/</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>├── data-bands.R</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>├── data-starwars.R</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>└── data-storms.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The three <code>band_</code> datasets have documented in a single file, <a href="https://github.com/tidyverse/dplyr/blob/main/R/data-bands.R"><code>data-bands.R</code></a>:</p>
<div class="cell">
<details><summary>show/hide documentation for dplyr::band_ datasets</summary><div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># from the dplyr github repo: </span></span>
<span><span class="co"># https://github.com/tidyverse/dplyr/blob/main/R/data-bands.R</span></span>
<span><span class="co"># </span></span>
<span><span class="co">#' Band membership</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' These data sets describe band members of the Beatles and Rolling Stones. They</span></span>
<span><span class="co">#' are toy data sets that can be displayed in their entirety on a slide (e.g. to</span></span>
<span><span class="co">#' demonstrate a join).</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' `band_instruments` and `band_instruments2` contain the same data but use</span></span>
<span><span class="co">#' different column names for the first column of the data set.</span></span>
<span><span class="co">#' `band_instruments` uses `name`, which matches the name of the key column of</span></span>
<span><span class="co">#' `band_members`; `band_instruments2` uses `artist`, which does not.</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @format Each is a tibble with two variables and three observations</span></span>
<span><span class="co">#' @examples</span></span>
<span><span class="co">#' band_members</span></span>
<span><span class="co">#' band_instruments</span></span>
<span><span class="co">#' band_instruments2</span></span>
<span><span class="st">"band_members"</span></span>
<span></span>
<span><span class="co">#' @rdname band_members</span></span>
<span><span class="co">#' @format NULL</span></span>
<span><span class="st">"band_instruments"</span></span>
<span></span>
<span><span class="co">#' @rdname band_members</span></span>
<span><span class="co">#' @format NULL</span></span>
<span><span class="st">"band_instruments2"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In the example above, note that two of the datasets (<code>band_instruments</code> and <code>band_instruments2</code>) have the <code>@format</code> set to <code>NULL</code>, and define the help search name with <code>@rdname</code>. The <code>@examples</code> tag can be used to view the dataset when users click ‘<strong>Run Examples</strong>’</p>
<p>Either method will–what’s important is that each dataset in your package <em>has</em> documentation.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Documenting data in `data/`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Documenting data in <code>data/</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Documenting data requires the following <code>roxygen2</code> structure:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' </span></span>
<span><span class="co">#' @title single-sentence describing [data]</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @description</span></span>
<span><span class="co">#' Single-paragraph describing [data]</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @format [data] number of rows and columns:</span></span>
<span><span class="co">#' \describe{</span></span>
<span><span class="co">#'  \item{variable}{description}</span></span>
<span><span class="co">#'  \item{variable}{description}</span></span>
<span><span class="co">#' }</span></span>
<span><span class="co">#'</span></span>
<span><span class="st">"[data]"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Replace <code>[data]</code> with the name of your dataset.</p>
</div>
</div>
</div>
</section></section><section id="the-data-raw-folder" class="level3"><h3 class="anchored" data-anchor-id="the-data-raw-folder">The <span style="font-size: 1.05em"><code>data-raw/</code></span> folder</h3>
<p>The <code>data-raw</code> folder is not an official directory in the standard R package structure, but it’s a common location for any data processing or cleaning scripts, and the raw data file for datasets stored in <code>data/</code>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Scripts for creating <code>movies</code> data
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p>The code used to produce the <code>movies</code> dataset in the <code>data/</code> directory might* come from <a href="https://github.com/mine-cetinkaya-rundel/rotten">this GitHub repo</a>. If so, the <code>data-raw</code> folder is where <a href="https://github.com/mine-cetinkaya-rundel/rotten/tree/master/working">the data processing and preparation scritps</a> would be stored (along with a copy of the data in <code>.csv</code> format) before saving a copy in the <code>data/</code> folder.</p>
<p>*I say ‘might’ because it’s not clear if the <code>movies.RData</code> is the output from these <code>.R</code> files (although many of the column names match).</p>
</div>
</div>
</div>
</div>
<section id="dplyr-example-1" class="level4"><h4 class="anchored" data-anchor-id="dplyr-example-1">
<code>dplyr</code> example</h4>
<p>If we look at the data in the <a href="https://github.com/tidyverse/dplyr"><code>dplyr</code> package</a> again, we can see the <a href="https://github.com/tidyverse/dplyr/tree/main/data-raw"><code>data-raw/</code> folder</a> contains a combination of <code>.R</code> and <code>.csv</code> files:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>data-raw/</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>├── band_members.R</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>├── starwars.R</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>├── starwars.csv</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>└── storms.R</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>1 directory, 4 files</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example, the <a href="https://github.com/tidyverse/dplyr/blob/main/data-raw/starwars.R"><code>starwars.R</code> script</a> downloads &amp; prepares <code>starwars</code>, then saves a <code>.csv</code> copy of the data <a href="(https://github.com/tidyverse/dplyr/blob/main/data-raw/starwars.csv)">in <code>data-raw</code></a>.</p>
<p>Read more about the <code>data-raw</code> folder in <a href="https://r-pkgs.org/data.html#sec-data-data-raw">R Packages, 2ed</a></p>
</section></section></section><section id="the-instextdata-folder" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="the-instextdata-folder">The <span style="font-size: 1.05em"><code>inst/extdata/</code></span> folder</h2>
<p>The <code>extdata</code> folder (inside <code>inst/</code>) can be used for external datasets in other file formats (<code>.csv</code>, <code>.tsv</code>, <code>.txt</code>, <code>.xlsx</code>, etc).</p>
<p>The data files in <code>inst/extdata/</code> aren’t directly loadable using the <code>package::data</code> syntax or the <code><a href="https://rdrr.io/r/utils/data.html">data()</a></code> function like with the <code>data/</code> directory. These files can be imported using the file path accessor function, <code><a href="https://rdrr.io/r/base/system.file.html">system.file()</a></code>.</p>
<p>For example, if we create the <code>inst/extdata/</code> and save a copy of <code>movies</code> as a <a href="https://www.fstpackage.org/fst/"><code>.fst</code> file</a>:</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://fs.r-lib.org">fs</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://www.fstpackage.org">fst</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">fst</span> package v0.9.8</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/create.html">dir_create</a></span><span class="op">(</span><span class="st">"inst/extdata/"</span><span class="op">)</span></span>
<span><span class="fu">fst</span><span class="fu">::</span><span class="fu"><a href="http://www.fstpackage.org/reference/write_fst.html">write_fst</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">movies</span>, </span>
<span>  path <span class="op">=</span> <span class="st">"inst/extdata/movies.fst"</span>, </span>
<span>  compress <span class="op">=</span> <span class="fl">75</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">fstcore</span> package v0.9.14</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">OpenMP</span> was not detected, using single threaded mode<span class="kw">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then load, document, and install <code>pkgApp</code>:</p>
<p><span style="font-style: italic; font-weight: bold; font-size: 1.10em"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>L</kbd> / <kbd>D</kbd> / <kbd>B</kbd></span></p>
<p>We can import <code>movies.fst</code> using <code><a href="https://rdrr.io/r/base/system.file.html">system.file()</a></code> to create a path to the file:</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span></span>
<span>  <span class="fu">fst</span><span class="fu">::</span><span class="fu"><a href="http://www.fstpackage.org/reference/write_fst.html">read_fst</a></span><span class="op">(</span>path <span class="op">=</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata/"</span>, <span class="st">"movies.fst"</span>, package <span class="op">=</span> <span class="st">"pkgApp"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb30"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a># A tibble: 651 × 34</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>   title  title_type genre runtime mpaa_rating studio thtr_rel_date      </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>   &lt;chr&gt;  &lt;fct&gt;      &lt;fct&gt;   &lt;dbl&gt; &lt;fct&gt;       &lt;fct&gt;  &lt;dttm&gt;             </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a> 1 Filly… Feature F… Drama      80 R           Indom… 2013-04-18 21:00:00</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a> 2 The D… Feature F… Drama     101 PG-13       Warne… 2001-03-13 21:00:00</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a> 3 Waiti… Feature F… Come…      84 R           Sony … 1996-08-20 21:00:00</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a> 4 The A… Feature F… Drama     139 PG          Colum… 1993-09-30 21:00:00</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a> 5 Malev… Feature F… Horr…      90 R           Ancho… 2004-09-09 21:00:00</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a> 6 Old P… Documenta… Docu…      78 Unrated     Shcal… 2009-01-14 21:00:00</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a> 7 Lady … Feature F… Drama     142 PG-13       Param… 1985-12-31 21:00:00</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a> 8 Mad D… Feature F… Drama      93 R           MGM/U… 1996-11-07 21:00:00</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a> 9 Beaut… Documenta… Docu…      88 Unrated     Indep… 2012-09-06 21:00:00</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>10 The S… Feature F… Drama     119 Unrated     IFC F… 2012-03-01 21:00:00</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a># ℹ 641 more rows</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a># ℹ 27 more variables: thtr_rel_year &lt;dbl&gt;, thtr_rel_month &lt;dbl&gt;,</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>#   thtr_rel_day &lt;dbl&gt;, dvd_rel_date &lt;dttm&gt;, dvd_rel_year &lt;dbl&gt;,</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>#   dvd_rel_month &lt;dbl&gt;, dvd_rel_day &lt;dbl&gt;, imdb_rating &lt;dbl&gt;,</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>#   imdb_num_votes &lt;int&gt;, critics_rating &lt;fct&gt;, critics_score &lt;dbl&gt;,</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>#   audience_rating &lt;fct&gt;, audience_score &lt;dbl&gt;, best_pic_nom &lt;fct&gt;,</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>#   best_pic_win &lt;fct&gt;, best_actor_win &lt;fct&gt;, best_actress_win &lt;fct&gt;, …</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a># ℹ Use `print(n = ...)` to see more rows</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We’ll cover <code>inst/</code> and <code><a href="https://rdrr.io/r/base/system.file.html">system.file()</a></code> in more detail in the next chapter.</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/new_branch_ico.png" class="img-fluid figure-img" style="width:75.0%"></p>
<figcaption class="figure-caption">Git Branch</figcaption></figure>
</div>
<p>This section’s code is in the <a href="https://github.com/mjfrigaard/pkgApp"><code>pkgApp</code></a> repo’s <a href="https://github.com/mjfrigaard/pkgApp/tree/06_data"><code>06_data</code></a> branch</p>
</div></div></section><section id="recap" class="level2"><h2 class="anchored" data-anchor-id="recap">Recap</h2>
<p>It’s common for shiny apps to require data, so knowing how to store and access these files in your app-package will make it easier to load and reproducible in other environments. Here are a few other things to consider when including data in your app-package:</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Recap: Package data files
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<ul>
<li><p><code>data/</code>: All data files stored in <code>data/</code> will be ‘lazy loaded’ (see below) when the package is installed and loaded.</p></li>
<li><p><strong>Loading</strong>: include the <code>LazyData: true</code> field in the <code>DESCRIPTION</code> file so the data is only loaded when it’s used (and it increases package loading speed).</p></li>
<li><p><strong>Size</strong>: large data files can inflate the size of your app-package, making it harder for users to download and install. CRAN also has a size limit for packages (if you plan on submitting your app-package).</p></li>
<li><p><strong>Format</strong>: data files in <code>data/</code> must be either <code>.rda</code> or <code>.RData</code> format.</p></li>
<li>
<p><strong>Documentation</strong>: document the data/ files in either a single <code>R/data.R</code> file or individual <code>.R</code> files. Documentation should include the following <code>roxygen2</code> format:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' </span></span>
<span><span class="co">#' @title </span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @description</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @format </span></span>
<span><span class="co">#' \describe{</span></span>
<span><span class="co">#'  \item{variable}{description}</span></span>
<span><span class="co">#' }</span></span>
<span><span class="co">#'</span></span>
<span><span class="st">'data'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</li>
<li><p><code>inst/extdata/</code>: Store external data in the <code>inst/extdata/</code> directory and access it using <code><a href="https://rdrr.io/r/base/system.file.html">system.file()</a></code>. This can be helpful if your app-package needs access to data files that are not R objects. For faster loading, consider the <a href="https://www.fstpackage.org/fst/"><code>fst</code></a> or <a href="https://github.com/wesm/feather"><code>feather</code></a> formats.</p></li>
</ul>
</div>
</div>
</div>
</div>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./app.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span style="font-size: 1.05em;"><code>app.R</code></span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./inst_www.html" class="pagination-link">
        <span class="nav-page-text"><span style="font-size: 1.05em;"><code>inst/</code></span> &amp; <span style="font-size: 1.05em;"><code>www/</code></span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>