<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Getting your app into an R package">
<title>Shiny App-Packages - Dependencies</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./launch.html" rel="next">
<link href="./document.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
</head>
<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./app_packages.html">App-packages</a></li><li class="breadcrumb-item"><a href="./dependencies.html">Dependencies</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Shiny App-Packages</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/mjfrigaard/shinyap" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome!</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./shiny.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Shiny apps</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./development.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Development</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./app_packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">App-packages</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./document.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Documentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dependencies.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Dependencies</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./launch.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Launch</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./external.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">External files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tests</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./frameworks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Frameworks</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./golem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>golem</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./leprechaun.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>leprechaun</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rhino.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>rhino</code></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./special_topics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Special topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./debugging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Debugging</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./css.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CSS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./js.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">JavaScript</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code_tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Code tools</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Glossary of terms</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GitHub</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./create.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix: Creating packages in Posit Workbench</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul>
<li>
<a href="#pkgapp" id="toc-pkgapp" class="nav-link active" data-scroll-target="#pkgapp"><span style="font-size: 1.05em"><code>pkgApp</code></span></a>
  <ul>
<li><a href="#when-in-doubt" id="toc-when-in-doubt" class="nav-link" data-scroll-target="#when-in-doubt">When in doubt…</a></li>
  </ul>
</li>
  <li>
<a href="#identifying-dependencies" id="toc-identifying-dependencies" class="nav-link" data-scroll-target="#identifying-dependencies">Identifying dependencies</a>
  <ul>
<li><a href="#running-movies_app" id="toc-running-movies_app" class="nav-link" data-scroll-target="#running-movies_app">Running <span style="font-size: 1.10em"><code>movies_app()</code></span></a></li>
  </ul>
</li>
  <li>
<a href="#exports" id="toc-exports" class="nav-link" data-scroll-target="#exports">Exports</a>
  <ul>
<li><a href="#exporting-movies_app" id="toc-exporting-movies_app" class="nav-link" data-scroll-target="#exporting-movies_app">Exporting <span style="font-size: 1.05em;"><code>movies_app()</code></span></a></li>
  <li>
<a href="#what-export-does" id="toc-what-export-does" class="nav-link" data-scroll-target="#what-export-does">What <span style="font-size: 1.05em;"><code>@export</code></span> does</a>
  <ul>
<li><a href="#the-search-list" id="toc-the-search-list" class="nav-link" data-scroll-target="#the-search-list">The <span style="font-size: 1.05em;"><code>search()</code></span> list</a></li>
  <li><a href="#exporting-scatter_plot" id="toc-exporting-scatter_plot" class="nav-link" data-scroll-target="#exporting-scatter_plot">Exporting <span style="font-size: 1.05em;"><code>scatter_plot()</code></span></a></li>
  <li><a href="#loadednamespaces" id="toc-loadednamespaces" class="nav-link" data-scroll-target="#loadednamespaces"><span style="font-size: 0.95em;"><code>loadedNamespaces()</code></span></a></li>
  </ul>
</li>
  <li><a href="#what-to-export" id="toc-what-to-export" class="nav-link" data-scroll-target="#what-to-export">What to <span style="font-size: 1.05em"><code>@export</code></span></a></li>
  </ul>
</li>
  <li>
<a href="#imports" id="toc-imports" class="nav-link" data-scroll-target="#imports">Imports</a>
  <ul>
<li>
<a href="#how-and-where" id="toc-how-and-where" class="nav-link" data-scroll-target="#how-and-where"><span style="font-weight: bold; font-size: 1.05em;">How and where?</span></a>
  <ul>
<li><a href="#how-and-where-in-pkgapp" id="toc-how-and-where-in-pkgapp" class="nav-link" data-scroll-target="#how-and-where-in-pkgapp"><span style="font-weight: bold;">How and where</span> in <span style="font-size: 1.05em;"><code>pkgApp</code></span></a></li>
  </ul>
</li>
  <li>
<a href="#when-and-why" id="toc-when-and-why" class="nav-link" data-scroll-target="#when-and-why"><span style="font-weight: bold; font-size: 1.05em;">When and why?</span></a>
  <ul>
<li><a href="#when-and-why-in-pkgapp" id="toc-when-and-why-in-pkgapp" class="nav-link" data-scroll-target="#when-and-why-in-pkgapp"><span style="font-weight: bold;">When and why</span> in <span style="font-size: 1.05em;"><code>pkgApp</code></span></a></li>
  </ul>
</li>
  <li>
<a href="#what-happens" id="toc-what-happens" class="nav-link" data-scroll-target="#what-happens"><span style="font-weight: bold; font-size: 1.05em;">What happens?</span></a>
  <ul>
<li><a href="#what-happened-in-pkgapp" id="toc-what-happened-in-pkgapp" class="nav-link" data-scroll-target="#what-happened-in-pkgapp"><span style="font-weight: bold;">What happened</span> in <span style="font-size: 1.05em;"><code>pkgApp</code></span></a></li>
  <li><a href="#the-search-list-1" id="toc-the-search-list-1" class="nav-link" data-scroll-target="#the-search-list-1">The <span style="font-size: 1.05em;"><code>search()</code></span> list</a></li>
  </ul>
</li>
  </ul>
</li>
  <li><a href="#checking-dependencies" id="toc-checking-dependencies" class="nav-link" data-scroll-target="#checking-dependencies">Checking dependencies</a></li>
  <li><a href="#recap" id="toc-recap" class="nav-link" data-scroll-target="#recap">Recap</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/mjfrigaard/shinyap/edit/main/dependencies.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/mjfrigaard/shinyap/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Dependencies</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p>This chapter is currently being revised.</p>
</div>
</div>
</div>
</div>
<p>The previous chapter showed how to document the functions with <code>roxygen2</code>. In this chapter we’ll cover how to manage dependencies in your new app-package.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
TLDR
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p>Managing dependencies:</p>
<ul>
<li><p><strong>Exports</strong>: export objects from using <code>@export</code>. Exported functions are the functions that an app-package offers to the world (i.e., someone installs and loads the package, these are the functions they can directly use).</p></li>
<li>
<p><strong>Imports</strong>: import functions from add-on packages using a ‘fully qualified variable reference’ (i.e., <code>pkg::fun()</code>) in the code below <code>R/</code> and add the package name to the <code>Imports</code> field in the <code>DESCRIPTION</code>.</p>
<ul>
<li><p>If the object can’t be imported using <code>::</code> (i.e., an operator), use the <code>@importFrom</code> tag from <code>roxygen2</code></p></li>
<li><p>If your code uses a lot of functions from another package (such as <code>shiny</code> in app-packages), use the <code>@import</code> tag from <code>roxygen2</code></p></li>
</ul>
</li>
</ul>
<p><strong>Workflow:</strong> List the add-on package in the <code>Imports</code> field of the <code>DESCRIPTION</code> file (i.e., with <code>usethis::use_package('pkg')</code>), then decide if you’re going to the functions in <code>pkg</code> with <code>pkg::fun()</code> (preferred), <code>@importFrom</code>, or <code>@import</code>.</p>
</div>
</div>
</div>
</div>
<p>Dependencies are the must-have components for your app-package, and they’re divided into imports and exports. <strong>Imports</strong> are the functions we’re borrowing from add-on packages (any packages no automatically loaded in a new R session), and <strong>exports</strong> are the functions, data, and other R objects our app-package offers to users.</p>
<p>Dependencies are handled using <code>roxygen2</code> tags (to generate the <code>NAMESPACE</code>) and three fields in the <code>DESCRIPTION</code> file (<code>Suggests</code>, <code>Imports</code>, or <code>Depends</code>). If you’d like a refresher on documenting functions with <code>roxygen2</code>, a summary of the previous chapter is available below:</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Chapter 4 recap: documenting functions with <code>roxygen2</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p><strong>Required <code>@tags</code> for all functions</strong>:</p>
<ul>
<li>Make sure all functions have a documented title &amp; description (<code>@title</code> and <code>@description</code> tags optional), function inputs and outputs (<code>@param</code> and <code>@return</code>), and demonstrations of how the function works (<code>@examples</code>)</li>
</ul>
<p><strong>Shiny-specific documentation</strong>:</p>
<ul>
<li><p>Use <code>@seealso</code> to link module UI and server functions, and <code>@family</code> to link functions within a similar topic (i.e., ‘import data’ or ‘scatter plot’)</p></li>
<li><p>Provide shiny-specific information (use within the app, reactive state, more details about the <code>@param</code>s, etc.) in <code>@section</code> blocks.</p></li>
</ul>
<p>See the <a href="https://github.com/mjfrigaard/pkgApp/tree/02-roxygen2"><code>roxygen2</code> branch</a> for more information</p>
</div>
</div>
</div>
</div>
<section id="pkgapp" class="level2"><h2 class="anchored" data-anchor-id="pkgapp"><span style="font-size: 1.05em"><code>pkgApp</code></span></h2>
<p>We will use the <a href="https://github.com/mjfrigaard/pkgApp/tree/02_roxygen2"><code>02_roxygen2</code> branch of <code>pkgApp</code></a> from the end of the previous chapter. Below is a folder tree of its contents:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pkgApp/</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> DESCRIPTION</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> NAMESPACE</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> R/</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── mod_scatter_display.R</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── mod_var_input.R</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── movies_app.R</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── movies_server.R</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── movies_ui.R</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   └── utils.R</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> README.md</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> app.R</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> man/</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── mod_scatter_display_server.Rd</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── mod_scatter_display_ui.Rd</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── mod_var_input_server.Rd</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── mod_var_input_ui.Rd</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── movies_app.Rd</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── movies_server.Rd</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── movies_ui.Rd</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   └── scatter_plot.Rd</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> movies.RData</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> pkgApp.Rproj</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  <span class="ex">└──</span> www/</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>      <span class="ex">└──</span> shiny.png</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span> directories, 21 files</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="when-in-doubt" class="level3"><h3 class="anchored" data-anchor-id="when-in-doubt">When in doubt…</h3>
<p><span style="font-style: italic; font-weight: bold; font-size: 1.10em">Load, document, and install</span></p>
<p>While developing your app-package, you might lose track of which <code>devtools</code> function you ran last (I know I do). If this happens, I’ve found loading, documenting, and installing help re-orient me to the current state of the package.</p>
<p><span style="font-style: italic; font-weight: bold; font-size: 1.10em"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>L</kbd> / <kbd>D</kbd> / <kbd>B</kbd></span></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ℹ Loading pkgApp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>==&gt; devtools::document(roclets = c('rd', 'collate', 'namespace'))</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>ℹ Updating pkgApp documentation</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>ℹ Loading pkgApp</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>Documentation completed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>==&gt; R CMD INSTALL --preclean --no-multiarch --with-keep.source pkgApp</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>* installing to library ‘/path/to/local/install/pkgApp-090c61fc/R-4.2/x86_64-apple-darwin17.0’</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>* installing *source* package ‘pkgApp’ ...</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>** using staged installation</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>** R</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>** byte-compile and prepare package for lazy loading</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>** help</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>*** installing help indices</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>** building package indices</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>** testing if installed package can be loaded from temporary location</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>** testing if installed package can be loaded from final location</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>** testing if installed package keeps a record of temporary installation path</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>* DONE (pkgApp)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>Restarting R session...</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>&gt; library(pkgApp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>It’s also satisfying to see all three functions execute without any errors!</p>
</section></section><section id="identifying-dependencies" class="level2"><h2 class="anchored" data-anchor-id="identifying-dependencies">Identifying dependencies</h2>
<p>The first step in managing dependencies is identifying which add-on packages <code>pkgApp</code> relies on. Our goal is to limit the dependencies to only those critical to the functioning of our app, because each additional dependency is a potential point of failure (should this package become unavailable or significantly change).</p>
<p>I’ve made this process somewhat easier by explicitly namespacing all of the add-on package functions in <code>pkgApp</code> (i.e., with <code>pkg::fun()</code>). You’ll learn more about explicit namespacing in the following sections.</p>
<section id="running-movies_app" class="level3"><h3 class="anchored" data-anchor-id="running-movies_app">Running <span style="font-size: 1.10em"><code>movies_app()</code></span>
</h3>
<p>In the last chapter, we moved and documented the standalone app function (<code>movies_app()</code>) in the <code>R/</code> folder. The <code>app.R</code> file now only contains the following:</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># pkgs &lt;- c("shiny", "shinythemes", "stringr", "ggplot2", "rlang")</span></span>
<span><span class="co"># install.packages(pkgs, quiet = TRUE)</span></span>
<span></span>
<span><span class="co"># packages ------------------------------------</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/">shiny</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/shinythemes/">shinythemes</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rlang.r-lib.org">rlang</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># movies_app ------------------------------------</span></span>
<span><span class="fu">movies_app</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ideally, we’ll want to replace these calls to <code>libary()</code>, but first we have to make sure the functions we’re using in these packages will be available in <code>pkgApp</code>.</p>
<p>When we run the contents of <code>app.R</code>, we see the following:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>&gt; library(pkgApp)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>&gt; # pkgs &lt;- c("shiny", "shinythemes", "stringr", "ggplot2", "rlang")</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>&gt; # install.packages(pkgs, quiet = TRUE)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>&gt; </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>&gt; # packages ------------------------------------</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>&gt; library(shiny)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>&gt; library(shinythemes)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>&gt; library(stringr)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>&gt; library(ggplot2)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>&gt; library(rlang)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>&gt; </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>&gt; # movies_app ------------------------------------</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>&gt; movies_app()</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>Error in movies_app() : could not find function "movies_app"</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Why can’t R find the <code>"movies_app"</code> function in <code>app.R</code>?</p>
<p>Let’s recap what we’ve done so far:</p>
</section><div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<section id="app.r" class="level3 quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;"><h3 class="anchored" data-anchor-id="app.r"><span style="font-size: 1.05em"><code>app.R</code></span></h3>
<ul class="task-list">
<li>
<input type="checkbox" checked=""><code>app.R</code> loads the necessary packages and calls <code>movies_app()</code>
</li>
</ul></section><section id="section" class="level3 cell quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;"><h3 class="anchored" data-anchor-id="section"></h3>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pkgApp/</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">└──</span> app.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</div>
</div>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<section id="r" class="level3 quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;"><h3 class="anchored" data-anchor-id="r"><span style="font-size: 1.05em"><code>R/</code></span></h3>
<ul class="task-list">
<li>
<input type="checkbox" checked="">The <code>R/movies_app.R</code> file contains the code and documentation for <code>movies_app()</code>
</li>
</ul></section><section id="section-1" class="level3 cell quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;"><h3 class="anchored" data-anchor-id="section-1"></h3>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pkgApp/</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">└──</span> R/</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>        <span class="ex">└──</span> movies_app.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</div>
</div>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<section id="man" class="level3 quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;"><h3 class="anchored" data-anchor-id="man"><span style="font-size: 1.05em"><code>man/</code></span></h3>
<ul class="task-list">
<li>
<input type="checkbox" checked=""><code>roxygen2</code> is generating the <code>man/movies_app.Rd</code> file</li>
</ul></section><section id="section-2" class="level3 cell quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;"><h3 class="anchored" data-anchor-id="section-2"></h3>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pkgApp/</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">└──</span> man/</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>          <span class="ex">└──</span> movies_app.Rd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</div>
</div>
<p>The error tells me that despite having documentation for <code>movies_app()</code> in <code>R/</code> <em>and</em> generating the corresponding <code>.Rd</code> file in <code>man/</code>, the <code>movies_app()</code> function isn’t being <strong>exported</strong> from <code>pkgApp</code>.</p>
</section><section id="exports" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="exports">Exports</h2>
<p>The exact cause of the error above becomes more apparent when we try to explicitly namespace <code>movies_app()</code> from <code>pkgApp</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">pkgApp</span><span class="fu">::</span><span class="fu">movies_app</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb11"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>Error: 'movies_app' is not an exported object from 'namespace:pkgApp'</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/new_branch_ico.png" class="img-fluid figure-img" style="width:75.0%"></p>
<figcaption class="figure-caption">Git Branch</figcaption></figure>
</div>
<p>This section’s code is in the <a href="https://github.com/mjfrigaard/pkgApp"><code>pkgApp</code></a> repo’s <a href="https://github.com/mjfrigaard/pkgApp/tree/03_pkg-exports"><code>03_pkg-exports</code></a> branch</p>
</div></div><p>To make the <code>movies_app()</code> function available to users of our package, we need to export it. We export functions by including the <code>@export</code> tag in the <code>roxygen2</code> comment block (above the function we want to export):</p>
<ul>
<li>
<p><strong><code>@export</code></strong>: The function name (<code>my_func</code>) is not required.</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' @export my_func </span></span>
<span><span class="co">#' my_func &lt;- function() {</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' }</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Read more <a href="https://r-pkgs.org/dependencies-in-practice.html#exports">here</a>
</li>
</ul>
</li>
</ul>
<section id="exporting-movies_app" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="exporting-movies_app">Exporting <span style="font-size: 1.05em;"><code>movies_app()</code></span>
</h3>
<p>Let’s start by exporting the <code>movies_app()</code> function from <code>pkgApp</code> by placing the <code>@export</code> tag above the function in <code>R/movies_app.R</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' Movies app standalone function</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' Wrapper function for `shiny::shinyApp()`</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @return shiny app</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @seealso [mod_var_input_ui()], [mod_var_input_server()], [mod_scatter_display_ui()], [mod_scatter_display_server()]</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' </span></span>
<span><span class="va">movies_app</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">movies_ui</span>, server <span class="op">=</span> <span class="va">movies_server</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In <code>app.R</code>, we’ll replace the calls to <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> with a single call to <code><a href="https://rdrr.io/r/base/library.html">library(pkgApp)</a></code></p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># packages ------------------------------------</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">pkgApp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># movies_app ------------------------------------</span></span>
<span><span class="fu">movies_app</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We’ll load, document, and install the package to generate the <code>NAMESPACE</code> changes:</p>
<div style="font-style: italic; font-weight: bold; font-size: 1.10em">
<p><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>L</kbd> / <kbd>D</kbd> / <kbd>B</kbd></p>
</div>
<p>Now, when we run the code <code>app.R</code>, we see the following:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/05_dependencies_exported_movies_app.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption"><code>movies_app()</code></figcaption></figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>We’ve lost the shiny icon (<code>www/shiny.png</code>) in the UI, but we’ll address this in the <strong><code>inst/</code> &amp; <code>www/</code></strong> chapter.</p>
</div></div><p><code>movies_app()</code> launches our application!</p>
<!-- first dimension defines rows and the second columns -->
<!-- "layout="[[1,1], [1]]" translates to: create two rows, the first of which has two columns of equal size and the second of which has a single column. -->
<p>The <code>NAMESPACE</code> file now contains a single export (<code>movies_app</code>), and when we enter <code>pkgApp::</code> in the <strong>Console</strong>, we see the <code>movies_app()</code> function help file in the tab completion.</p>
<div class="column-body-outset-right">
<div id="fig-03_dependencies_namespace" class="quarto-layout-panel">
<figure class="figure"><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 40.0%;justify-content: center;">
<div id="fig-03_dependencies_namespace" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/05_dependencies_namespace.png" class="img-fluid figure-img" data-ref-parent="fig-03_dependencies_namespace"></p>
<figcaption class="figure-caption">(a) updated <code>NAMESPACE</code></figcaption></figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 60.0%;justify-content: center;">
<div id="fig-03_dependencies_namespace" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/05_dependencies_tab_compl_movies_app.png" class="img-fluid figure-img" data-ref-parent="fig-03_dependencies_namespace"></p>
<figcaption class="figure-caption">(b) <code>pkgApp</code> namespace</figcaption></figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: The <code>movies_app()</code> is now part of the <code>pkgApp</code> namespace</figcaption><p></p>
</figure>
</div>
</div>
</section><section id="what-export-does" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="what-export-does">What <span style="font-size: 1.05em;"><code>@export</code></span> does</h3>
<p>We’ll pause here to notice a few things about what <code>@export</code> does. After loading, documenting, and installing <code>pkgApp</code>, the <code>NAMESPACE</code> is updated with <code>export(movies_app)</code>, and the <strong>Console</strong> automatically calls <code><a href="https://rdrr.io/r/base/library.html">library(pkgApp)</a></code>.</p>
<p><code><a href="https://rdrr.io/r/base/ls.html">ls()</a></code> returns “<em>the names of the objects in the specified environment</em>, so we can use it to confirm the <code>movies_app()</code> function is the only export from <code>pkgApp</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"package:pkgApp"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb16"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>[1] "movies_app"</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="the-search-list" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="the-search-list">The <span style="font-size: 1.05em;"><code>search()</code></span> list</h4>
<p><code><a href="https://rdrr.io/r/base/library.html">library(pkgApp)</a></code> attaches <code>pkgApp</code> to the search list. We can view all the attached packages in the string returned from <code><a href="https://rdrr.io/r/base/search.html">search()</a></code>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>"package:pkgApp" %in% search()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>[1] TRUE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>What about the functions from add-on packages <code>movies_app()</code> relies on, like <code>ggplot2</code>?</p>
<p>Let’s check to see if <code>ggplot2</code> is also attached to the <code><a href="https://rdrr.io/r/base/search.html">search()</a></code> list:</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"package:ggplot2"</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/search.html">search</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb20"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>[1] FALSE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Why does this matter? Because if these packages aren’t attached to the <code><a href="https://rdrr.io/r/base/search.html">search()</a></code> list, we can’t call their functions the way we would if we’d used <code><a href="https://rdrr.io/r/base/library.html">library()</a></code>.</p>
<p>For example, if we try to use <code>ggplot2</code> to build a plot (similar to the one we have in the app), we see the following:</p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mtcars</span>, </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">disp</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb22"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>Error in ggplot(data = mtcars, </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>              aes(x = disp, y = mpg)) : </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  could not find function "ggplot"</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If we want to use functions from the packages <code>pkgApp</code> relies on, we need to explicitly namespace these functions from their original package namespaces (i.e., <code>pkg::fun()</code>):</p>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mtcars</span>, </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">disp</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/05_dependencies_using_ggplot2_with_ns.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">We can use <code>ggplot2</code> if we explicitly namespace it’s functions</figcaption></figure>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Accessing add-on package functions
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p>When a user loads <code>pkgApp</code> with <code><a href="https://rdrr.io/r/base/library.html">library(pkgApp)</a></code>, any add-on package functions used in exports are available to users if they use <code>pkg::fun()</code> (or if they load the package themselves with <code><a href="https://rdrr.io/r/base/library.html">library()</a></code>).</p>
</div>
</div>
</div>
</div>
<p>Access to add-on package functions has implications for the other functions in <code>pkgApp</code>–for example, the <code>scatter_plot()</code> function uses <code>ggplot2</code> functions. But we’re not exporting <code>scatter_plot()</code>, so when we attempt to run the examples, we see the following error:</p>
<div class="column-body-outset-right">
<div id="fig-03_dependencies_scatter_plot_examples" class="quarto-layout-panel">
<figure class="figure"><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 40.0%;justify-content: center;">
<div id="fig-03_dependencies_scatter_plot_examples" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/05_dependencies_scatter_plot_examples_rd.png" class="img-fluid figure-img" data-ref-parent="fig-03_dependencies_scatter_plot_examples"></p>
<figcaption class="figure-caption">(a) Examples in <code>scatter_plot()</code></figcaption></figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 60.0%;justify-content: center;">
<div id="fig-03_dependencies_scatter_plot_examples" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/05_dependencies_scatter_plot_examples_error.png" class="img-fluid figure-img" data-ref-parent="fig-03_dependencies_scatter_plot_examples"></p>
<figcaption class="figure-caption">(b) Error in <code>scatter_plot()</code> examples</figcaption></figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Examples in <code>scatter_plot()</code> function without exporting</figcaption><p></p>
</figure>
</div>
</div>
<p><span style="font-weight: bold; font-size: 1.15em;">Examples for ‘pkgApp::scatter_plot’</span></p>
<p>The message at the top of the <strong>Help</strong> pane is informative because it tells us that despite <code>scatter_plot()</code> being functional when we run <code>movies_app()</code>, it’s not part of the package namespace (and thus, not accessible to users in the help file).</p>
</section><section id="exporting-scatter_plot" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="exporting-scatter_plot">Exporting <span style="font-size: 1.05em;"><code>scatter_plot()</code></span>
</h4>
<p>Shiny apps often contain utility functions in <code>helper.R</code> or <code>utils.R</code> files. Storing non-shiny code in these files isn’t a bad practice (in fact, it’s encouraged in <a href="https://mastering-shiny.org/scaling-functions.html#file-organisation">Mastering Shiny</a>). However, if we’re following the advice in <a href="https://r-pkgs.org/dependencies-in-practice.html#what-to-export">R Packages</a>, we should rename <code>R/utils.R</code> as we transition to an app-package,</p>
<blockquote class="blockquote">
<p><em>‘most of our packages have a <code>utils.R</code> file (<a href="https://r-pkgs.org/code.html#sec-code-organising">Section 6.1</a>) that contains small utility functions that are useful internally, but aren’t part of the core purpose of those packages. We don’t export such functions.’</em></p>
</blockquote>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>R/utils.R</code> &gt;&gt; <code>R/scatter_plot.R</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p>From now on, I’ve renamed <code>R/utils.R</code> to <code>R/scatter_plot.R</code>, so it aligns with the naming conventions in other R packages.</p>
<p>For a deep dive on <code>R/utils.R</code> files in R packages, I recommend reading <a href="https://rud.is/b/2018/04/08/dissecting-r-package-utility-belts/">Dissecting R Package “Utility Belts”</a></p>
</div>
</div>
</div>
</div>
<p>Let’s add the <code>@export</code> tag to <code>R/scatter_plot.R</code> so it’s exported from <code>pkgApp</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' Create scatter plot </span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' Custom [`ggplot2`](https://ggplot2.tidyverse.org/) function for building scatter plots in `pkgApp()`.</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @param df `data.frame` or `tibble`</span></span>
<span><span class="co">#' @param x_var string variable mapped to `x` axis</span></span>
<span><span class="co">#' @param y_var string variable mapped to `y` axis</span></span>
<span><span class="co">#' @param col_var string variable mapped to `color`</span></span>
<span><span class="co">#' @param alpha_var number for point `alpha`</span></span>
<span><span class="co">#' @param size_var number for point `size` </span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @return A `ggplot2` plot object</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @examples</span></span>
<span><span class="co">#' scatter_plot(mtcars, </span></span>
<span><span class="co">#'     x_var = "mpg", </span></span>
<span><span class="co">#'     y_var = "disp", </span></span>
<span><span class="co">#'     col_var = "cyl", </span></span>
<span><span class="co">#'     alpha_var = 0.5, </span></span>
<span><span class="co">#'     size_var = 3)</span></span>
<span><span class="co">#'     </span></span>
<span><span class="co">#' @seealso [mod_scatter_display_server()]</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>After loading, documenting, and installing <code>pkgApp</code>, the <code>NAMESPACE</code> is updated with the <code>export()</code> <a href="https://r-pkgs.org/dependencies-mindset-background.html#sec-dependencies-NAMESPACE-file">directive</a>:</p>
<div style="font-style: italic; font-weight: bold; font-size: 1.10em">
<p><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>L</kbd> / <kbd>D</kbd> / <kbd>B</kbd></p>
</div>
<p>The contents of the updated <code>NAMESPACE</code> file are below (and <code>pkgApp::</code> in the <strong>Console</strong> now displays the <code>scatter_plot()</code> help file in the tab completion):</p>
<div class="column-body-outset-right">
<div id="fig-03_dependencies_namespace_scatter_plot" class="quarto-layout-panel">
<figure class="figure"><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 45.0%;justify-content: center;">
<div id="fig-03_dependencies_namespace_scatter_plot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/05_dependencies_namespace_scatter_plot.png" class="img-fluid figure-img" data-ref-parent="fig-03_dependencies_namespace_scatter_plot"></p>
<figcaption class="figure-caption">(a) <code>@export</code> the <code>scatter_plot</code> function</figcaption></figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 55.0%;justify-content: center;">
<div id="fig-03_dependencies_tab_compl_movies_app" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/05_dependencies_tab_compl_scatter_plot.png" class="img-fluid figure-img" data-ref-parent="fig-03_dependencies_namespace_scatter_plot"></p>
<figcaption class="figure-caption">(b) <code>pkgApp::scatter_plot()</code></figcaption></figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: <code>scatter_plot()</code> is now part of the <code>pkgApp</code> namespace</figcaption><p></p>
</figure>
</div>
</div>
<p>Below, we confirm users can access the help file for <code>scatter_plot()</code> and run the examples:</p>
<div id="fig-03_dependencies_scatter_plot_examples" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-03_dependencies_scatter_plot_examples" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/05_dependencies_scatter_plot_examples.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-03_dependencies_scatter_plot_examples"></p>
<figcaption class="figure-caption">(a) <code>scatter_plot()</code> examples</figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;4: Running examples in <code>?scatter_plot</code></figcaption></figure>
</div>
</section><section id="loadednamespaces" class="level4"><h4 class="anchored" data-anchor-id="loadednamespaces"><span style="font-size: 0.95em;"><code>loadedNamespaces()</code></span></h4>
<p>We’ve already confirmed that <code>ggplot2</code> isn’t attached with <code>pkgApp</code> (and hence, it is not included in the <code><a href="https://rdrr.io/r/base/search.html">search()</a></code> list)</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"package:ggplot2"</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/search.html">search</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb26"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>[1]  FALSE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>However, we can access the functions we used the <code>pkg::fun()</code> syntax with because those functions are included in the loaded namespaces (which we can view with <code><a href="https://rdrr.io/r/base/ns-load.html">loadedNamespaces()</a></code>)</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/ns-load.html">loadedNamespaces</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb28"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>[1] TRUE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section></section><section id="what-to-export" class="level3"><h3 class="anchored" data-anchor-id="what-to-export">What to <span style="font-size: 1.05em"><code>@export</code></span>
</h3>
<p>“<em>When a user calls <code><a href="https://rdrr.io/r/base/library.html">library(pkgApp)</a></code>, what functions do I want to be available?</em>”</p>
<p>When determining which functions to export, consider the question above. <a href="https://r-pkgs.org">R Packages, 2ed</a> also offers the following advice on what <strong>shouldn’t</strong> be exported:</p>
<blockquote class="blockquote">
<p><em>‘We believe that packages that have a wide audience should strive to do one thing and do it well. All functions in a package should be related to a single problem (or a set of closely related problems). Any functions not related to that purpose should not be exported.’</em> - <a href="https://r-pkgs.org/dependencies-in-practice.html#what-to-export">What to export, R Packages, 2ed</a></p>
</blockquote>
<p>There are multiple ways to interpret the advice above in the context of a shiny app-package:</p>
<ul>
<li><p>If we take a narrow view of the word ‘problem’ to mean ‘<em>create a way to visualize relationships in movie review data</em>’, then maybe we’d consider it solved by only exporting the standalone app function.</p></li>
<li><p>If the ‘problem’ <code>pkgApp</code> solves is ‘<em>creating a shiny movies app</em>’, we might also want to export any functions that perform distinct tasks with potentially reusable functionality (i.e., generate specific UI components, perform data processing tasks, etc.).</p></li>
<li><p>Extending the ‘problem’ statement to the broadest possible definition would assume users will want access to all the functions in <code>pkgApp</code>–this would allow them to customize, extend, or integrate the contents of <code>pkgApp</code> with other tools. You’ll rarely want to export everything from your app-package, but it can be helpful if your primary audience is other developers within your organization.</p></li>
</ul>
<p>My advice on exports is to <span style="font-size: 1.05em; font-weight: bold; color: #DA1212;">balance simplicity and utility when deciding on exported functions.</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Low-key <code>@export</code>s with <code>@keywords internal</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p>If you’d like function to be exported, but not listed in the package index, you can combine <code>@export</code> with <code>@keywords internal</code>. These should be used in combination,</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' @export</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @keywords internal</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For example, adding <code>@export</code> and <code>@keywords internal</code> to <code>R/scatter_plot.R</code> will make the function accessible to users:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/keywords_internal_namespace.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
<p>And include the help file:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/keywords_internal_rd.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
<p>However, if a user were to click on the <strong>Index</strong> for <code>pkgApp</code> (at the bottom of the help file)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/pkg_index.png" class="img-fluid figure-img" style="width:65.0%"></p>
</figure>
</div>
<p><code>scatter_plot</code> is not listed:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/pkgApp_index.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section></section><section id="imports" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="imports">Imports</h2>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/new_branch_ico.png" class="img-fluid figure-img" style="width:75.0%"></p>
<figcaption class="figure-caption">Git Branch</figcaption></figure>
</div>
<p>This section’s code is in the <a href="https://github.com/mjfrigaard/pkgApp"><code>pkgApp</code></a> repo’s <a href="https://github.com/mjfrigaard/pkgApp/tree/04_pkg-imports"><code>04_pkg-imports</code></a> branch</p>
</div></div><p>Handing imports is slightly more involved than package exports because imported dependencies can live in <code>DESCRIPTION</code> and the <code>NAMESPACE</code>.</p>
<p>The <code>DESCRIPTION</code> file handles <strong>package-level dependencies</strong>, specifying which packages <code>pkgApp</code> uses. These packages are installed whenever a user installs <code>pkgApp</code>.</p>
<p>On the other hand, the <code>NAMESPACE</code> directives manage <strong>function-level access</strong>, importing functions from other packages to be used in <code>pkgApp</code> and–as we’ve seen above–exporting functions from <code>pkgApp</code> for others to use.</p>
<p>When <code>pkgApp</code> is documented (i.e., <strong><span style="font-size: 0.70em;"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>D</kbd></span></strong>), <code>roxygen2</code> tags update the <code>NAMESPACE</code> with any imports or exports. However, the <code>DESCRIPTION</code> file must be edited independently:</p>

<div class="no-row-height column-margin column-container"><div class="">
<div style="font-style: italic;">
<p><strong><span style="font-size: 0.75em;"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>D</kbd></span></strong> updates the <code>NAMESPACE</code>, but it doesn’t change anything in the <code>DESCRIPTION</code> file.</p>
</div>
</div></div><div id="fig-roxygen2_connects" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-roxygen2_connects" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/05_dependencies_roxygen2_no_connect_desc.png" class="img-fluid figure-img" style="width:75.0%" data-align="center" data-ref-parent="fig-roxygen2_connects"></p>
<figcaption class="figure-caption">(a) <code>roxygen2</code> does not connect the <code>NAMESPACE</code> to the <code>DESCRIPTION</code></figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;5: <code>roxygen2</code> &amp; <code>NAMESPACE</code> = function-level access vs.&nbsp;<code>DESCRIPTION</code> = package-level dependencies</figcaption></figure>
</div>
<p>The differences between the dependencies listed in the <code>NAMESPACE</code> directives and the <code>Imports</code> field in the <code>DESCRIPTION</code> file can be a common point of confusion <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, which is understandable if you’ve consulted Writing R Extensions (specifically the sections on dependencies <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> and namespaces.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<p>I’ve attempted to distill and consolidate the advice I’ve found when I’ve gone looking for (and had trouble finding) answers to the following questions:</p>
<div style="font-style: italic;">
<p><span style="font-weight: bold; font-size: 1.01em;">How and where</span> should I be importing add-on functions and packages?</p>
<p><span style="font-weight: bold; font-size: 1.01em;">Why and when</span> should I import add-on packages/functions? and</p>
<p><span style="font-weight: bold; font-size: 1.01em;">What</span> happens when a package or function is imported?</p>
</div>
<p>I’ve also <span style="color: #DA1212;">emphasized</span> the parts I’ve found worth committing to memory.</p>
<section id="how-and-where" class="level3"><h3 class="anchored" data-anchor-id="how-and-where"><span style="font-weight: bold; font-size: 1.05em;">How and where?</span></h3>
<p>There are three ways to import dependencies:</p>
<ol type="1">
<li>Use a ‘fully qualified variable reference’ (i.e., the <code>pkg::fun()</code> syntax)<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> for calls to add-on functions in the <code>R/</code> folder</li>
</ol>
<ol start="2" type="1">
<li><p>List add-on packages in the <code>Imports</code> field of the <code>DESCRIPTION</code> file</p></li>
<li><p>Include an <code>@import</code> or <code>@importFrom</code> tag for add-on packages in the <code>R/</code> folder <code>roxygen2</code><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p></li>
</ol>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="How and where to use...">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
How and where to use…
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page"><span style="font-size: 0.90em;"><code>pkg::fun()</code></span></a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false"><span style="font-size: 0.90em;"><code>Imports</code> (<code>DESCRIPTION</code>)</span></a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false"><span style="font-size: 0.90em;"><code>@import/@importFrom</code> (<code>NAMESPACE</code>)</span></a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p><a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html">Writing R Extensions</a> refers to the <code>pkg::fun()</code> syntax as a ‘fully-qualified reference’:</p>
<blockquote class="blockquote">
<p>“<em><span style="color: #DA1212;">A fully-qualified reference</span> to the function <code>f</code> in package <code>foo</code> is of the form <code>foo::f</code>.</em>” - <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Specifying-imports-and-exports">Specifying imports and exports</a></p>
</blockquote>
<p>Using ‘<code>pkg::fun()</code>’ can seem tedious at first, but fortunately we have tools like tab-completion (if you’re using the Posit Workbench IDE) and packages like <a href="https://yonicd.github.io/sinew/"><code>sinew</code></a> (which we’ll cover in a later chapter)</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p><a href="https://r-pkgs.org/">R Packages, 2ed</a> recommends using the <code><a href="https://usethis.r-lib.org/reference/use_package.html">usethis::use_package()</a></code> function to include add-on packages to the <code>Imports</code> field of the <code>DESCRIRPTION</code> file<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<blockquote class="blockquote">
<p>“<em>Remember <code><a href="https://usethis.r-lib.org/reference/use_package.html">usethis::use_package()</a></code> is helpful for <span style="color: #DA1212;">adding dependencies to <code>DESCRIPTION</code></span></em>” - <a href="https://r-pkgs.org/dependencies-in-practice.html#fn2">Dependencies: In Practice</a></p>
</blockquote>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p><a href="https://r-pkgs.org/">R Packages, 2ed</a> assumes you’ll be building your app-package with <code>roxygen2</code> and <code><a href="https://devtools.r-lib.org/reference/document.html">devtools::document()</a></code>, so the authors recommend using the <code><a href="https://usethis.r-lib.org/reference/use_import_from.html">usethis::use_import_from()</a></code><a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
<blockquote class="blockquote">
<p>“<em>A handy function <span style="color: #DA1212;">for your interactive workflow</span> is <code><a href="https://usethis.r-lib.org/reference/use_import_from.html">usethis::use_import_from()</a></code></em>” - <a href="https://r-pkgs.org/dependencies-in-practice.html#sec-dependencies-in-imports-r-code">In code below R/</a></p>
</blockquote>
<p>Using <code><a href="https://usethis.r-lib.org/reference/use_import_from.html">usethis::use_import_from()</a></code> also adds a new <code>R/[app-package]-package.R</code> file, which can server as a ‘central repository’ for the imported functions and packages (see <code><a href="https://usethis.r-lib.org/reference/use_package_doc.html">usethis::use_package_doc()</a></code> also).</p>
</div>
</div>
</div>
</div>
</div>
</div>
<section id="how-and-where-in-pkgapp" class="level4"><h4 class="anchored" data-anchor-id="how-and-where-in-pkgapp">
<span style="font-weight: bold;">How and where</span> in <span style="font-size: 1.05em;"><code>pkgApp</code></span>
</h4>
<p>We’re already using <code>pkg::fun()</code> in the two exported functions from <code>pkgApp</code> (<code>movies_app()</code> and <code>scatter_plot()</code>):</p>
<ul class="task-list">
<li>
<input type="checkbox" checked=""><code>pkg::fun()</code> in <code>movies_app()</code>:</li>
</ul>
<div class="cell">
<details><summary>show/hide explicit namespacing in movies_app()</summary><div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">movies_app</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">movies_ui</span>, server <span class="op">=</span> <span class="va">movies_server</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul class="task-list">
<li>
<input type="checkbox" checked=""><code>pkg::fun()</code> in <code>scatter_plot()</code>:</li>
</ul>
<div class="cell">
<details><summary>show/hide explicit namespacing in scatter_plot()</summary><div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">scatter_plot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">x_var</span>, <span class="va">y_var</span>, <span class="va">col_var</span>, <span class="va">alpha_var</span>, <span class="va">size_var</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df</span>,</span>
<span>      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">x_var</span><span class="op">]</span><span class="op">]</span>,</span>
<span>          y <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">y_var</span><span class="op">]</span><span class="op">]</span>,</span>
<span>          color <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">col_var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="va">alpha_var</span>, size <span class="op">=</span> <span class="va">size_var</span><span class="op">)</span></span>
<span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now let’s cover when and why to list these packages and functions as imports.</p>
</section></section><section id="when-and-why" class="level3"><h3 class="anchored" data-anchor-id="when-and-why"><span style="font-weight: bold; font-size: 1.05em;">When and why?</span></h3>
<p>Knowing <span style="font-weight: bold;">when and why</span> to use each import method is just as important as knowing <span style="font-weight: bold;">how and where</span> to import add-on packages and functions.</p>
<p>I’ve done my best to distill the available information into actionable decisions below:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="When and why to use...">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
When and why to use…
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true"><span style="font-size: 0.90em;"><code>pkg::fun()</code></span></a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false"><span style="font-size: 0.90em;"><code>Imports</code> (<code>DESCRIPTION</code>)</span></a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false"><span style="font-size: 0.90em;"><code>@import/@importFrom</code> (<code>NAMESPACE</code>)</span></a></li>
</ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>If your app-package only uses a handful of functions from an add-on package, using <code>pkg::fun()</code> is fine<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p>
<blockquote class="blockquote">
<p>“<em>If a package <span style="color: #DA1212;">only needs a few objects from another package</span> it can use a fully qualified variable reference (<code>foo::f</code>) in the code instead of a formal import.</em>” - <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Specifying-imports-and-exports">Specifying imports and exports</a></p>
</blockquote>
<p>If there is a potential name conflict, use the <code>pkg::fun()</code> syntax:</p>
<blockquote class="blockquote">
<p><em>Using the <code>foo::f</code> form will be necessary when a package needs to use a function of the <span style="color: #DA1212;">same name from more than one namespace.</span></em>” - <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Specifying-imports-and-exports">Specifying imports and exports</a></p>
</blockquote>
<p>On the other hand, <a href="https://r-pkgs.org/">R Packages, 2ed</a> recommends defaulting to <code>pkg::fun()</code> for calls to <em>any</em> add-on packages in the <code>R/</code> folder because it makes these calls more explicit:</p>
<blockquote class="blockquote">
<p>“<em>…the <code>package::function()</code> calling style is also our default recommendation for how to use your dependencies in the code below R/, <span style="color: #DA1212;">because it eliminates all ambiguity.</span></em>” - <a href="https://r-pkgs.org/dependencies-mindset-background.html#sec-dependencies-namespace-motivation">R packages, Namespace</a></p>
<p>“<em>Our recommended default is to <span style="color: #DA1212;">call external functions using the <code>package::function()</code> syntax</span></em>” - <a href="https://r-pkgs.org/dependencies-in-practice.html#sec-dependencies-in-imports">R Packages 2ed, In code below <code>R/</code></a></p>
</blockquote>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p><a href="https://r-pkgs.org/dependencies-mindset-background.html">Writing R Extensions</a> states that any add-on package functions using <code>pkg::fun()</code> should be listed in the <code>DESCRIPTION</code> (specifically, the <code>Imports</code> field).</p>
<blockquote class="blockquote">
<p>“<em>The <code>Imports</code> field lists packages whose namespaces are imported from (as specified in the <code>NAMESPACE</code> file) but which do not need to be attached. <span style="color: #DA1212;">Namespaces accessed by the <code>::</code> and <code>:::</code> operators must be listed here.</span></em>” - <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Package-Dependencies">Package Dependencies</a></p>
</blockquote>
<p>You might be wondering, “<em>What if I list a package in <code>DESCRIPTION</code>/<code>Imports</code> field, but don’t list it in the <code>NAMESPACE</code></em>?” <a href="https://r-pkgs.org/">R Packages, 2ed</a> addresses this:</p>
<blockquote class="blockquote">
<p>“<em>It is common for a package to be listed in <code>Imports</code> in <code>DESCRIPTION</code>, but not in <code>NAMESPACE</code>. The converse is not true. <span style="color: #DA1212;">Every package mentioned in <code>NAMESPACE</code> must also be present in the <code>Imports</code> or <code>Depends</code> fields.</span></em>” - <a href="https://r-pkgs.org/dependencies-in-practice.html#confusion-about-imports">Confusion about Imports</a></p>
</blockquote>
<p>On when to use <code>Imports</code> vs.&nbsp;<code>Depends</code>:</p>
<blockquote class="blockquote">
<p><em>Unless there is a good reason otherwise, <span style="color: #DA1212;">you should always list packages in <code>Imports</code> not <code>Depends</code></span>.</em>” - <a href="https://r-pkgs.org/dependencies-mindset-background.html#sec-dependencies-namespace">Whether to Import or Depend</a></p>
</blockquote>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<p><a href="https://r-pkgs.org/dependencies-mindset-background.html">Writing R Extensions</a> states ‘variables exported from other packages’ need to be listed in the <code>NAMESPACE</code> (and recommends using <code>@importFrom</code> over <code>@import</code> in most cases):</p>
<blockquote class="blockquote">
<p>“<em>Variables exported from <span style="color: #DA1212;">other packages with namespaces need to be imported explicitly using the directives <code>Imports</code> and <code>importFrom</code></span></em>” <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Specifying-imports-and-exports">Specifying imports and exports</a></p>
<p>“<em>Using <code>importFrom</code> selectively rather than <code>Imports</code> is good practice and recommended notably <span style="color: #DA1212;">when importing from packages with more than a dozen exports and especially from those written by others (so what they export can change in future)</span>.</em>” - <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Specifying-imports-and-exports">Specifying imports and exports</a>.</p>
</blockquote>
<p>Using <code>pkg::fun()</code> is also referred to as less efficient than a ‘formal import’ in <a href="https://r-pkgs.org/dependencies-mindset-background.html">Writing R Extensions</a> (a ‘formal import’ means the add-on package function uses a directive in the <code>NAMESPACE</code>):</p>
<blockquote class="blockquote">
<p>“<em>[<code>foo::f</code>] is slightly <span style="color: #DA1212;">less efficient than a formal import</span> and also loses the advantage of recording all dependencies in the <code>NAMESPACE</code> file”</em> - <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Specifying-imports-and-exports">Specifying imports and exports</a>.</p>
</blockquote>
<p>However, <a href="https://r-pkgs.org/">R Packages, 2ed</a> recommends minimizing the use of both <code>@import</code> and <code>@importFrom</code> (<em>the <code>aaapkg</code> represents a hypothetical package listed in the <code>Imports</code> field of the <code>DESCRIPTION</code> file in the example below</em>)</p>
<blockquote class="blockquote">
<p>“<em>Specifically, we recommend that you <span style="color: #DA1212;">default to not importing anything from <code>aaapkg</code> into your namespace</span>. This makes it very easy to identify which functions live outside of your package, which is especially useful when you read your code in the future. This also eliminates any concerns about name conflicts between <code>aaapkg</code> and your package.</em>” <a href="https://r-pkgs.org/dependencies-in-practice.html#sec-dependencies-in-imports">Package is listed in Imports</a></p>
</blockquote>
<p>But <a href="https://r-pkgs.org/">R Packages, 2ed</a> also notes the following exceptions to this rule in <a href="https://r-pkgs.org/dependencies-in-practice.html#sec-dependencies-in-imports">Package is listed in <code>Imports</code></a>:</p>
<blockquote class="blockquote">
<p>“<em>Sometimes you make such <span style="color: #DA1212;">heavy use of so many functions from another package that you want to import its entire namespace</span>.</em>” <a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></p>
<p>“<em>You can’t call an <span style="color: #DA1212;">operator from another package</span> via ::, so you must import it.</em>” <a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a></p>
</blockquote>
<p>If you happen to read the advice from the footnote, you’ll also find somewhat conflicting advice:</p>
<blockquote class="blockquote">
<p>“<em><span style="color: #DA1212;">Always use a <code>NAMESPACE</code> to specify imports</span> so that your package code isn’t harmed by other peoples’ use of <code>Depends</code>.</em>” - <a href="https://r-pkgs.org/dependencies-mindset-background.html#fn6">Whether to Import or Depend: footnote reference</a></p>
</blockquote>
</div>
</div>
</div>
</div>
</div>
</div>
<section id="when-and-why-in-pkgapp" class="level4"><h4 class="anchored" data-anchor-id="when-and-why-in-pkgapp">
<span style="font-weight: bold;">When and why</span> in <span style="font-size: 1.05em;"><code>pkgApp</code></span>
</h4>
<p>I’ve found the best guidance on when and why to use each method (<code>pkg::fun()</code>, <code>Imports</code> in the <code>DESCRIPTION</code>, or <code>@import</code>/<code>@importFrom</code>) comes from the <code>roxygen2</code> documentation:</p>
<blockquote class="blockquote">
<p><em>“if you are using just a few functions from another package, we recommending adding the package to the <code>Imports:</code> field of the <code>DESCRIPTION</code> file and calling the functions explicitly using <code>::</code>, e.g., <code>pkg::fun()</code>”</em></p>
<p><em>“If the repetition of the package name becomes annoying you can <code>@importFrom</code> and drop the [<code>pkg::fun()</code>]”</em> - <a href="https://roxygen2.r-lib.org/articles/namespace.html#functions">Importing functions</a></p>
</blockquote>
<p>Following this advice (and the exceptions to the rule regarding ‘heavy use’<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a> and ‘operators’<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a> from add-on packages) we can:</p>
<ul class="task-list">
<li>
<input type="checkbox" checked="">Replace the explicit namespacing from all calls to <code>shiny</code> functions (i.e., <code>shiny::</code>) with the <code>@import</code> tag in <code>R/movies_app.R</code>:</li>
</ul>
<div class="cell">
<details><summary>show/hide <span class="citation" data-cites="import">@import</span> in movies_app()</summary><div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' Movies app standalone function</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' Wrapper function for `shinyApp()`</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @return shiny app</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @seealso [mod_var_input_ui()], [mod_var_input_server()], [mod_scatter_display_ui()], [mod_scatter_display_server()]</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @import shiny</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' </span></span>
<span><span class="va">movies_app</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">movies_ui</span>, server <span class="op">=</span> <span class="va">movies_server</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul class="task-list">
<li>
<input type="checkbox" checked="">Include <code>@importFrom</code> for the use of <code>.data</code> in <code>R/scatter_plot.R</code>:</li>
</ul>
<div class="cell">
<details><summary>show/hide <span class="citation" data-cites="importFrom">@importFrom</span> in scatter_plot()</summary><div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' Create scatter plot </span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' Custom [`ggplot2`](https://ggplot2.tidyverse.org/) function for building scatter plots in `pkgApp()`.</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @param df `data.frame` or `tibble`</span></span>
<span><span class="co">#' @param x_var string variable mapped to `x` axis</span></span>
<span><span class="co">#' @param y_var string variable mapped to `y` axis</span></span>
<span><span class="co">#' @param col_var string variable mapped to `color`</span></span>
<span><span class="co">#' @param alpha_var number for point `alpha`</span></span>
<span><span class="co">#' @param size_var number for point `size` </span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @return A `ggplot2` plot object</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @examples</span></span>
<span><span class="co">#' scatter_plot(mtcars, </span></span>
<span><span class="co">#'     x_var = "mpg", </span></span>
<span><span class="co">#'     y_var = "disp", </span></span>
<span><span class="co">#'     col_var = "cyl", </span></span>
<span><span class="co">#'     alpha_var = 0.5, </span></span>
<span><span class="co">#'     size_var = 3)</span></span>
<span><span class="co">#'     </span></span>
<span><span class="co">#' @seealso [mod_scatter_display_server()]</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @importFrom rlang .data</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' </span></span>
<span><span class="va">scatter_plot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">x_var</span>, <span class="va">y_var</span>, <span class="va">col_var</span>, <span class="va">alpha_var</span>, <span class="va">size_var</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df</span>,</span>
<span>      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">x_var</span><span class="op">]</span><span class="op">]</span>,</span>
<span>          y <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">y_var</span><span class="op">]</span><span class="op">]</span>,</span>
<span>          color <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">col_var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="va">alpha_var</span>, size <span class="op">=</span> <span class="va">size_var</span><span class="op">)</span></span>
<span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Finally, we need to list each add-on package to the <code>Imports</code> field in the <code>DESCRIPTION</code> using <code><a href="https://usethis.r-lib.org/reference/use_package.html">usethis::use_package()</a></code> (below is the output for <code>ggplot2</code>):</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>usethis::use_package("ggplot2")</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>✔ Setting active project to '/path/to/pkgApp'</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>✔ Adding 'ggplot2' to Imports field in DESCRIPTION</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>• Refer to functions with `ggplot2::fun()`</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>After adding all add-on packages to the DESCRIPTION with <code><a href="https://usethis.r-lib.org/reference/use_package.html">usethis::use_package()</a></code>, we’ll load, document, and install <code>pkgApp</code>:</p>
<div style="font-style: italic; font-weight: bold; font-size: 1.10em">
<p><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>L</kbd> / <kbd>D</kbd> / <kbd>B</kbd></p>
</div>
<p>And we should review the updated <code>NAMESPACE</code> and <code>DESCRIPTION</code> files:</p>
<div id="fig-03_dependencies_namespace_import_shiny" class="quarto-layout-panel">
<figure class="figure"><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-03_dependencies_namespace_import_shiny" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/05_dependencies_namespace_import_importFrom.png" class="img-fluid figure-img" data-align="center" data-ref-parent="fig-03_dependencies_namespace_import_shiny"></p>
<figcaption class="figure-caption">(a) Updated <code>NAMESPACE</code> with <code>Imports</code> and `importFrom</figcaption></figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-03_dependencies_namespace_import_shiny" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/05_dependencies_description_imports.png" class="img-fluid figure-img" data-align="center" data-ref-parent="fig-03_dependencies_namespace_import_shiny"></p>
<figcaption class="figure-caption">(b) Updated <code>DESCRIPTION</code> with all <code>Imports</code></figcaption></figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;6: <code>roxygen2</code> will update the <code>NAMESPACE</code>, but <code><a href="https://usethis.r-lib.org/reference/use_package.html">usethis::use_package()</a></code> is needed to update the <code>DESCRIPTION</code></figcaption><p></p>
</figure>
</div>
<p>When we run <code>movies_app()</code>, we see the application launches and we can still run the <code>scatter_plot()</code> examples:</p>
<div id="fig-import_check_app_examples" class="quarto-layout-panel">
<figure class="figure"><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-03_dependencies_namespace_import_shiny" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/05_dependencies_exported_movies_app.png" class="img-fluid figure-img" data-align="center" data-ref-parent="fig-import_check_app_examples"></p>
<figcaption class="figure-caption">(a) <code>movies_app()</code> works</figcaption></figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-import_check_app_examples" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/05_dependencies_scatter_plot_examples.png" class="img-fluid figure-img" data-align="center" data-ref-parent="fig-import_check_app_examples"></p>
<figcaption class="figure-caption">(b) Examples in <code>?scatter_plot</code></figcaption></figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;7: Confirming we still have full functionality in <code>pkgApp</code></figcaption><p></p>
</figure>
</div>
<p>In the next section, we’re going to cover what happens when these packages and functions were included as imports in <code>pkgApp</code>.</p>
</section></section><section id="what-happens" class="level3"><h3 class="anchored" data-anchor-id="what-happens"><span style="font-weight: bold; font-size: 1.05em;">What happens?</span></h3>
<p>What happens to imported packages and functions can get a bit technical, but I’ve done my best to include what I consider to be the necessary distinctions between using <code>pkg::fun()</code>, the <code>@import</code>/<code>@importFrom</code> tags, and the <code>Imports</code> field in the <code>DESCRIPTION.</code></p>
<p>I strongly encourage reading the <a href="https://adv-r.hadley.nz/environments.html#namespaces">namespaces section of Advanced R, 2ed</a> for a deeper understanding of these topics.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" data-collpase="false" title="What happens when we use...">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What happens when we use…
</div>
</div>
<div class="callout-body-container callout-body">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true"><span style="font-size: 0.90em;"><code>pkg::fun()</code></span></a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false"><span style="font-size: 0.90em;"><code>Imports</code> (<code>DESCRIPTION</code>)</span></a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false"><span style="font-size: 0.90em;"><code>@import/@importFrom</code> (<code>NAMESPACE</code>)</span></a></li>
</ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<blockquote class="blockquote">
<p>“<em>Evaluating <code>foo::f</code> will cause package <code>foo</code> to be <span style="color: #DA1212;">loaded, but not attached</span>, if it was not loaded already</em>” - <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Specifying-imports-and-exports">Specifying imports and exports</a>.</p>
</blockquote>
<p>This means if users of our package want to use <code>foo::f</code>, they will have to use <code>foo::f</code>.</p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<p><a href="https://r-pkgs.org/">R Packages, 2ed</a> describes what happens to packages listed in <code>Imports:</code></p>
<blockquote class="blockquote">
<p><em>Consider a dependency that is listed in <code>DESCRIPTION</code> in <code>Imports:</code></em></p>
<pre><code>Imports:
    aaapkg</code></pre>
<p><em>The code inside your package can <span style="color: #DA1212;">assume that aaapkg is installed whenever pkg is installed</span>.</em></p>
</blockquote>
<p><a href="https://r-pkgs.org/">R Packages, 2ed</a> also recommends using <code>Imports</code> (instead of <code>Depends</code>) and describes the the differences in their actions (i.e., loading vs.&nbsp;loaded &amp; attaching)</p>
<blockquote class="blockquote">
<p>“<em>The main difference is that a package you list in <code>Imports</code> will <span style="color: #DA1212;">just be loaded when you use it</span>, whereas a package you list in <code>Depends</code> <span style="color: #DA1212;">will be attached when your package is attached</span>.</em> - <a href="https://r-pkgs.org/dependencies-mindset-background.html#sec-dependencies-namespace">Whether to Import or Depend</a></p>
</blockquote>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<p>Imports are covered in <a href="https://adv-r.hadley.nz/environments.html#namespaces">Advanced R, 2ed</a>:</p>
<blockquote class="blockquote">
<p>“<em>Each namespace has an <strong>imports</strong> environment that can contain bindings to functions used by the package that are defined in another package. <span style="color: #DA1212;">The <strong>imports</strong> environment is controlled by the package developer with the <code>NAMESPACE</code> file. Specifically, directives such as <code>importFrom()</code> and <code>imports()</code> populate this environment.</span></em>” - <a href="https://r-pkgs.org/dependencies-mindset-background.html#function-lookup-inside-a-package">Function lookup inside a package</a></p>
</blockquote>
</div>
</div>
</div>
</div>
</div>
<section id="what-happened-in-pkgapp" class="level4"><h4 class="anchored" data-anchor-id="what-happened-in-pkgapp">
<span style="font-weight: bold;">What happened</span> in <span style="font-size: 1.05em;"><code>pkgApp</code></span>
</h4>
<p>First, let’s confirm we’re still only exporting <code>movies_app()</code> and <code>scatter_plot()</code> from <code>pkgApp</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"package:pkgApp"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb37"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>[1] "movies_app"   "scatter_plot"</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Great. Now we’ve listed five packages in the <code>Imports</code> field of the <code>DESCRIPTION</code> file:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>Imports: </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    ggplot2,</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    rlang,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    shiny,</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    shinythemes,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    stringr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="the-search-list-1" class="level4"><h4 class="anchored" data-anchor-id="the-search-list-1">The <span style="font-size: 1.05em;"><code>search()</code></span> list</h4>
<p>Are these packages on the search list?</p>
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"package:ggplot2"</span>, <span class="st">"package:rlang"</span>, </span>
<span>          <span class="st">"package:shiny"</span>, <span class="st">"package:shinythemes"</span>, </span>
<span>          <span class="st">"package:stringr"</span><span class="op">)</span></span>
<span><span class="va">pkgs</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/search.html">search</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb40"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>[1] FALSE FALSE FALSE FALSE FALSE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This demonstrates that none of these packages are attached with <code>pkgApp</code>. However, the <code>rlang</code> and <code>shiny</code> packages are included in the <code><a href="https://rdrr.io/r/base/ns-load.html">loadedNamespaces()</a></code> (because we included them with <code>@import</code>/<code>@importFrom</code>).</p>
<div class="cell">
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ggplot2"</span>, <span class="st">"rlang"</span>, <span class="st">"shiny"</span>, </span>
<span>          <span class="st">"shinythemes"</span>, <span class="st">"stringr"</span><span class="op">)</span></span>
<span><span class="va">pkgs</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/ns-load.html">loadedNamespaces</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb42"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>[1] FALSE  TRUE  TRUE FALSE FALSE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can still access the add-on package functions in <code>pkgApp</code> using the <code>pkg::fun()</code> syntax:</p>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mtcars</span>, </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">disp</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/05_dependencies_using_ggplot2_with_ns.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><code>ggplot2</code> functions are still available if we explicitly namespace</figcaption></figure>
</div>
</div>
</div>
</div>
</section></section></section><section id="checking-dependencies" class="level2"><h2 class="anchored" data-anchor-id="checking-dependencies">Checking dependencies</h2>
<p>With all the moving parts in dependency management, it can be easy to forget if you’ve documented everything correctly. So far we haven’t covered using <code><a href="https://devtools.r-lib.org/reference/check.html">devtools::check()</a></code> as part of your app-package habits (which <a href="https://mastering-shiny.org/scaling-packaging.html#r-cmd-check">is fine</a>), but this is one area it’s particularly helpful.</p>
<p>For example, if I had listed <code>shiny</code> as an import using the <code>@import</code> tag (resulting in the <code>import(shiny)</code> directive in the <code>NAMESPACE</code>), <code><a href="https://devtools.r-lib.org/reference/check.html">devtools::check()</a></code> would produce the following error:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>── R CMD check results ────────────────────────── pkgApp 0.0.0.9000 ────</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>Duration: 7.4s</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>❯ checking package dependencies ... ERROR</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  Namespace dependency missing from DESCRIPTION Imports/Depends entries: ‘shiny’</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  See section ‘The DESCRIPTION file’ in the ‘Writing R Extensions’</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  manual.</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>1 error ✖ | 0 warnings ✔ | 0 notes ✔</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>Error: R CMD check found ERRORs</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>Execution halted</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>Exited with status 1.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="recap" class="level2"><h2 class="anchored" data-anchor-id="recap">Recap</h2>
<p>Below are the main takeaways from managing the imports and exports from your app-package:</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Dependencies recap
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p>This chapter covered:</p>
<ul>
<li><p><strong>Exports</strong>: Aim for a balance between simplicity and utility when deciding which functions to export (i.e., what functions should be available to users who install your package). Export objects from using <code>@export</code></p></li>
<li>
<p><strong>Imports</strong>: Use <code>pkg::fun()</code> syntax when you use add-on package functions and include them in the <code>Imports</code> field of the <code>DESCRIPTION</code> file. App-packages use so many <code>shiny</code> functions it makes sense to include <code>@import shiny</code> to 1) ensure all of these functions are available, and 2) you won’t need to use <code>pkg::fun()</code>.</p>
<ul>
<li><p><strong><code>DESCRIPTION</code> <code>Imports</code></strong> This field lists the packages your app-package uses. All add-on packages used in the <code>R/</code> folder must be listed in the <code>Imports</code> field. These functions can be called using the <code>pkg::fun()</code> syntax (or with <code>@importFrom()</code>). Functions from these packages will be available for your package, but not for the user unless they use the <code>::</code> operator or load the package themselves with <code><a href="https://rdrr.io/r/base/library.html">library()</a></code>.</p></li>
<li><p><strong><code>NAMESPACE</code> imports</strong>: The <code>@import</code>/<code>@importFrom</code> tags make the functions from add-on packages available to your package. Favor using <code>@importFrom</code> over <code>@import</code> for add-on package functions (the only exception being <code>shiny</code>, which you’d want to use <code>@import</code>).</p></li>
</ul>
</li>
</ul>
<p>The <code>Imports</code> field in the <code>DESCRIPTION</code> handles package-level dependencies (and it is managed manually or with <code><a href="https://usethis.r-lib.org/reference/use_package.html">usethis::use_package()</a></code>), while the <code>NAMESPACE</code> handles function-level access (with <code>@export</code> and <code>@import</code>/<code>@importFrom</code>).</p>
</div>
</div>
</div>
</div>
<p>In the next section, we’ll cover how the ensure the <code>app.R</code> file runs our application!</p>


</section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>See the section titled, ‘<a href="https://r-pkgs.org/dependencies-in-practice.html#confusion-about-imports">Confusion about Imports</a>’ in <a href="https://r-pkgs.org/">R Packages, 2ed</a>, “<em>Listing a package in <code>Imports</code> in <code>DESCRIPTION</code> does not ‘import’ that package.</em>”<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>See section <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Package-Dependencies">1.1.3 Package Dependencies</a> in <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html">Writing R Extensions</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>See section <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Package-namespaces">1.5, Package namespaces</a> in <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html">Writing R Extensions</a><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>We’re already using this method in the functions for <a href="https://github.com/mjfrigaard/pkgApp/tree/04_pkg-imports/R"><code>pkgApp</code></a><a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>The <code>@import</code> and <code>@importFrom</code> tags will add the <code>import()</code> or <code>importFrom()</code> directives in the <code>NAMESPACE</code>, respectively.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>The <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file">official R documentation</a> assumes you’ll adding dependencies to the <code>DESCRIPTION</code> file manually<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>The <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Specifying-imports-and-exports">official R documentation</a> assumes you’ll be editing the <code>NAMESPACE</code> manually (i.e., with <code>export()</code>, <code>import()</code>, and <code>importFrom()</code> directives)<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>This is the case for <code>ggplot2</code> in our exported <code>scatter_plot()</code> function from <code>pkgApp</code><a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>App-packages should include <code>@import shiny</code> because nearly all the functions (modules, standalone app functions, etc.) will require <code>shiny</code>.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>Our use of <code>.data</code> in <code>scatter_plot()</code> requires <code>@importFrom</code> because it’s not accessible with <code>::</code> from <a href="https://rlang.r-lib.org/reference/dot-data.html"><code>rlang</code></a>.<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>“<em>Sometimes you make such heavy use of so many functions from another package that you want to import its entire namespace.</em>”, <a href="https://r-pkgs.org/dependencies-in-practice.html#sec-dependencies-in-imports-r-code">R Packages, 2ed, In code below <code>R/</code></a>”<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p>“<em>You can’t call an operator from another package via <code>::</code>, so you must import it</em>”, <a href="https://r-pkgs.org/dependencies-in-practice.html#sec-dependencies-in-imports-r-code">R Packages, 2ed, In code below <code>R/</code></a>”<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./document.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Documentation</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./launch.html" class="pagination-link">
        <span class="nav-page-text">Launch</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>