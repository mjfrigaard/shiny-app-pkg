<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="A manual for making shiny app-packages">
<title>Shiny App-Packages - Dependencies</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./data.html" rel="next">
<link href="./roxygen2.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
</head>
<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./app_packages.html">App-packages</a></li><li class="breadcrumb-item"><a href="./dependencies.html">Dependencies</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Shiny App-Packages</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/mjfrigaard/shinyap" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome!</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./shiny.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Shiny apps</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./devtools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span style="font-size: 1.05em;"><code>devtools</code></span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./app_packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">App-packages</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roxygen2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span style="font-size: 1.05em;"><code>roxygen2</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dependencies.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Dependencies</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inst_www.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span style="font-size: 1.05em;"><code>inst/</code></span> &amp; <span style="font-size: 1.05em;"><code>www/</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./run.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Running the app</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./frameworks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Frameworks</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./golem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>goelm</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./leprechaun.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>leprechaun</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rhino.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>rhino</code></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./special_topics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Special topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./debugging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Debugging</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./css.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CSS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./js.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">JavaScript</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code_tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Code tools</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Glossary of terms</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GitHub</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul>
<li><a href="#your-package-namespace" id="toc-your-package-namespace" class="nav-link active" data-scroll-target="#your-package-namespace">Your package <span style="font-size: 1.05em"><code>NAMESPACE</code></span></a></li>
  <li>
<a href="#pkgapp" id="toc-pkgapp" class="nav-link" data-scroll-target="#pkgapp"><span style="font-size: 1.05em"><code>pkgApp</code></span></a>
  <ul>
<li><a href="#when-in-doubt" id="toc-when-in-doubt" class="nav-link" data-scroll-target="#when-in-doubt">When in doubt</a></li>
  <li>
<a href="#running-movies_app" id="toc-running-movies_app" class="nav-link" data-scroll-target="#running-movies_app">Running <span style="font-size: 1.10em"><code>movies_app()</code></span></a>
  <ul>
<li><a href="#what-do-you-mean-could-not-find-function" id="toc-what-do-you-mean-could-not-find-function" class="nav-link" data-scroll-target="#what-do-you-mean-could-not-find-function">What do you mean, “<em>could not find function</em>”?</a></li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#roxygen2-exports" id="toc-roxygen2-exports" class="nav-link" data-scroll-target="#roxygen2-exports"><span style="font-size: 1.05em;"><code>roxygen2</code></span> exports</a>
  <ul>
<li><a href="#what-do-i-export" id="toc-what-do-i-export" class="nav-link" data-scroll-target="#what-do-i-export">What do I <code>@export</code>?</a></li>
  <li>
<a href="#export" id="toc-export" class="nav-link" data-scroll-target="#export"><span style="font-size: 1.05em;"><code>@export</code></span></a>
  <ul>
<li><a href="#exporting-from-utils.r" id="toc-exporting-from-utils.r" class="nav-link" data-scroll-target="#exporting-from-utils.r">Exporting from <span style="font-size: 1.05em;"><code>utils.R</code></span></a></li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#roxygen2-imports" id="toc-roxygen2-imports" class="nav-link" data-scroll-target="#roxygen2-imports"><span style="font-size: 1.05em;"><code>roxygen2</code></span> imports</a>
  <ul>
<li><a href="#importfrom-or-import" id="toc-importfrom-or-import" class="nav-link" data-scroll-target="#importfrom-or-import"><span style="font-size: 1.05em;"><code>@importFrom</code></span> or <span style="font-size: 1.05em;"><code>@import</code></span></a></li>
  </ul>
</li>
  <li><a href="#namespace-directives" id="toc-namespace-directives" class="nav-link" data-scroll-target="#namespace-directives"><span style="font-size: 1.05em;"><code>NAMESPACE</code></span> directives</a></li>
  <li><a href="#description-imports" id="toc-description-imports" class="nav-link" data-scroll-target="#description-imports"><span style="font-size: 1.05em;"><code>DESCRIPTION</code></span> <span style="font-weight: bold; font-size: 1.05em;"><code>Imports:</code></span></a></li>
  <li><a href="#namespace-in-pkgapp" id="toc-namespace-in-pkgapp" class="nav-link" data-scroll-target="#namespace-in-pkgapp"><span style="font-size: 1.05em;"><code>NAMESPACE</code></span> in <span style="font-size: 1.05em;"><code>pkgApp</code></span></a></li>
  <li><a href="#app.r" id="toc-app.r" class="nav-link" data-scroll-target="#app.r"><span style="font-size: 1.05em;"><code>app.R</code></span></a></li>
  <li><a href="#recap" id="toc-recap" class="nav-link" data-scroll-target="#recap">Recap</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/mjfrigaard/shinyap/edit/main/dependencies.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/mjfrigaard/shinyap/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Dependencies</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning!
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p>This section is being revised, so the information is subject to change. Thank you for your patience.</p>
</div>
</div>
</div>
</div>
<p>The previous chapter covered using <code>roxygen2</code> to document the functions in <code>pkgApp</code>. In this chapter, I will show the <code>roxygen2</code> tags used to update the <code>NAMESPACE</code>, and the distinction between package-level dependencies and function-level access.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Chapter 4 recap: documenting functions with <code>roxygen2</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p><strong>Required <code>@tags</code> for all functions</strong>:</p>
<ul>
<li>Make sure all functions have a documented title &amp; description (<code>@title</code> and <code>@description</code> tags optional), function inputs and outputs (<code>@param</code> and <code>@return</code>), and demonstrations of how the function works (<code>@examples</code>)</li>
</ul>
<p><strong>Shiny-specific documentation</strong>:</p>
<ul>
<li><p>Use <code>@seealso</code> to link module UI and server functions, and <code>@family</code> to link functions within a similar topic (i.e., ‘import data’ or ‘scatter plot’)</p></li>
<li><p>Provide shiny-specific information (use within the app, reactive state, more details about the <code>@param</code>s, etc.) in <code>@section</code> blocks.</p></li>
</ul>
<p>See the <a href="https://github.com/mjfrigaard/pkgApp/tree/02-roxygen2"><code>roxygen2</code> branch</a> for more information</p>
</div>
</div>
</div>
</div>
<section id="your-package-namespace" class="level2"><h2 class="anchored" data-anchor-id="your-package-namespace">Your package <span style="font-size: 1.05em"><code>NAMESPACE</code></span>
</h2>
<p>The previous chapter illustrated how <a href="https://roxygen2.r-lib.org/"><code>roxygen2</code></a> connects the code in the <code>R/</code> folder to the documentation in the <code>man/</code> folder, but <code>roxygen2</code> tags are also used to document the dependencies in the <code>NAMESPACE</code> file:</p>
<div id="fig-roxygen2_connects" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-roxygen2_connects" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/roxygen2_connects_namespace.png" class="img-fluid figure-img" style="width:55.0%" data-ref-parent="fig-roxygen2_connects"></p>
<figcaption class="figure-caption">(a) <code>roxygen2</code></figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;1: <code>roxygen2</code> writes the <code>NAMESPACE</code> file</figcaption></figure>
</div>
<p>The <code>NAMESPACE</code> file serves two important purposes: 1) it lists which functions and objects from your app-package are exposed to other users, and 2) it controls which functions from external (i.e., add-on) packages your app-package imports.</p>
<p>Up to this point, we’ve been using <code>document()</code> to generate <code>.Rd</code> files in <code>man/</code>. Now we’ll use <code>document()</code> to make sure the <code>NAMESPACE</code> is updated with the correct imports and exports.</p>
</section><section id="pkgapp" class="level2"><h2 class="anchored" data-anchor-id="pkgapp"><span style="font-size: 1.05em"><code>pkgApp</code></span></h2>
<p>Currently <code>pkgApp</code> has documentation for the help files in <code>R/</code>. We can see this by looking in the <code>man/</code> folder:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>man/</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>├── mod_scatter_display_server.Rd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>├── mod_scatter_display_ui.Rd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>├── mod_var_input_server.Rd</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>├── mod_var_input_ui.Rd</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>├── movies_app.Rd</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>├── movies_server.Rd</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>├── movies_ui.Rd</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>└── scatter_plot.Rd</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>1 directory, 8 files</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or by checking any of the functions in <code>pkgApp</code> with <code>?function</code>.</p>
<section id="when-in-doubt" class="level3"><h3 class="anchored" data-anchor-id="when-in-doubt">When in doubt</h3>
<p>During development, you might forget which <code>devtools</code> function you ran last (I know I do). When this happens, I’ve found loading, documenting, and installing will re-oriented you to the current state of the app-package.</p>
<p><span style="font-style: italic; font-weight: bold; font-size: 1.10em"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>L</kbd></span></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ℹ Loading pkgApp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><span style="font-style: italic; font-weight: bold; font-size: 1.10em"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>D</kbd></span></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>==&gt; devtools::document(roclets = c('rd', 'collate', 'namespace'))</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>ℹ Updating pkgApp documentation</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>ℹ Loading pkgApp</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>Documentation completed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><span style="font-style: italic; font-weight: bold; font-size: 1.10em"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>B</kbd></span></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>==&gt; R CMD INSTALL --preclean --no-multiarch --with-keep.source pkgApp</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>* installing to library ‘/path/to/local/install/pkgApp-090c61fc/R-4.2/x86_64-apple-darwin17.0’</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>* installing *source* package ‘pkgApp’ ...</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>** using staged installation</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>** R</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>** byte-compile and prepare package for lazy loading</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>** help</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>*** installing help indices</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>** building package indices</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>** testing if installed package can be loaded from temporary location</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>** testing if installed package can be loaded from final location</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>** testing if installed package keeps a record of temporary installation path</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>* DONE (pkgApp)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>Restarting R session...</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>&gt; library(pkgApp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Seeing all three functions execute without any errors never gets old!</p>
</section><section id="running-movies_app" class="level3"><h3 class="anchored" data-anchor-id="running-movies_app">Running <span style="font-size: 1.10em"><code>movies_app()</code></span>
</h3>
<p>The <code>movies_app()</code> has been moved into the <code>R/</code> folder and documented, so <code>app.R</code> now only contains the following:</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># pkgs &lt;- c("shiny", "shinythemes", "stringr", "ggplot2", "rlang")</span></span>
<span><span class="co"># install.packages(pkgs, quiet = TRUE)</span></span>
<span></span>
<span><span class="co"># packages ------------------------------------</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/">shiny</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/shinythemes/">shinythemes</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rlang.r-lib.org">rlang</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># movies_app ------------------------------------</span></span>
<span><span class="fu">movies_app</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s run the standalone app function.</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">movies_app</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb7"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>Error in movies_app() : could not find function "movies_app"</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><span style="font-weight: bold; font-style: italic; font-size: 1.0em; color: #772953">Wait, what?</span></p>
<section id="what-do-you-mean-could-not-find-function" class="level4"><h4 class="anchored" data-anchor-id="what-do-you-mean-could-not-find-function">What do you mean, “<em>could not find function</em>”?</h4>
<p>Let’s recap what we know:</p>
<ol type="1">
<li><p>The <code>R/movies_app.R</code> file contains the code and documentation for <code>movies_app()</code></p></li>
<li><p>The <code>man/movies_app.Rd</code> file is being generated</p></li>
<li><p><code>app.R</code> loads the necessary packages before calling <code>movies_app()</code></p></li>
</ol>
<div class="sourceCode" id="cb8"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>movies_app() files:</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>├── R/</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>│   └── movies_app.R</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>├── man/</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>│   └── movies_app.Rd</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>└── app.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>So why can’t R find <code>"movies_app"</code> function in <code>app.R</code>?</p>
<p>The error is telling me that despite having documentation for <code>movies_app()</code> in <code>R/</code> <em>and</em> generating the corresponding <code>.Rd</code> file in <code>man/</code>, the <code>movies_app()</code> function isn’t being <strong>exported</strong> from <code>pkgApp</code>.</p>
<p>This becomes more apparent when we try to explicitly namespace <code>movies_app()</code> from <code>pkgApp</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">pkgApp</span><span class="fu">::</span><span class="fu">movies_app</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb10"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>Error: 'movies_app' is not an exported object from 'namespace:pkgApp'</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section></section></section><section id="roxygen2-exports" class="level2"><h2 class="anchored" data-anchor-id="roxygen2-exports">
<span style="font-size: 1.05em;"><code>roxygen2</code></span> exports</h2>
<p>In order to make a function in <code>R/</code> accessible to the users of your package, this function needs to exported. This process is handled with the <code>@export</code> tag from <code>roxygen2</code> (and <code><a href="https://devtools.r-lib.org/reference/document.html">devtools::document()</a></code>).</p>
<section id="what-do-i-export" class="level3"><h3 class="anchored" data-anchor-id="what-do-i-export">What do I <code>@export</code>?</h3>
<p>When determining which functions to export from your app-package, ask yourself the question,</p>
<p>“<em>When someone else calls <code><a href="https://rdrr.io/r/base/library.html">library(pkgApp)</a></code>, what functions are available?</em>”</p>
<p><a href="https://r-pkgs.org">R Packages</a> has great advice on what functions <strong>should not</strong> be exported:</p>
<blockquote class="blockquote">
<p><em>‘We believe that packages that have a wide audience should strive to do one thing and do it well. All functions in a package should be related to a single problem (or a set of closely related problems). Any functions not related to that purpose should not be exported.’</em> - <a href="https://r-pkgs.org/dependencies-in-practice.html#what-to-export">What to export, R Packages, 2ed</a></p>
</blockquote>
<p>There are multiple ways to interpret the advice above in the context of a shiny app-package:</p>
<ul>
<li><p>If we assume the ‘problem’ we’re solving with <code>pkgApp</code> is ‘create a shiny movies app’, then it might make sense to only export the standalone app function.</p></li>
<li><p>If the ‘problem’ <code>pkgApp</code> solves is ‘visualize relationships in movie review data’, then we’d want to export the <code>scatter_plot()</code> utility function.</p></li>
<li><p>If we extend the ‘problem’ statement to the broadest possible definition assume users will want access to any functions that give them the ability to customize, extend, or integrate the contents of <code>pkgApp</code> with other tools, then the module functions become prime candidates for exporting.</p></li>
</ul>
<p>My advice on exporting functions from your a app-package:</p>
<p><span style="font-size: 1.10em; font-weight: bold; color: #772953;">Aim for a balance between simplicity and utility when deciding on exported functions</span></p>
</section><section id="export" class="level3"><h3 class="anchored" data-anchor-id="export"><span style="font-size: 1.05em;"><code>@export</code></span></h3>
<p>Export a function by including the <code>@export</code> tag in the <code>roxygen2</code> comment block above the function you want to export:</p>
<ul>
<li>
<p><strong><code>@export</code></strong>: The function <code>name</code> is not required. Read more <a href="https://r-pkgs.org/dependencies-in-practice.html#exports">here</a></p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' @export name (*optional)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</li>
</ul>
<section id="exporting-from-utils.r" class="level4"><h4 class="anchored" data-anchor-id="exporting-from-utils.r">Exporting from <span style="font-size: 1.05em;"><code>utils.R</code></span>
</h4>
<p>Shiny apps often contain helper functions (i.e., non-shiny code) in <code>helper.R</code> or <code>utils.R</code> files. This isn’t a bad practice (in fact, it’s encouraged in <a href="https://mastering-shiny.org/scaling-functions.html#file-organisation">Mastering Shiny</a>). However, as we transition to an app-package, <code>scatter_plot()</code> no longer belongs in <code>R/utils.R</code> if we’re using the advice in <a href="https://r-pkgs.org/dependencies-in-practice.html#what-to-export">R Packages</a>,</p>
<blockquote class="blockquote">
<p><em>‘most of our packages have a <code>utils.R</code> file (<a href="https://r-pkgs.org/code.html#sec-code-organising">Section 6.1</a>) that contains small utility functions that are useful internally, but aren’t part of the core purpose of those packages. We don’t export such functions.’</em></p>
</blockquote>
<p>Going forward, I’ve renamed <code>R/utils.R</code> to <code>R/scatter_plot.R</code> so it aligns with the naming conventions in other R packages.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
More info on <code>R/utils.R</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p>For a deep dive on <code>R/utils.R</code> files in R packages, I recommend reading <a href="https://rud.is/b/2018/04/08/dissecting-r-package-utility-belts/">Dissecting R Package “Utility Belts”</a></p>
</div>
</div>
</div>
</div>
<p>I’ll add the <code>@export</code> tag to <code>R/scatter_plot.R</code></p>
<ul>
<li>
<p>I’ve included the name of the function for clarity (but it’s not required)</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' @export scatter_plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Low-key <code>@export</code>s with <code>@keywords internal</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p>If you’d like function to be exported, but not listed in the package index, you can combine <code>@export</code> with <code>@keywords internal</code>. These should be used in combination,</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' @export</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @keywords internal</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For example, adding <code>@export</code> and <code>@keywords internal</code> to <code>R/scatter_plot.R</code> will make the function accessible to users:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/keywords_internal_namespace.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
<p>And include the help file:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/keywords_internal_rd.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
<p>However, if a user were to click on the <strong>Index</strong> for <code>pkgApp</code> (at the bottom of the help file)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/pkg_index.png" class="img-fluid figure-img" style="width:65.0%"></p>
</figure>
</div>
<p><code>scatter_plot</code> is not listed:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/pkgApp_index.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section></section></section><section id="roxygen2-imports" class="level2"><h2 class="anchored" data-anchor-id="roxygen2-imports">
<span style="font-size: 1.05em;"><code>roxygen2</code></span> imports</h2>
<p>Now that we’ve covered which functions we want accessible to users of <code>pkgApp</code>, we need to address the functions <code>pkgApp</code> imports. If we continue using <code>scatter_plot()</code> as an example, we see it contains functions from two add-on packages (<code>ggplot2</code> and <code>rlang</code>):</p>
<div class="cell">
<details open=""><summary>show/hide scatter_plot()</summary><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">scatter_plot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">x_var</span>, <span class="va">y_var</span>, <span class="va">col_var</span>, <span class="va">alpha_var</span>, <span class="va">size_var</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df</span>,</span>
<span>      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">x_var</span><span class="op">]</span><span class="op">]</span>,</span>
<span>          y <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">y_var</span><span class="op">]</span><span class="op">]</span>,</span>
<span>          color <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">col_var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="va">alpha_var</span>, size <span class="op">=</span> <span class="va">size_var</span><span class="op">)</span></span>
<span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Two components help to ensure both <code>ggplot2</code> and <code>rlang</code> functions become part of <code>pkgApp</code>:</p>
<ol type="1">
<li><p>Call add-on package functions using the <code>package::function()</code> syntax, and</p></li>
<li><p>Include them in the <code>NAMESPACE</code> by using either <code>@importFrom</code> or <code>@import</code></p></li>
</ol>
<p>Explicit namespacing let’s users know which functions are from your package and which functions are from external packages. Listing external functions and packages ensures their loaded when users install and load your package.</p>
<section id="importfrom-or-import" class="level3"><h3 class="anchored" data-anchor-id="importfrom-or-import">
<span style="font-size: 1.05em;"><code>@importFrom</code></span> or <span style="font-size: 1.05em;"><code>@import</code></span>
</h3>
<p>I’ve included both tags below, but you should use <code>@importFrom</code> <a href="https://r-pkgs.org/dependencies-in-practice.html#sec-dependencies-in-imports-r-code">far more</a> than <code>@import</code> (with the exception being <code>@import shiny</code>). Read more <a href="https://mastering-shiny.org/scaling-packaging.html#r-cmd-check">here</a>:</p>
<ul>
<li>
<p><strong><code>@importFrom</code></strong>: import a function from an add-on package into your package <code>NAMESPACE</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' @importFrom package function</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</li>
<li>
<p><strong><code>@import</code></strong>: import all functions from an add-on package into your <code>NAMESPACE</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' @import package</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</li>
</ul>
<p>Below is an example of <code>@importFrom</code> in <code>R/scatter_plot.R</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' </span></span>
<span><span class="co">#' @importFrom ggplot2 ggplot aes geom_point</span></span>
<span><span class="co">#' @importFrom rlang .data</span></span>
<span><span class="co">#' </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To record these changes in the <code>NAMESPACE</code>, I’ll <code><a href="https://rdrr.io/r/base/load.html">load()</a></code> and <code>document()</code>:</p>
<div style="font-style: italic; font-weight: bold; font-size: 1.10em">
<p><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>L</kbd></p>
</div>
<div class="sourceCode" id="cb18"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>ℹ Loading pkgApp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div style="font-style: italic; font-weight: bold; font-size: 1.10em">
<p><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>D</kbd></p>
</div>
<p>Note that the contents of <code>man/utils.Rd</code> have now been written to <code>man/scatter_plot.Rd</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>==&gt; devtools::document(roclets = c('rd', 'collate', 'namespace'))</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>ℹ Updating pkgApp documentation</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>ℹ Loading pkgApp</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>Writing NAMESPACE</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>Writing scatter_plot.Rd</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>Writing NAMESPACE</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>Documentation completed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You may have noticed the <code>document()</code> resulted in the <code>NAMESPACE</code> being written twice (one for imports, one for exports).</p>
<div style="font-style: italic; font-weight: bold; font-size: 1.10em">
<p><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>B</kbd></p>
</div>
<p>After installing <code>pkgApp</code>, I can use <code>pkgApp::</code> in the <strong>Console</strong> and see the <code>scatter_plot()</code> function help file in the tab completion:</p>
<div id="fig-exported_scatter_plot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-exported_scatter_plot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/exported_scatter_plot.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-exported_scatter_plot"></p>
<figcaption class="figure-caption">(a) <code>pkgApp::scatter_plot()</code></figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;2: Tab completion for <code>scatter_plot()</code></figcaption></figure>
</div>
<p>Exporting <code>scatter_plot()</code> also means users can run the examples in the <code>scatter_plot()</code> help file,</p>
<div id="fig-scatter_plot_examples" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-scatter_plot_examples" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/scatter_plot_examples.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-scatter_plot_examples"></p>
<figcaption class="figure-caption">(a) <code>scatter_plot()</code> examples</figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;3: Running examples in <code>?scatter_plot</code></figcaption></figure>
</div>
</section></section><section id="namespace-directives" class="level2"><h2 class="anchored" data-anchor-id="namespace-directives">
<span style="font-size: 1.05em;"><code>NAMESPACE</code></span> directives</h2>
<p>After adding the <code>@export</code> and <code>@importFrom</code> tags in the <code>R/scatter_plot.R</code> file and documenting the package, <code>roxygen2</code> writes the exports and imports in the <code>NAMESPACE</code> file.</p>
<p>The <code>NAMESPACE</code> file contains <a href="https://r-pkgs.org/dependencies-mindset-background.html#sec-dependencies-NAMESPACE-file">directives</a>, which are derived from <code>roxygen2</code> tags:</p>
<ul>
<li><p>The <code>@export scatter_plot</code> tag results in the <code>export(scatter_plot)</code> directive</p></li>
<li><p>The <code>@importFrom</code> <code>package</code> <code>function</code> tag creates the <code>importFrom(package, function)</code> directives</p></li>
</ul>
<div id="fig-import_export_namespace" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-import_export_namespace" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/import_export_namespace.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-import_export_namespace"></p>
<figcaption class="figure-caption">(a) updated <code>NAMESPACE</code> file</figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;4: Updated <code>NAMESPACE</code> directives</figcaption></figure>
</div>
<p>The <code>NAMESPACE</code> file ensures that the package environment is isolated and controls which functions from add-on packages can be used by your package. It also helps avoid naming conflicts between different packages.</p>
</section><section id="description-imports" class="level2"><h2 class="anchored" data-anchor-id="description-imports">
<span style="font-size: 1.05em;"><code>DESCRIPTION</code></span> <span style="font-weight: bold; font-size: 1.05em;"><code>Imports:</code></span>
</h2>
<p>So far we haven’t run <code><a href="https://devtools.r-lib.org/reference/check.html">devtools::check()</a></code> on <code>pkgApp</code>, which <a href="https://mastering-shiny.org/scaling-packaging.html#r-cmd-check">is fine in this stage of development</a>. However, <code>check()</code> is helpful here in identifying a common point of confusion when managing dependencies, so I’ve included a specific <code>ERROR</code> you’d find from running <code>check()</code> on <code>pkgApp</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>── R CMD check results ────────────────── pkgApp 0.0.0.9000 ────</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>Duration: 7.7s</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>❯ checking package dependencies ... ERROR</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  Namespace dependencies missing from DESCRIPTION Imports/Depends entries:</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    'ggplot2', 'rlang'</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  See section ‘The DESCRIPTION file’ in the ‘Writing R Extensions’</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  manual.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This particular error brings us (intentionally) to an important point about dependency management in R packages:</p>
<ul>
<li><p>The <code>NAMESPACE</code> file manages <strong>function-level access</strong>, importing functions from other packages to be used in your package, and exporting functions from your package for others to use</p></li>
<li><p>The <code>DESCRIPTION</code> file handles <strong>package-level dependencies</strong>, specifying which packages that your package uses</p></li>
</ul>
<div id="fig-roxygen2_no_connect_description" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-roxygen2_no_connect_description" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/roxygen2_no_connect_description.png" class="img-fluid figure-img" style="width:75.0%" data-ref-parent="fig-roxygen2_no_connect_description"></p>
<figcaption class="figure-caption">(a) <code>roxygen2</code>, <code>NAMESPACE</code>, &amp; <code>DESCRIPTION</code></figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;5: <code>roxygen2</code> does not connect the imports to the <code>DESCRIPTION</code></figcaption></figure>
</div>
<p>The differences between the <code>NAMESPACE</code> and <code>DESCRIPTION</code> can be a <a href="https://r-pkgs.org/dependencies-in-practice.html#confusion-about-imports">common point of confusion</a> when managing dependencies, so try to remember that whenever you update the <code>NAMESPACE</code> directives with <code>@import</code> or <code>@importFrom</code>, it’s important to sync this with the <code>Imports:</code> field in the <code>DESCRIPTION</code> file:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>Package: pkgApp</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>Version: 0.0.0.9000</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>Type: Package</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>Title: movies app</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>Description: A movies data shiny application.</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>Author: John Smith [aut, cre]</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>Maintainer: John Smith &lt;John.Smith@email.io&gt;</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>License: GPL-3</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>DisplayMode: Showcase</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>RoxygenNote: 7.2.3</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>Encoding: UTF-8</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>Roxygen: list(markdown = TRUE)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>Imports:</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  ggplot2,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  rlang</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can also add packages to the <code>DESCRIPTION</code> file with <code><a href="https://usethis.r-lib.org/reference/use_package.html">usethis::use_package()</a></code>.</p>
</section><section id="namespace-in-pkgapp" class="level2"><h2 class="anchored" data-anchor-id="namespace-in-pkgapp">
<span style="font-size: 1.05em;"><code>NAMESPACE</code></span> in <span style="font-size: 1.05em;"><code>pkgApp</code></span>
</h2>
<p>I’ve added <code>@export</code> to each function in <code>pkgApp</code> and used explicit namespacing (<code>::</code>) with <code>@importFrom</code> to import the functions from the add-on packages.</p>
<ul>
<li>
<p><span style="font-size: 1.10em"><code>R/movies_app.R</code></span></p>
<div class="cell">
<details><summary>show/hide R/movies_app.R roxygen2</summary><div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># movies_app() is the standalone app function, so we'll export </span></span>
<span><span class="co"># this function and @import shiny here:</span></span>
<span><span class="co"># ==============================================================</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @import shiny</span></span>
<span><span class="co">#'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</li>
<li>
<p><span style="font-size: 1.10em"><code>R/movies_ui.R</code></span></p>
<div class="cell">
<details><summary>show/hide R/movies_ui.R &amp; R/movies_server.R roxygen2</summary><div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># movies_ui() and movies_server() both use only shiny functions, </span></span>
<span><span class="co"># so they don't need any @import or @importFrom tags (but both </span></span>
<span><span class="co"># are exported):</span></span>
<span><span class="co"># ==============================================================</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</li>
<li>
<p><span style="font-size: 1.10em"><code>R/mod_var_input.R</code></span></p>
<div class="cell">
<details><summary>show/hide R/mod_var_input.R roxygen2</summary><div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># mod_var_input_ui() and mod_var_input_server() only use shiny </span></span>
<span><span class="co"># functions, so no need for @import or @importFrom tags (however,</span></span>
<span><span class="co"># this module is exported):</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># ==============================================================</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</li>
<li>
<p><span style="font-size: 1.10em"><code>R/mod_scatter_display.R</code></span></p>
<div class="cell">
<details><summary>show/hide R/mod_scatter_display.R roxygen2</summary><div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># mod_scatter_display_ui() also only contains shiny functions </span></span>
<span><span class="co"># (no @import or @importFrom) so this function only gets an </span></span>
<span><span class="co"># @export tag:</span></span>
<span><span class="co"># ==============================================================</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' </span></span>
<span><span class="co"># mod_scatter_display_server() uses functions from tools, </span></span>
<span><span class="co"># ggplot2 and stringr (all are imported with @importFrom tags). </span></span>
<span><span class="co"># This function is also exported:</span></span>
<span><span class="co"># ==============================================================</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @importFrom tools toTitleCase</span></span>
<span><span class="co">#' @importFrom stringr str_replace_all</span></span>
<span><span class="co">#' @importFrom ggplot2 labs theme_minimal theme</span></span>
<span><span class="co">#' </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</li>
</ul>
<p>The updated <code>DESCRIPTION</code> file is below:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>Package: pkgApp</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>Version: 0.0.0.9000</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>Type: Package</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>Title: movies app</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>Description: A movies data shiny application.</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>Author: John Smith [aut, cre]</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>Maintainer: John Smith &lt;John.Smith@email.io&gt;</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>License: GPL-3</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>DisplayMode: Showcase</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>RoxygenNote: 7.2.3</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>Encoding: UTF-8</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>Roxygen: list(markdown = TRUE)</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>Imports:</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  shiny,</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  ggplot2,</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  rlang,</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>  stringr,</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  tools</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>&lt;remember to keep an empty final line&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><span style="font-style: italic; font-weight: bold; font-size: 1.10em"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>L</kbd>, <kbd>D</kbd>, <kbd>B</kbd></span></p>
<p>After <code>pkgApp</code> installs, I’ll check the namespace by using <code>pkgApp::</code> in the <strong>Console</strong>:</p>
<div id="fig-pkgApp_namespacing_funs" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-pkgApp_namespacing_funs" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/pkgApp_namespacing_funs.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-pkgApp_namespacing_funs"></p>
<figcaption class="figure-caption">(a) <code>pkgApp::</code> namespace</figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;6: Exported functions from <code>pkgApp</code></figcaption></figure>
</div>
</section><section id="app.r" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="app.r"><span style="font-size: 1.05em;"><code>app.R</code></span></h2>
<p>As a final step, we want to remove any calls to <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> in <code>pkgApp</code> (these packages are now handled in the <code>NAMESPACE</code> and <code>DESCRIPTION</code> files).</p>
<p><code>app.R</code> should now contain a single call to <code><a href="https://rdrr.io/r/base/library.html">library(pkgApp)</a></code> and then the <code>movies_app()</code> function:</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># pkgs &lt;- c("shiny", "shinythemes", "stringr", "ggplot2", "rlang")</span></span>
<span><span class="co"># install.packages(pkgs, quiet = TRUE)</span></span>
<span></span>
<span><span class="co"># load pacakge ----------------------------------</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">pkgApp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># movies_app ------------------------------------</span></span>
<span><span class="fu">movies_app</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="fig-dependencies_movies_app" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-dependencies_movies_app" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/dependencies_movies_app.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-dependencies_movies_app"></p>
<figcaption class="figure-caption">(a) <code>pkgApp::movies_app()</code></figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;7: Exported functions from <code>pkgApp</code></figcaption></figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/new_branch_ico.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption class="figure-caption">New Git Branch</figcaption></figure>
</div>
<p>The code for the next section is in the [<a href="https://github.com/mjfrigaard/pkgApp/tree/03_dependencies"><code>03_dependencies</code></a>] branch of the [<a href="https://github.com/mjfrigaard/pkgApp"><code>pkgApp</code></a>] repo.</p>
</div></div></section><section id="recap" class="level2"><h2 class="anchored" data-anchor-id="recap">Recap</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Dependencies recap
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p>This chapter covered:</p>
<ul>
<li>
<p><strong><code>NAMESPACE</code></strong>: lists the exported functions and the functions your package imports from add-on packages.</p>
<ul>
<li><p><strong><code>NAMESPACE</code> exports</strong>: Aim for a balance between simplicity and utility when deciding which functions to export ((i.e., what functions should be available to users who install your package)</p></li>
<li><p><strong><code>NAMESPACE</code> imports</strong>: The <code>@import</code>/<code>@importFrom</code> tags make the functions from add-on packages available to your package. Use <code>@importFrom</code> for most add-on package functions (the only exception being <code>shiny</code>, which you’d want to use <code>@import</code>)</p></li>
</ul>
</li>
<li><p><strong><code>DESCRIPTION</code> <code>Imports:</code></strong>: use this field to list the packages that your app-package uses. Functions from these packages will be available for your package, but not for the user unless they use the <code>::</code> operator or load the package themselves with <code><a href="https://rdrr.io/r/base/library.html">library()</a></code>.</p></li>
</ul>
<p>The <code>Imports:</code> field in the <code>DESCRIPTION</code> handles package-level dependencies (and it is managed manually or with <code><a href="https://usethis.r-lib.org/reference/use_package.html">usethis::use_package()</a></code>), while the <code>NAMESPACE</code> handles function-level access (with <code>@export</code> and <code>@import</code> and <code>@importFrom</code>).</p>
</div>
</div>
</div>
</div>
<p>In the next section, we’ll cover how the ensure the <code>movies.RData</code> becomes part of <code>pkgApp</code></p>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./roxygen2.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span style="font-size: 1.05em;"><code>roxygen2</code></span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./data.html" class="pagination-link">
        <span class="nav-page-text">Data files</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>