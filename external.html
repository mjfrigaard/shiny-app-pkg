<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Getting your app into an R package">
<title>Shiny App-Packages - External files</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./tests.html" rel="next">
<link href="./data.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
</head>
<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./app_packages.html">App-packages</a></li><li class="breadcrumb-item"><a href="./external.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">External files</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Shiny App-Packages</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/mjfrigaard/shinyap" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Welcome!</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./whole_game.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Whole app game</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./shiny.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Shiny</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./development.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Development</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./app_packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">App-packages</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./document.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Documentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dependencies.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Dependencies</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./launch.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Launch</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./external.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">External files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tests.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Tests</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./frameworks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Frameworks</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./golem.html" class="sidebar-item-text sidebar-link"><span class="chapter-title"><code>golem</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./leprechaun.html" class="sidebar-item-text sidebar-link"><span class="chapter-title"><code>leprechaun</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rhino.html" class="sidebar-item-text sidebar-link"><span class="chapter-title"><code>rhino</code></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./special_topics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Special topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./debugging.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Debugging</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./css.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">CSS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./js.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">JavaScript</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code_tools.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Code tools</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glossary.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Glossary of terms</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./github.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">GitHub</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./create.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Appendix: Creating packages in Posit Workbench</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul>
<li><a href="#this-is-your-app-package" id="toc-this-is-your-app-package" class="nav-link active" data-scroll-target="#this-is-your-app-package">This is your app-package</a></li>
  <li>
<a href="#this-is-your-app-package-installed" id="toc-this-is-your-app-package-installed" class="nav-link" data-scroll-target="#this-is-your-app-package-installed">This is your app-package … <em>installed</em></a>
  <ul>
<li><a href="#using-system.file" id="toc-using-system.file" class="nav-link" data-scroll-target="#using-system.file">Using <span style="font-size: 0.95em;"><code>system.file()</code></span></a></li>
  </ul>
</li>
  <li><a href="#addresourcepath" id="toc-addresourcepath" class="nav-link" data-scroll-target="#addresourcepath"><span style="font-size: 0.95em;"><code>addResourcePath()</code></span></a></li>
  <li>
<a href="#other-uses-for-inst" id="toc-other-uses-for-inst" class="nav-link" data-scroll-target="#other-uses-for-inst">Other uses for <span style="font-size: 1.05em;"><code>inst/</code></span></a>
  <ul>
<li><a href="#alternate-external-files" id="toc-alternate-external-files" class="nav-link" data-scroll-target="#alternate-external-files">Alternate external files</a></li>
  <li><a href="#development-versions" id="toc-development-versions" class="nav-link" data-scroll-target="#development-versions">Development versions</a></li>
  </ul>
</li>
  <li><a href="#recap" id="toc-recap" class="nav-link" data-scroll-target="#recap">Recap</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/mjfrigaard/shinyap/edit/main/external.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/mjfrigaard/shinyap/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span class="chapter-title">External files</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="font-weight: bold; font-size: 1.20em;">Caution!</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p>This section is currently being revised. Thank you for your patience.</p>
</div>
</div>
</div>
</div>
<p>In the previous chapter we covered including external datasets in the <code>inst/extdata/</code> folder, and accessing these files with <code><a href="https://rdrr.io/r/base/system.file.html">system.file()</a></code>. As you’ll see, the <code>inst/</code> folder plays a special role in R packages, and we can leverage this role when designing the structure of our app-package.</p>
<p>In this chapter we’ll cover how to add external resources (i.e., the files stored and previously served from the <code>www/</code> folder) to your shiny app-packages.</p>
<section id="this-is-your-app-package" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="this-is-your-app-package">This is your app-package</h2>
<p>The current files and folders of <code>pkgApp</code> are displayed below:</p>

<div class="no-row-height column-margin column-container"><div class="">
<div style="font-weight: bold; font-size: 1.00em; color: #6F1AB6;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/new_branch_ico.png" class="img-fluid figure-img" style="width:75.0%"></p>
<figcaption class="figure-caption">Git Branch</figcaption></figure>
</div>
<p><a href="https://github.com/mjfrigaard/pkgApp"><code>pkgApp</code></a> repo’s <a href="https://github.com/mjfrigaard/pkgApp/tree/06_data"><code>06_data</code></a> branch</p>
</div>
</div></div><div id="fig-07_inst_files_pane" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-07_inst_files_pane" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/07_inst_files_pane.png" class="img-fluid figure-img" style="width:80.0%" data-ref-parent="fig-07_inst_files_pane"></p>
<figcaption class="figure-caption">(a) The ‘source’ files for <code>pkgApp</code></figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;1: Source files for the <code>pkgApp</code> app-package</figcaption></figure>
</div>
<p>If we’re using the Posit Workbench IDE, the <strong>Files</strong> pane is how we typically interact with the our app-package. For example, when we run <code>movies_app()</code>, we see the following:</p>
<div class="column-body-outset-right">
<div id="fig-08_inst_movies_app_data_no_img" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-08_inst_movies_app_data_no_img" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/08_inst_movies_app_data_no_img.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-08_inst_movies_app_data_no_img"></p>
<figcaption class="figure-caption">(a) <code>movies_app()</code> without logo</figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;2: <code>www</code> not accessible in <code>pkgApp</code></figcaption></figure>
</div>
</div>
<p>The <code>shiny.png</code> logo in <code>www/</code> is not being loaded into the UI when the application is launched. Before we dive into how to add the contents of <code>www/</code> into <code>pkgApp</code>, we’ll take a step back and investigate what happens when a package is installed.</p>
</section><section id="this-is-your-app-package-installed" class="level2"><h2 class="anchored" data-anchor-id="this-is-your-app-package-installed">This is your app-package … <em>installed</em>
</h2>
<p>We’ve been running <code>load_all()</code>, <code>document()</code>, and <code>install()</code> on <code>pkgApp</code>, but we haven’t looked at the contents of the installed package. Reviewing the installed package will help us understand what the <code><a href="https://rdrr.io/r/base/system.file.html">system.file()</a></code> function is doing, and how we can use the <code>inst/</code> folder to include external resources to our app-package.</p>
<p>When we run <code><a href="https://devtools.r-lib.org/reference/install.html">devtools::install()</a></code>, the output tells us where the package is being installed:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>==&gt; R CMD INSTALL --preclean --no-multiarch --with-keep.source pkgApp</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>* installing to library ‘/path/to/install/Library/R/x86_64/4.2/library’</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If we add the <code>pkgApp/</code> directory to the end of the path above, we can view the contents of the installed package (I’m using the <code>tree</code> command in the Terminal, but the <code><a href="https://fs.r-lib.org/reference/dir_tree.html">fs::dir_tree()</a></code> function will also print a folder tree):<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/path/to/install/Library/R/x86_64/4.2/library/pkgApp/</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> DESCRIPTION</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> INDEX</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> Meta/</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── Rd.rds</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── data.rds</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── features.rds</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── hsearch.rds</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── links.rds</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── nsInfo.rds</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   └── package.rds</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> NAMESPACE</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> R/</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── pkgApp</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── pkgApp.rdb</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   └── pkgApp.rdx</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> data/</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── Rdata.rdb</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── Rdata.rds</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   └── Rdata.rdx</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> extdata/</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   └── movies.fst</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> help/</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── AnIndex</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── aliases.rds</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── paths.rds</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   ├── pkgApp.rdb</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   └── pkgApp.rdx</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>  <span class="ex">└──</span> html/</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>      <span class="ex">├──</span> 00Index.html</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>      <span class="ex">└──</span> R.css</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span> directories, 24 files</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The installed version of <code>pkgApp</code> has many of the same files as the ‘source’ version we’ve been working on (i.e., the <code>NAMESPACE</code> and <code>DESCRIPTION</code>). It also might surprise you to see that many of the source package files aren’t included in the installed version (<code>.R</code>, <code>.Rd</code> files. etc.).</p>
<p>Hopefully viewing this folder structure helps demystify what happens when a package is installed.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> Below is the official documentation on what happens to the <code>inst/</code> folder (and it’s subfolders) when a package is installed:<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<blockquote class="blockquote">
<p>“<em>The contents of the <code>inst/</code> subdirectory will be copied recursively to the installation directory. Subdirectories of <code>inst/</code> should not interfere with those used by R (currently, <code>R/</code>, <code>data/</code>, <code>demo/</code>, <code>exec/</code>, <code>libs/</code>, <code>man/</code>, <code>help/</code>, <code>html/</code> and <code>Meta/</code>, and earlier versions used <code>latex/</code>, <code>R-ex/</code>).</em>” - <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Package-subdirectories">Writing R extensions, Package subdirectories</a></p>
</blockquote>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="font-weight: bold; font-size: 1.20em;">Uses of <code>inst/</code> in other packages</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="{style='font-size:">
<p>You can explore the structure of other installed packages to see how they work ‘under the hood’ to gain insight into how they use the <code>inst/</code> folder.</p>
<ul>
<li>
<p>For example, the <code>inst/extdata/</code> folder in the <a href="https://readr.tidyverse.org/"><code>readr</code> package</a> holds a variety of datasets:</p>
<pre><code>/path/to/install/Library/R/x86_64/4.2/library/readr/

extdata/
  ├── challenge.csv
  ├── chickens.csv
  ├── epa78.txt
  ├── example.log
  ├── fwf-sample.txt
  ├── massey-rating.txt
  ├── mini-gapminder-africa.csv
  ├── mini-gapminder-americas.csv
  ├── mini-gapminder-asia.csv
  ├── mini-gapminder-europe.csv
  ├── mini-gapminder-oceania.csv
  ├── mtcars.csv
  ├── mtcars.csv.bz2
  ├── mtcars.csv.zip
  └── whitespace-sample.txt

1 directory, 15 files</code></pre>
</li>
<li>
<p>These files are used in <a href="https://github.com/tidyverse/readr/blob/5ac729aa9a70fef297a634d2332ff8ff1af874fb/R/example.R"><code>readr::readr_example()</code></a>):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' Get path to readr example</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' readr comes bundled with a number of sample files in its `inst/extdata`</span></span>
<span><span class="co">#' directory. This function make them easy to access</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @param file Name of file. If `NULL`, the example files will be listed.</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' @examples</span></span>
<span><span class="co">#' readr_example()</span></span>
<span><span class="co">#' readr_example('challenge.csv')</span></span>
<span><span class="va">readr_example</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">file</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'extdata'</span>, package <span class="op">=</span> <span class="st">'readr'</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'extdata'</span>, <span class="va">file</span>, package <span class="op">=</span> <span class="st">'readr'</span>, mustWork <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</li>
</ul>
<p>em; color: #696969;’}</p>
<p>Your text</p>
</div>
</div>
</div>
</div>
<section id="using-system.file" class="level3"><h3 class="anchored" data-anchor-id="using-system.file">Using <span style="font-size: 0.95em;"><code>system.file()</code></span>
</h3>
<p><code><a href="https://rdrr.io/r/base/system.file.html">system.file()</a></code> gives us access to the package files <em>on installation</em> (i.e., the files we see at the path above). In the previous chapter, we used <code><a href="https://rdrr.io/r/base/system.file.html">system.file()</a></code> to access the <code>movies.fst</code> file in <code>inst/extdata/</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span>  </span>
<span>  <span class="fu">fst</span><span class="fu">::</span><span class="fu"><a href="http://www.fstpackage.org/reference/write_fst.html">read_fst</a></span><span class="op">(</span>path <span class="op">=</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata/"</span>, <span class="st">"movies.fst"</span>, package <span class="op">=</span> <span class="st">"pkgApp"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details><summary>show/hide glimpse() of movies.fst</summary><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">fstcore</span> package v0.9.14</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">OpenMP</span> was not detected, using single threaded mode<span class="kw">)</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Rows:</span> 651</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Columns:</span> 34</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> title            <span class="op">&lt;</span>chr<span class="op">&gt;</span> <span class="st">"Filly Brown"</span>, <span class="st">"The Dish"</span>, <span class="st">"Waiting for…</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="st">$ title_type       &lt;fct&gt; Feature Film, Feature Film, Feature Fil…</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="st">$ genre            &lt;fct&gt; Drama, Drama, Comedy, Drama, Horror, Do…</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="st">$ runtime          &lt;dbl&gt; 80, 101, 84, 139, 90, 78, 142, 93, 88, …</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="st">$ mpaa_rating      &lt;fct&gt; R, PG-13, R, PG, R, Unrated, PG-13, R, …</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="st">$ studio           &lt;fct&gt; Indomina Media Inc., Warner Bros. Pictu…</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="st">$ thtr_rel_date    &lt;dttm&gt; 2013-04-18 21:00:00, 2001-03-13 21:00:…</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="st">$ thtr_rel_year    &lt;dbl&gt; 2013, 2001, 1996, 1993, 2004, 2009, 198…</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="st">$ thtr_rel_month   &lt;dbl&gt; 4, 3, 8, 10, 9, 1, 1, 11, 9, 3, 6, 12, …</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="st">$ thtr_rel_day     &lt;dbl&gt; 19, 14, 21, 1, 10, 15, 1, 8, 7, 2, 19, …</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="st">$ dvd_rel_date     &lt;dttm&gt; 2013-07-29 21:00:00, 2001-08-27 21:00:…</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="st">$ dvd_rel_year     &lt;dbl&gt; 2013, 2001, 2001, 2001, 2005, 2010, 200…</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="st">$ dvd_rel_month    &lt;dbl&gt; 7, 8, 8, 11, 4, 4, 2, 3, 1, 8, 5, 9, 7,…</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="st">$ dvd_rel_day      &lt;dbl&gt; 30, 28, 21, 6, 19, 20, 18, 2, 21, 14, 1…</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="st">$ imdb_rating      &lt;dbl&gt; 5.5, 7.3, 7.6, 7.2, 5.1, 7.8, 7.2, 5.5,…</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="st">$ imdb_num_votes   &lt;int&gt; 899, 12285, 22381, 35096, 2386, 333, 50…</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="st">$ critics_rating   &lt;fct&gt; Rotten, Certified Fresh, Certified Fres…</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="st">$ critics_score    &lt;dbl&gt; 45, 96, 91, 80, 33, 91, 57, 17, 90, 83,…</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="st">$ audience_rating  &lt;fct&gt; Upright, Upright, Upright, Upright, Spi…</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="st">$ audience_score   &lt;dbl&gt; 73, 81, 91, 76, 27, 86, 76, 47, 89, 66,…</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="st">$ best_pic_nom     &lt;fct&gt; no, no, no, no, no, no, no, no, no, no,…</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="st">$ best_pic_win     &lt;fct&gt; no, no, no, no, no, no, no, no, no, no,…</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="st">$ best_actor_win   &lt;fct&gt; no, no, no, yes, no, no, no, yes, no, n…</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="st">$ best_actress_win &lt;fct&gt; no, no, no, no, no, no, no, no, no, no,…</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="st">$ best_dir_win     &lt;fct&gt; no, no, no, yes, no, no, no, no, no, no…</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="st">$ top200_box       &lt;fct&gt; no, no, no, no, no, no, no, no, no, no,…</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a><span class="st">$ director         &lt;chr&gt; "</span>Michael D. Olmos<span class="st">", "</span>Rob Sitch<span class="st">", "</span>Chris…</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> actor1           <span class="op">&lt;</span>chr<span class="op">&gt;</span> <span class="st">"Gina Rodriguez"</span>, <span class="st">"Sam Neill"</span>, <span class="st">"Christo…</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a><span class="st">$ actor2           &lt;chr&gt; "</span>Jenni Rivera<span class="st">", "</span>Kevin Harrington<span class="st">", "</span>Ca…</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> actor3           <span class="op">&lt;</span>chr<span class="op">&gt;</span> <span class="st">"Lou Diamond Phillips"</span>, <span class="st">"Patrick Warbur…</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a><span class="st">$ actor4           &lt;chr&gt; "</span>Emilio Rivera<span class="st">", "</span>Tom Long<span class="st">", "</span>Eugene Le…</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> actor5           <span class="op">&lt;</span>chr<span class="op">&gt;</span> <span class="st">"Joseph Julian Soria"</span>, <span class="st">"Genevieve Mooy"</span>…</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> imdb_url         <span class="op">&lt;</span>chr<span class="op">&gt;</span> <span class="st">"http://www.imdb.com/title/tt1869425/"</span>,…</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rt_url           <span class="op">&lt;</span>chr<span class="op">&gt;</span> <span class="st">"//www.rottentomatoes.com/m/filly_brown…</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>To include the contents of <code>www/</code> in our app-package, we need to use <code>isnt/</code> folder, <code><a href="https://rdrr.io/r/base/system.file.html">system.file()</a></code>, and the <code><a href="https://rdrr.io/pkg/shiny/man/resourcePaths.html">shiny::addResourcePath()</a></code> function.</p>
</section></section><section id="addresourcepath" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="addresourcepath"><span style="font-size: 0.95em;"><code>addResourcePath()</code></span></h2>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/new_branch_ico.png" class="img-fluid figure-img" style="width:75.0%"></p>
<figcaption class="figure-caption">Git Branch</figcaption></figure>
</div>
<p>This section’s code is in the <a href="https://github.com/mjfrigaard/pkgApp"><code>pkgApp</code></a> repo’s <a href="https://github.com/mjfrigaard/pkgApp/tree/07_inst-www"><code>07_inst-www</code></a> branch</p>
</div></div><p>The <code>addResourcePath()</code> function will add a “<em>directory of static resources to Shiny’s web server</em>.” In <code>pkgApp</code>, want to add the <code>www</code> directory that includes the <code>shiny.png</code> file (currently in our root (<code>"."</code>) folder).<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<p>If we want to continue keeping external resources in the <code>www/</code> folder, we can move <code>www/</code> and it’s contents into <code>inst/</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">inst/</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> extdata/</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="ex">│</span>   └── movies.fst</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="ex">└──</span> www/</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>      <span class="ex">└──</span> shiny.png</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span> directories, 2 files</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In <code>R/movies_ui.R</code> function, we’ll include the <code>addResourcePath()</code> at the top of the <code>tagList()</code> and reference the image in <code>img()</code> using only the subfolder in the path:</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">movies_ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">addResourcePath</span><span class="op">(</span><span class="st">'www'</span>, <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'www'</span>, package <span class="op">=</span> <span class="st">'pkgApp'</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu">tagList</span><span class="op">(</span></span>
<span>    <span class="fu">fluidPage</span><span class="op">(</span></span>
<span>      theme <span class="op">=</span> <span class="fu">shinythemes</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shinythemes/man/shinytheme.html">shinytheme</a></span><span class="op">(</span><span class="st">"spacelab"</span><span class="op">)</span>,</span>
<span>      <span class="fu">titlePanel</span><span class="op">(</span></span>
<span>        <span class="fu">div</span><span class="op">(</span></span>
<span>          <span class="fu">img</span><span class="op">(</span></span>
<span>            src <span class="op">=</span> <span class="st">"www/shiny.png"</span>,</span>
<span>            height <span class="op">=</span> <span class="fl">60</span>,</span>
<span>            width <span class="op">=</span> <span class="fl">55</span>,</span>
<span>            style <span class="op">=</span> <span class="st">"margin:10px 10px"</span></span>
<span>            <span class="op">)</span>, </span>
<span>         <span class="st">"Movie Reviews"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu">sidebarLayout</span><span class="op">(</span></span>
<span>        <span class="fu">sidebarPanel</span><span class="op">(</span></span>
<span>          <span class="fu">mod_var_input_ui</span><span class="op">(</span><span class="st">"vars"</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        <span class="fu">mainPanel</span><span class="op">(</span></span>
<span>          <span class="fu">mod_scatter_display_ui</span><span class="op">(</span><span class="st">"plot"</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>After loading, documenting, and installing, the application now includes the image file.</p>
<p><span style="font-style: italic; font-weight: bold; font-size: 1.10em"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>L</kbd> / <kbd>D</kbd> / <kbd>B</kbd></span></p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">pkgApp</span><span class="op">)</span></span>
<span><span class="fu">movies_app</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="column-body-outset-right">
<div id="fig-07_inst_movies_app_img" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-07_inst_movies_app_img" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/07_inst_movies_app_img.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-07_inst_movies_app_img"></p>
<figcaption class="figure-caption">(a) <code>movies_app()</code> with logo</figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;3: <code>inst/www</code> accessible with <code>addResourcePath()</code></figcaption></figure>
</div>
</div>
</section><section id="other-uses-for-inst" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="other-uses-for-inst">Other uses for <span style="font-size: 1.05em;"><code>inst/</code></span>
</h2>
<p>The <code>inst/</code> folder can also be used to store files we’re using in alternate versions of our application. This can include alternate images, CSS styling, JS scripts, data files, or even entirely different apps!</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/new_branch_ico.png" class="img-fluid figure-img" style="width:75.0%"></p>
<figcaption class="figure-caption">Git Branch</figcaption></figure>
</div>
<p>This section’s code is in the <a href="https://github.com/mjfrigaard/pkgApp"><code>pkgApp</code></a> repo’s <a href="https://github.com/mjfrigaard/pkgApp/tree/07_dev-bslib"><code>07_dev-bslib</code></a> branch</p>
</div></div><section id="alternate-external-files" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="alternate-external-files">Alternate external files</h4>
<p>We can store <code>inst/</code> alternative external files and configure our UI function to test different layouts. In the example below, I’ve included an optional UI layout from the <a href="https://rstudio.github.io/bslib/index.html"><code>bslib</code> package</a>.</p>
<p>The <code>bslib</code> argument in the <code>movies_ui()</code> includes an alternate image file (stored in <code>inst/www/bootstrap.png</code>):</p>
<div class="cell">
<details open=""><summary>show/hide movies_ui()</summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">movies_ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">bslib</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">addResourcePath</span><span class="op">(</span><span class="st">"www"</span>, <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"www"</span>, package <span class="op">=</span> <span class="st">"pkgApp"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Logic.html">isFALSE</a></span><span class="op">(</span><span class="va">bslib</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">tagList</span><span class="op">(</span></span>
<span>      <span class="co"># I've omitted fluidPage() layout code here</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu">tagList</span><span class="op">(</span></span>
<span>      <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bslib/man/page.html">page_fillable</a></span><span class="op">(</span></span>
<span>        title <span class="op">=</span> <span class="st">"Movie Reviews (bslib)"</span>,</span>
<span>        theme <span class="op">=</span> <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bslib/man/bs_theme.html">bs_theme</a></span><span class="op">(</span></span>
<span>          bg <span class="op">=</span> <span class="st">"#101010"</span>,</span>
<span>          fg <span class="op">=</span> <span class="st">"#F6F5F5"</span>,</span>
<span>          primary <span class="op">=</span> <span class="st">"#EE6F57"</span>,</span>
<span>          secondary <span class="op">=</span> <span class="st">"#32E0C4"</span>,</span>
<span>          success <span class="op">=</span> <span class="st">"#FF4B5C"</span>,</span>
<span>          base_font <span class="op">=</span> <span class="fu">sass</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/sass/reference/font_face.html">font_google</a></span><span class="op">(</span><span class="st">"Ubuntu"</span><span class="op">)</span>,</span>
<span>          heading_font <span class="op">=</span> <span class="fu">sass</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/sass/reference/font_face.html">font_google</a></span><span class="op">(</span><span class="st">"Ubuntu"</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bslib/man/sidebar.html">layout_sidebar</a></span><span class="op">(</span></span>
<span>          sidebar <span class="op">=</span> <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bslib/man/sidebar.html">sidebar</a></span><span class="op">(</span></span>
<span>            <span class="fu">mod_var_input_ui</span><span class="op">(</span><span class="st">"vars"</span><span class="op">)</span></span>
<span>          <span class="op">)</span>,</span>
<span>          <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bslib/man/card.html">card</a></span><span class="op">(</span></span>
<span>            full_screen <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">div</a></span><span class="op">(</span></span>
<span>              <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">img</a></span><span class="op">(</span></span>
<span>                src <span class="op">=</span> <span class="st">"www/bootstrap.png"</span>,</span>
<span>                height <span class="op">=</span> <span class="fl">40</span>,</span>
<span>                width <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                style <span class="op">=</span> <span class="st">"margin:10px 10px"</span></span>
<span>              <span class="op">)</span></span>
<span>            <span class="op">)</span>,</span>
<span>            <span class="fu">mod_scatter_display_ui</span><span class="op">(</span><span class="st">"plot"</span><span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This alternate version of <code>movies_app()</code> uses the same modules and utility functions as the previous versions, but when <code>bslib = TRUE</code>, the app displays the alternate UI layout:</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">pkgApp</span><span class="fu">::</span><span class="fu">movies_app</span><span class="op">(</span>test <span class="op">=</span> <span class="cn">FALSE</span>, bslib <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="column-body-outset-right">
<div id="fig-07_inst_bslib_app" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-07_inst_bslib_app" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/07_inst_bslib_app.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-07_inst_bslib_app"></p>
<figcaption class="figure-caption">(a) <code>movies_app()</code> with logo</figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;4: <code>inst/www/bootstrap.png</code> image from <code>movies_ui()</code></figcaption></figure>
</div>
</div>
</section><section id="development-versions" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="development-versions">Development versions</h3>
<p>It’s not uncommon to be working on multiple ‘development’ versions of an application in the same package. In these situations, we might want to store an entire applications in the <code>inst/</code> folder (like <code>inst/dev/</code> below) and launch it with <code>runApp()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">inst/dev/</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> app.R</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="ex">├──</span> ggp2movies.fst</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="ex">└──</span> imdb.png</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span> directory, 3 files</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This ‘development’ application uses a tidy version of the <a href="https://cran.r-project.org/web/packages/ggplot2movies/index.html"><code>ggplot2movies::movies</code> data</a></p>
<ul>
<li>We can create this in the <a href="https://github.com/mjfrigaard/pkgApp/blob/07_dev-ggp2movies/data-raw/ggp2movies.R"><code>data-raw/ggp2movies.R</code></a> file.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>
</li>
</ul>
<p>In <code>inst/dev/</code>, we can place the application’s code in an <a href="https://github.com/mjfrigaard/pkgApp/blob/07_dev-ggp2movies/inst/dev/app.R"><code>app.R</code> file</a>.</p>
<ul>
<li>In <code>app.R</code>, we can create a new <code>mod_variables_ui()</code> development module with the correct variable names</li>
</ul>
<div class="cell">
<details><summary>show/hide mod_variables_ui()</summary><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mod_variables_ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">addResourcePath</span><span class="op">(</span>prefix <span class="op">=</span> <span class="st">"dev"</span>, </span>
<span>    directoryPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"dev"</span>, package <span class="op">=</span> <span class="st">"pkgApp"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu">NS</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>    <span class="fu">tagList</span><span class="op">(</span></span>
<span>      <span class="fu">selectInput</span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"y"</span><span class="op">)</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"Y-axis:"</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"Year"</span> <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>          <span class="st">"Length"</span> <span class="op">=</span> <span class="st">"length"</span>,</span>
<span>          <span class="st">"Budget"</span> <span class="op">=</span> <span class="st">"budget"</span>,</span>
<span>          <span class="st">"Rating"</span> <span class="op">=</span> <span class="st">"avg_rating"</span>,</span>
<span>          <span class="st">"Votes"</span> <span class="op">=</span> <span class="st">"votes"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"budget"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu">selectInput</span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"X-axis:"</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"Year"</span> <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>          <span class="st">"Length"</span> <span class="op">=</span> <span class="st">"length"</span>,</span>
<span>          <span class="st">"Budget"</span> <span class="op">=</span> <span class="st">"budget"</span>,</span>
<span>          <span class="st">"Rating"</span> <span class="op">=</span> <span class="st">"avg_rating"</span>,</span>
<span>          <span class="st">"Votes"</span> <span class="op">=</span> <span class="st">"votes"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"avg_rating"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu">selectInput</span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"z"</span><span class="op">)</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"Color by:"</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"MPAA"</span> <span class="op">=</span> <span class="st">"mpaa"</span>,</span>
<span>          <span class="st">"Genres"</span> <span class="op">=</span> <span class="st">"genres"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"mpaa"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu">sliderInput</span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"alpha"</span><span class="op">)</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"Alpha:"</span>,</span>
<span>        min <span class="op">=</span> <span class="fl">0</span>, max <span class="op">=</span> <span class="fl">1</span>, step <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>        value <span class="op">=</span> <span class="fl">0.4</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu">sliderInput</span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"size"</span><span class="op">)</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"Size:"</span>,</span>
<span>        min <span class="op">=</span> <span class="fl">0</span>, max <span class="op">=</span> <span class="fl">5</span>, step <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>        value <span class="op">=</span> <span class="fl">2.5</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu">textInput</span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"plot_title"</span><span class="op">)</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"Plot title"</span>,</span>
<span>        placeholder <span class="op">=</span> <span class="st">"Enter plot title"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>However, by including a call to <code><a href="https://rdrr.io/r/base/library.html">library(pkgApp)</a></code> at the top of <code>app.R</code>, I can pair the <code>mod_variables_ui()</code> function with the <code>mod_var_input_server()</code> function.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<p>We’ll also include the alternate image (<code>bootstrap.png</code>) and data file (created with <code>data-raw/ggp2movies.R</code>). Finally, we’ll launch the development version of the app with a different standalone app function, stored in <code>R/ggplot2movies_app.R</code>.</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/new_branch_ico.png" class="img-fluid figure-img" style="width:75.0%"></p>
<figcaption class="figure-caption">Git Branch</figcaption></figure>
</div>
<p>This section’s code is in the <a href="https://github.com/mjfrigaard/pkgApp"><code>pkgApp</code></a> repo’s <a href="https://github.com/mjfrigaard/pkgApp/tree/07_dev-ggp2movies"><code>07_dev-ggp2movies</code></a> branch</p>
</div></div><p>To run this development app, I’ll create the <code>ggplot2movies_app()</code> function below:</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' Development `ggplot2movies` app standalone function</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' Wrapper function for `runApp()`</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @param test logical, run in `test.mode`?</span></span>
<span><span class="co">#' @param run where to launch app: </span></span>
<span><span class="co">#'  * `view` = launch in viewer  </span></span>
<span><span class="co">#'  * `browse` = launch in external browser  </span></span>
<span><span class="co">#'  * `win` = launch in window</span></span>
<span><span class="co">#'  * `default` = `getOption(x = 'shiny.launch.browser')`</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @return shiny app</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @seealso [mod_var_input_ui()], [mod_var_input_server()], [mod_scatter_display_ui()], [mod_scatter_display_server()]</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' </span></span>
<span><span class="va">ggplot2movies_app</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">test</span> <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">run</span> <span class="op">=</span> <span class="st">"default"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/switch.html">switch</a></span><span class="op">(</span>EXPR <span class="op">=</span> <span class="va">run</span>, </span>
<span>    view <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>shiny.launch.browser <span class="op">=</span> <span class="va">.rs.invokeShinyPaneViewer</span><span class="op">)</span>,</span>
<span>    browser <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>shiny.launch.browser <span class="op">=</span> <span class="va">.rs.invokeShinyWindowExternal</span><span class="op">)</span>,</span>
<span>    win <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>shiny.launch.browser <span class="op">=</span> <span class="va">.rs.invokeShinyWindowViewer</span><span class="op">)</span>,</span>
<span>    default <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html">getOption</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">'shiny.launch.browser'</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">test</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">runApp</span><span class="op">(</span>appDir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"dev"</span>, package <span class="op">=</span> <span class="st">"pkgApp"</span><span class="op">)</span>, </span>
<span>           test.mode <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu">runApp</span><span class="op">(</span>appDir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"dev"</span>, package <span class="op">=</span> <span class="st">"pkgApp"</span><span class="op">)</span>, </span>
<span>           test.mode <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>ggplot2movies_app()</code> looks a lot like <code>movies_app()</code>, but the <code>appDir</code> argument is the location of the development application, which we provide with <code><a href="https://rdrr.io/r/base/system.file.html">system.file()</a></code>.</p>
<p><span style="font-style: italic; font-weight: bold; font-size: 1.10em"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>L</kbd> / <kbd>D</kbd> / <kbd>B</kbd></span></p>
<p>After loading, documenting, and installing <code>pkgApp</code>, we can run the development version using <code>ggplot2movies_app()</code>:</p>
<div class="column-body-outset-right">
<div id="fig-07_inst_ggp2movies_app" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-07_inst_ggp2movies_app" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/07_inst_ggp2movies_app.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-07_inst_ggp2movies_app"></p>
<figcaption class="figure-caption">(a) <code>ggplot2movies_app()</code></figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;5: <code>inst/dev/</code> app with <code>dev_movies_ui()</code></figcaption></figure>
</div>
</div>
<p>You may have noticed that I’ve used a different color and theme for the two development examples above. I’ve found this can be a quick and easy way to differentiate ‘development’ and ‘production’ versions of an application.</p>
</section></section><section id="recap" class="level2"><h2 class="anchored" data-anchor-id="recap">Recap</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="font-weight: bold; font-size: 1.20em;">Recap: <code>inst</code> &amp; <code>www</code> folders</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<ul>
<li><p><code>inst/</code>: the <code>inst/</code> folder is installed with your app-package and will be accessible to users, so it’s a great location for files you want to contained in your app, but don’t fit into the standard R package structure.</p></li>
<li><p><code><a href="https://rdrr.io/r/base/system.file.html">system.file()</a></code>: constructs a path to files or folders within <strong>installed packages</strong> and is especially useful when working with external datasets (i.e., <code>inst/extdata/</code>) or other external resources included with your app-package (i.e., <code>inst/www/</code>).</p></li>
<li><p><code>www</code>: used for external static resources in shiny apps. shiny will automatically serve files under the <code>www/</code> directory, but in app-packages we need to explicitly set this location with <code><a href="https://rdrr.io/pkg/shiny/man/resourcePaths.html">shiny::addResourcePath()</a></code></p></li>
<li>
<p><code>addResourcePath()</code>: create a prefix (path) for a <code>directoryPath</code> of static files to accessible in shiny’s web server:</p>
<pre><code># file location
inst/
  └── www/
        └── shiny.png</code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># add path</span></span>
<span><span class="fu">addResourcePath</span><span class="op">(</span><span class="st">'www'</span>, <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'www'</span>, package<span class="op">=</span><span class="st">'pkgApp'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># use path</span></span>
<span><span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">img</a></span><span class="op">(</span>src <span class="op">=</span> <span class="st">'www/shiny.png'</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</li>
</ul>
</div>
</div>
</div>
</div>
<p>end <code>inst.qmd</code></p>


</section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>Using <code>fs::path_packcage(package = "pkgApp")</code> will also return the path to your installed package.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>The key takeaway here is that the <code>inst/</code> subfolders and files are available <em>unchanged</em> in the installed version (with the <code>inst/</code> folder omitted.).<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Read more about sub-directories to avoid in <code>inst/</code> in <a href="https://r-pkgs.org/misc.html#sec-misc-inst">R Packages, 2ed</a>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>You can read more about adding external resources in the <a href="https://shiny.posit.co/r/reference/shiny/latest/resourcepaths">documentation for <code>addResourcePath()</code></a>.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>We covered the <code>data-raw/</code> folder in the <a href="https://mjfrigaard.github.io/shinyap/data.html">Data chapter</a>, and you can read more about it <a href="https://r-pkgs.org/data.html#sec-data-data-raw.">here in R packages, 2ed</a><a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>This requires exporting <code>mod_var_input_server()</code> with <code>@export</code> in the <code>R/</code> folder.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./data.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">Data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./tests.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-title">Tests</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>