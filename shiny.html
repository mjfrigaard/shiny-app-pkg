<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="A manual for making shiny app-packages">
<title>Shiny App-Packages - Shiny apps</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./packages.html" rel="next">
<link href="./intro.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
</head>
<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./intro.html">Introduction</a></li><li class="breadcrumb-item"><a href="./shiny.html">Shiny apps</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Shiny App-Packages</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/mjfrigaard/shinyap" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome!</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./shiny.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Shiny apps</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./devtools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span style="font-size: 1.05em;"><code>devtools</code></span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./app_packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">App-packages</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roxygen2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span style="font-size: 1.05em;"><code>roxygen2</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dependencies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dependencies</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inst_www.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span style="font-size: 1.05em;"><code>inst/</code></span> &amp; <span style="font-size: 1.05em;"><code>www/</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./run.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Running the app</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./frameworks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Frameworks</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./golem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>goelm</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./leprechaun.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>leprechaun</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rhino.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>rhino</code></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./special_topics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Special topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./debugging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Debugging</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./css.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CSS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./js.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">JavaScript</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code_tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Code tools</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Glossary of terms</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GitHub</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./create.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix: Creating packages in Posit Workbench</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul>
<li><a href="#shiny-programming" id="toc-shiny-programming" class="nav-link active" data-scroll-target="#shiny-programming">Shiny programming</a></li>
  <li><a href="#new-shiny-app-projects" id="toc-new-shiny-app-projects" class="nav-link" data-scroll-target="#new-shiny-app-projects">New shiny app projects</a></li>
  <li>
<a href="#shiny-app-project-contents" id="toc-shiny-app-project-contents" class="nav-link" data-scroll-target="#shiny-app-project-contents">Shiny app project contents</a>
  <ul>
<li><a href="#app.r" id="toc-app.r" class="nav-link" data-scroll-target="#app.r"><span style="font-size: 1.05em;"><code>app.R</code></span></a></li>
  </ul>
</li>
  <li>
<a href="#movie-review-app" id="toc-movie-review-app" class="nav-link" data-scroll-target="#movie-review-app">Movie review app</a>
  <ul>
<li><a href="#app" id="toc-app" class="nav-link" data-scroll-target="#app">App</a></li>
  <li><a href="#utility-function" id="toc-utility-function" class="nav-link" data-scroll-target="#utility-function">Utility function</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#updated-movies-app-project-contents" id="toc-updated-movies-app-project-contents" class="nav-link" data-scroll-target="#updated-movies-app-project-contents">Updated movies app project contents</a></li>
  </ul>
</li>
  <li>
<a href="#project-folders" id="toc-project-folders" class="nav-link" data-scroll-target="#project-folders">Project folders</a>
  <ul>
<li><a href="#r" id="toc-r" class="nav-link" data-scroll-target="#r"><span style="font-size: 1.05em;"><code>R/</code></span></a></li>
  <li><a href="#www" id="toc-www" class="nav-link" data-scroll-target="#www"><span style="font-size: 1.05em;"><code>www/</code></span></a></li>
  </ul>
</li>
  <li>
<a href="#project-files" id="toc-project-files" class="nav-link" data-scroll-target="#project-files">Project files</a>
  <ul>
<li><a href="#readme.md" id="toc-readme.md" class="nav-link" data-scroll-target="#readme.md"><span style="font-size: 1.10em;"><code>README.md</code></span></a></li>
  <li><a href="#description" id="toc-description" class="nav-link" data-scroll-target="#description"><span style="font-size: 1.05em;"><code>DESCRIPTION</code></span></a></li>
  </ul>
</li>
  <li>
<a href="#project-code" id="toc-project-code" class="nav-link" data-scroll-target="#project-code">Project code</a>
  <ul>
<li>
<a href="#modules" id="toc-modules" class="nav-link" data-scroll-target="#modules">Modules</a>
  <ul>
<li><a href="#variable-inputs-mod_var_input" id="toc-variable-inputs-mod_var_input" class="nav-link" data-scroll-target="#variable-inputs-mod_var_input">Variable inputs (<span style="font-size: 0.95em;"><code>mod_var_input</code></span>)</a></li>
  <li><a href="#scatter-plot-display-mod_scatter_display" id="toc-scatter-plot-display-mod_scatter_display" class="nav-link" data-scroll-target="#scatter-plot-display-mod_scatter_display">Scatter-plot display (<span style="font-size: 0.95em;"><code>mod_scatter_display</code></span>)</a></li>
  </ul>
</li>
  <li><a href="#standalone-app-function" id="toc-standalone-app-function" class="nav-link" data-scroll-target="#standalone-app-function">Standalone app function</a></li>
  </ul>
</li>
  <li>
<a href="#project-dependencies" id="toc-project-dependencies" class="nav-link" data-scroll-target="#project-dependencies">Project dependencies</a>
  <ul>
<li><a href="#renv" id="toc-renv" class="nav-link" data-scroll-target="#renv"><span style="font-size: 1.05em;"><code>renv</code></span></a></li>
  </ul>
</li>
  <li><a href="#recap" id="toc-recap" class="nav-link" data-scroll-target="#recap">Recap</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/mjfrigaard/shinyap/edit/main/shiny.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/mjfrigaard/shinyap/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Shiny apps</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Heads up!
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<p>This chapter is currently being revised. Thank you for your patience.</p>
</div>
</div>
</div>
</div>
<p>This chapter briefly reviews Shiny’s reactive model and how it differs from regular R programming. Then I’ll cover a few Shiny app development best practices <em>outside</em> of an R package structure.</p>
<p>Properly storing/using utility functions, data, documentation, metadata files, and converting your application code into functions will set you up for success as you transition to app-packages.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"shiny"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/">shiny</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="shiny-programming" class="level2"><h2 class="anchored" data-anchor-id="shiny-programming">Shiny programming</h2>
<p>Reactivity is the underlying process that allows Shiny apps to update and respond to user interactions automatically. Developing Shiny apps involves harnessing the connection between inputs, reactivity, and outputs to control and predict the application’s behavior.</p>
<p>Shiny programming differs from regular R programming in several key aspects:</p>
<ul>
<li>
<p><strong>An Event-driven UI</strong>: Shiny apps require developers to design and develop a user interface (UI). <a href="https://bootcamp.cvn.columbia.edu/blog/what-is-ux-design/#:~:text">User experience (UX) design</a> is an entirely separate field, but as Shiny developers, we need to know enough to allow users to interact with and navigate our apps. The UI also captures each ‘event,’ meaning that the user’s actions (such as button clicks or input changes) trigger inputs, updates, or outputs in the application.</p>
<ul>
<li>Regular R programming often involves executing predefined steps or functions without direct interaction or responses to user events.</li>
</ul>
</li>
<li>
<p><strong>A Reactive Server</strong>: In Shiny, the application’s behavior is determined by the dependencies between reactive inputs (i.e., the <code>inputId</code>s), reactive values, and outputs (i.e., the <code>outputId</code>s), allowing for automatic updates and propagation of changes throughout the application.</p>
<ul>
<li>In standard R programming, we typically define a series of sequential steps (i.e., functions) that operate on data to generate output to the console or a typesetting system for technical and scientific publications (model results, graphs, tables, etc.) without accounting for reactivity or downstream changes.</li>
</ul>
</li>
</ul>
<p>Learning reactivity can be challenging when you start, but fortunately, there are <a href="https://shiny.posit.co/r/getstarted/shiny-basics/lesson1/index.html">excellent tutorials</a> and <a href="https://shiny.posit.co/r/articles/build/understanding-reactivity/">articles</a> to help you along the way!</p>
</section><section id="new-shiny-app-projects" class="level2"><h2 class="anchored" data-anchor-id="new-shiny-app-projects">New shiny app projects</h2>
<p>If you’re creating a new application using the <strong>New Project Wizard</strong>, you’ll see the following:</p>
<div id="fig-new_app_wizard_shiny" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-new_app_wizard_shiny" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/new_app_wizard_shiny.png" class="img-fluid figure-img" style="width:75.0%" data-ref-parent="fig-new_app_wizard_shiny"></p>
<figcaption class="figure-caption">(a) New shiny app</figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;1: New shiny app project</figcaption></figure>
</div>
<p>After selecting the location of your shiny app project, you can pick a name and decide whether you want to use Git or <code>renv</code>.</p>
<div id="fig-new_proj_wizard_shiny" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-new_proj_wizard_shiny" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/new_proj_wizard_shiny.png" class="img-fluid figure-img" style="width:75.0%" data-ref-parent="fig-new_proj_wizard_shiny"></p>
<figcaption class="figure-caption">(a) Shiny app info</figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;2: New shiny app project in a Git repository</figcaption></figure>
</div>
<p>After clicking <strong>Create Project</strong>, a new session will open with your project files.</p>
</section><section id="shiny-app-project-contents" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="shiny-app-project-contents">Shiny app project contents</h2>
<p>Note that the only items in the new shiny app project are <code>app.R</code> and the <code>projApp.Rproj</code> file.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>projApp/</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    ├── app.R</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    └── projApp.Rproj</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>1 directory, 2 files</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="app.r" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="app.r"><span style="font-size: 1.05em;"><code>app.R</code></span></h3>
<p><code>app.R</code> initially contains a boilerplate application, which we can launch by clicking on the <strong>Run App</strong> button:</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/Run_App.png" class="img-fluid figure-img" style="width:75.0%"></p>
<figcaption class="figure-caption">Click on <strong>Run App</strong></figcaption></figure>
</div>
</div></div><div id="fig-boilerplate_shiny_app" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-boilerplate_shiny_app" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/boilerplate_shiny_app.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-boilerplate_shiny_app"></p>
<figcaption class="figure-caption">(a) Old Faithful geyser app</figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;3: Boilerplate Old Faithful geyser app in new shiny projects</figcaption></figure>
</div>
<p>The Old Faith Geyser Data application is a great start, but we will exchange this code for a <em>slightly</em> more advanced application (because most shiny apps grow beyond the boilerplate code in <code>app.R</code>).</p>
</section></section><section id="movie-review-app" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="movie-review-app">Movie review app</h2>
<div class="callout callout-style-default callout-caution no-icon callout-titled" title="**Copy me!**">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<strong>Copy me!</strong>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>If you’re following along, these callout boxes contain code that should be copied and pasted into your shiny app project</p>
</div>
</div>
</div>
<p>The application we’re going to place in <code>app.R</code> comes from the <a href="https://rstudio-education.github.io/shiny-course/">Building Web Applications with Shiny</a> course. I’ve chosen to use this app for the following reasons:</p>
<ol type="1">
<li><p><strong>Multiple input types</strong> are collected in the UI</p></li>
<li><p>An output that can be created with a <strong>utility function</strong></p></li>
<li><p>The app loads an <strong>external data</strong> file when it’s launched</p></li>
</ol>
<p>Each of these features provide an opportunity to explore some of the methods shiny apps have for running code and loading external files.</p>
<section id="app" class="level3"><h3 class="anchored" data-anchor-id="app">App</h3>
<div class="callout callout-style-default callout-caution callout-titled" title="app.R">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
app.R
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Replace the Old Faith Geyser Data app in <code>app.R</code> with the code below:</p>
<div class="cell">
<details open=""><summary>show/hide movie review shiny app</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>theme <span class="op">=</span> <span class="fu">shinythemes</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shinythemes/man/shinytheme.html">shinytheme</a></span><span class="op">(</span><span class="st">"spacelab"</span><span class="op">)</span>,</span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">sidebarLayout</a></span><span class="op">(</span></span>
<span>    <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">sidebarPanel</a></span><span class="op">(</span></span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="st">"y"</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"Y-axis:"</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"IMDB rating"</span> <span class="op">=</span> <span class="st">"imdb_rating"</span>,</span>
<span>          <span class="st">"IMDB number of votes"</span> <span class="op">=</span> <span class="st">"imdb_num_votes"</span>,</span>
<span>          <span class="st">"Critics Score"</span> <span class="op">=</span> <span class="st">"critics_score"</span>,</span>
<span>          <span class="st">"Audience Score"</span> <span class="op">=</span> <span class="st">"audience_score"</span>,</span>
<span>          <span class="st">"Runtime"</span> <span class="op">=</span> <span class="st">"runtime"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"audience_score"</span></span>
<span>      <span class="op">)</span>,</span>
<span></span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="st">"x"</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"X-axis:"</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"IMDB rating"</span> <span class="op">=</span> <span class="st">"imdb_rating"</span>,</span>
<span>          <span class="st">"IMDB number of votes"</span> <span class="op">=</span> <span class="st">"imdb_num_votes"</span>,</span>
<span>          <span class="st">"Critics Score"</span> <span class="op">=</span> <span class="st">"critics_score"</span>,</span>
<span>          <span class="st">"Audience Score"</span> <span class="op">=</span> <span class="st">"audience_score"</span>,</span>
<span>          <span class="st">"Runtime"</span> <span class="op">=</span> <span class="st">"runtime"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"critics_score"</span></span>
<span>      <span class="op">)</span>,</span>
<span></span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="st">"z"</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"Color by:"</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"Title Type"</span> <span class="op">=</span> <span class="st">"title_type"</span>,</span>
<span>          <span class="st">"Genre"</span> <span class="op">=</span> <span class="st">"genre"</span>,</span>
<span>          <span class="st">"MPAA Rating"</span> <span class="op">=</span> <span class="st">"mpaa_rating"</span>,</span>
<span>          <span class="st">"Critics Rating"</span> <span class="op">=</span> <span class="st">"critics_rating"</span>,</span>
<span>          <span class="st">"Audience Rating"</span> <span class="op">=</span> <span class="st">"audience_rating"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"mpaa_rating"</span></span>
<span>      <span class="op">)</span>,</span>
<span></span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html">sliderInput</a></span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="st">"alpha"</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"Alpha:"</span>,</span>
<span>        min <span class="op">=</span> <span class="fl">0</span>, max <span class="op">=</span> <span class="fl">1</span>,</span>
<span>        value <span class="op">=</span> <span class="fl">0.4</span></span>
<span>      <span class="op">)</span>,</span>
<span></span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html">sliderInput</a></span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="st">"size"</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"Size:"</span>,</span>
<span>        min <span class="op">=</span> <span class="fl">0</span>, max <span class="op">=</span> <span class="fl">5</span>,</span>
<span>        value <span class="op">=</span> <span class="fl">3</span></span>
<span>      <span class="op">)</span>,</span>
<span></span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textInput.html">textInput</a></span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="st">"plot_title"</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"Plot title"</span>,</span>
<span>        placeholder <span class="op">=</span> <span class="st">"Enter text to be used as plot title"</span></span>
<span>      <span class="op">)</span>,</span>
<span></span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html">actionButton</a></span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="st">"update_plot_title"</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"Update plot title"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span></span>
<span>    <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">mainPanel</a></span><span class="op">(</span></span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">br</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">p</a></span><span class="op">(</span></span>
<span>        <span class="st">"These data were obtained from"</span>,</span>
<span>        <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">a</a></span><span class="op">(</span><span class="st">"IMBD"</span>, href <span class="op">=</span> <span class="st">"http://www.imbd.com/"</span><span class="op">)</span>, <span class="st">"and"</span>,</span>
<span>        <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">a</a></span><span class="op">(</span><span class="st">"Rotten Tomatoes"</span>, href <span class="op">=</span> <span class="st">"https://www.rottentomatoes.com/"</span><span class="op">)</span>, <span class="st">"."</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">p</a></span><span class="op">(</span><span class="st">"The data represent"</span>, </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">movies</span><span class="op">)</span>, </span>
<span>        <span class="st">"randomly sampled movies released between 1972 to 2014 in the United States."</span><span class="op">)</span>,</span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html">plotOutput</a></span><span class="op">(</span>outputId <span class="op">=</span> <span class="st">"scatterplot"</span><span class="op">)</span>,</span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">hr</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">p</a></span><span class="op">(</span><span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">em</a></span><span class="op">(</span><span class="st">"The code for this shiny application comes from"</span>, </span>
<span>          <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">a</a></span><span class="op">(</span><span class="st">"Building Web Applications with shiny"</span>, </span>
<span>            href <span class="op">=</span> <span class="st">"https://rstudio-education.github.io/shiny-course/"</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">new_plot_title</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/toTitleCase.html">toTitleCase</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">plot_title</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/bindEvent.html">bindEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">update_plot_title</span>, </span>
<span>                     ignoreNULL <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                     ignoreInit <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>    </span>
<span></span>
<span>  <span class="va">output</span><span class="op">$</span><span class="va">scatterplot</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html">renderPlot</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu">scatter_plot</span><span class="op">(</span></span>
<span>        df <span class="op">=</span> <span class="va">movies</span>,</span>
<span>        x_var <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">x</span>,</span>
<span>        y_var <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">y</span>,</span>
<span>        col_var <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">z</span>,</span>
<span>        alpha_var <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">alpha</span>,</span>
<span>        size_var <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">size</span></span>
<span>      <span class="op">)</span> <span class="op">+</span> </span>
<span>      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="fu">new_plot_title</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section><section id="utility-function" class="level3"><h3 class="anchored" data-anchor-id="utility-function">Utility function</h3>
<div class="callout callout-style-default callout-caution callout-titled" title="utils.R">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
utils.R
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Place the <code>scatter_plot()</code> utility function in new <code>utils.R</code> file</p>
<div class="cell">
<details open=""><summary>show/hide scatter_plot()</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">scatter_plot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">x_var</span>, <span class="va">y_var</span>, <span class="va">col_var</span>, <span class="va">alpha_var</span>, <span class="va">size_var</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df</span>,</span>
<span>      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">x_var</span><span class="op">]</span><span class="op">]</span>,</span>
<span>          y <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">y_var</span><span class="op">]</span><span class="op">]</span>,</span>
<span>          color <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">col_var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="va">alpha_var</span>, size <span class="op">=</span> <span class="va">size_var</span><span class="op">)</span></span>
<span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section><section id="data" class="level3"><h3 class="anchored" data-anchor-id="data">Data</h3>
<div class="callout callout-style-default callout-caution callout-titled" title="movies.RData">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
movies.RData
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Download the <code>movies</code> dataset <a href="https://github.com/mjfrigaard/bbsa/raw/main/movies.RData">here</a> and upload <code>movies.RData</code> to the project.</p>
</div>
</div>
</div>
</section><section id="updated-movies-app-project-contents" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="updated-movies-app-project-contents">Updated movies app project contents</h3>
<p>The <code>projApp</code> project now contains the following files:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>projApp/</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  ├── app.R</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  ├── movies.RData</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  ├── projApp.Rproj</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  └── utils.R</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>2 directories, 4 files</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To run the <code>movies</code> app, we need to make sure to load the data and source the utils.R file. We’ll add this code to the top of the <code>app.R</code> file:</p>
<p><em>If you already have those packages installed, comment those lines out.</em></p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># install ------------------------------------</span></span>
<span><span class="co"># after installing, comment this out</span></span>
<span><span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"shiny"</span>, <span class="st">"shinythemes"</span>, <span class="st">"stringr"</span>, <span class="st">"ggplot2"</span>, <span class="st">"rlang"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="va">pkgs</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># packages ------------------------------------</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/">shiny</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/shinythemes/">shinythemes</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rlang.r-lib.org">rlang</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># data -----------------------------------------</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"movies.RData"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># utils ----------------------------------------</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">"utils.R"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When I click on <strong>Run App</strong>, I see our new shiny application:</p>
<div class="column-page-inset-right">
<div id="fig-movies_app" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-movies_app" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/movies_app.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-movies_app"></p>
<figcaption class="figure-caption">(a) <code>movies</code> app</figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;4: New <code>movies</code> app</figcaption></figure>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/new_branch_ico.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption class="figure-caption">New Git Branch</figcaption></figure>
</div>
<p>The code for this section was pushed to the [<a href="https://github.com/mjfrigaard/projApp/tree/02_movies-app"><code>02_movies-app</code></a>] branch of the [<a href="https://github.com/mjfrigaard/projApp"><code>projApp</code></a>] repo.</p>
</div></div></section></section><section id="project-folders" class="level2"><h2 class="anchored" data-anchor-id="project-folders">Project folders</h2>
<p>Below I’ll cover a few folders that have built-in special behaviors when included in a shiny application project. Using these folders will help organize your files and make additional resources available to your app.</p>
<p>Following the conventional folder structure will also help set you up for success when/if you decide to convert it into an app-package.</p>
<div class="callout callout-style-default callout-caution callout-titled" title="Copy into `projApp`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Copy into <code>projApp</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>If you’re following along, these callout boxes contain code or contents that have been included in <code>projApp</code></p>
</div>
</div>
</div>
<section id="r" class="level3"><h3 class="anchored" data-anchor-id="r"><span style="font-size: 1.05em;"><code>R/</code></span></h3>
<p>If your shiny app relies on utility or helper functions (outside the <code>app.R</code> file), you can place this code in an <code>R/</code> folder. Any <code>.R</code> files in the <code>R/</code> folder will be automatically <code>source</code>d when the application is run.</p>
<p>I’ve moved the <code>utils.R</code> file into the <code>R/</code> folder in <code>projApp</code>:</p>
<div class="callout callout-style-default callout-caution callout-titled" title="`R/` folder">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>R/</code> folder
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb7"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>projApp/</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>     └── R/</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>         └── utils.R</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>1 directory, 1 file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section><section id="www" class="level3"><h3 class="anchored" data-anchor-id="www"><span style="font-size: 1.05em;"><code>www/</code></span></h3>
<p>When you run a shiny application, any static files (i.e., resources) under a <code>www/</code> directory will automatically be made available within the application. Use this folder to store images, CSS or JavaScript files, and other static resources.</p>
<div class="callout callout-style-default callout-caution callout-titled" title="`www/` folder">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>www/</code> folder
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>We’ll download a logo (<a href="https://raw.githubusercontent.com/rstudio/hex-stickers/main/PNG/shiny.png"><code>shiny.png</code></a>) and store it in the <code>www/</code> folder.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>projApp/</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>     └── www/</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>           └── shiny.png</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>1 directory, 1 file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In the section below, we’ll reference it directly in the UI.</p>
</div>
</div>
</div>
</section></section><section id="project-files" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="project-files">Project files</h2>
<section id="readme.md" class="level3"><h3 class="anchored" data-anchor-id="readme.md"><span style="font-size: 1.10em;"><code>README.md</code></span></h3>
<p>Including a <code>README.md</code> file in your root folder is a good practice for any project. <code>README.md</code> should contain relevant documentation for running <code>app.R</code>.</p>
<div class="callout callout-style-default callout-caution callout-titled" title="README.md">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
README.md
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>I’ve included the content below in <code>README.md</code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># movies app</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>The original code and data for this shiny app comes from the <span class="co">[</span><span class="ot">Building Web Applications with Shiny</span><span class="co">](https://rstudio-education.github.io/shiny-course/)</span> course. It's been converted to use <span class="co">[</span><span class="ot">shiny modules</span><span class="co">](https://shiny.posit.co/r/articles/improve/modules/)</span>. </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>View the code for this application in the <span class="co">[</span><span class="ot">`projApp` branches</span><span class="co">](https://github.com/mjfrigaard/projApp/branches/)</span>.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section><section id="description" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="description"><span style="font-size: 1.05em;"><code>DESCRIPTION</code></span></h3>
<p><code>DESCRIPTION</code> files play an essential role in R packages, but they are also helpful in Shiny projects if I want to deploy the app in <a href="https://shiny.posit.co/r/articles/build/display-modes/">showcase mode</a>.</p>
<div class="callout callout-style-default callout-caution callout-titled" title="DESCRIPTION">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
DESCRIPTION
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>I’ve included the content below in <code>DESCRIPTION</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>Type: shiny</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>Title: movies app</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>Author: John Smith</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>DisplayMode: Showcase</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>&lt;empty final line&gt; &lt;- delete me but leave an empty final line!</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="font-weight: bold; font-size: 1.10em">
<p><em>It’s always a good idea to leave at least one <code>&lt;empty final line&gt;</code> in your <code>DESCRIPTION</code> file.</em></p>
</div>
</div></div><p>After adding <code>README.md</code> and a <code>DESCRIPTION</code> file (listing <code>DisplayMode: Showcase</code>), the movies app will display the code and documentation when the app launches:</p>
<div class="column-page-inset-right">
<div id="fig-movies_app_showcase" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-movies_app_showcase" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/movies_app_showcase.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-movies_app_showcase"></p>
<figcaption class="figure-caption">(a) <code>movies</code> app (showcase)</figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;5: Read more about <code>showcase</code> mode <a href="https://shiny.posit.co/r/articles/build/display-modes/">here</a></figcaption></figure>
</div>
</div>
</section></section><section id="project-code" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="project-code">Project code</h2>
<p>The following two items are considered best practices because they make your app more scalable by converting <code>app.R</code> into functions.</p>
<section id="modules" class="level3"><h3 class="anchored" data-anchor-id="modules">Modules</h3>
<p>Shiny modules are ‘<a href="https://mastering-shiny.org/scaling-modules.html">a pair of UI and server functions</a>’ designed to compartmentalize input and output IDs into distinct namespaces,</p>
<blockquote class="blockquote">
<p><em>‘…a namespace is to an ID as a directory is to a file…’</em> - <a href="https://shiny.posit.co/r/reference/shiny/latest/ns"><code>shiny::NS()</code> help file</a></p>
</blockquote>
<p>Module UI functions typically wrap the layout, input, and output functions in <code><a href="https://rstudio.github.io/htmltools/reference/tagList.html">shiny::tagList()</a></code>. Module server functions typically contain the ‘backend’ code in a shiny server function. Both the UI and server module functions are linked by an <code>id</code> argument, which is created using <code><a href="https://rdrr.io/pkg/shiny/man/NS.html">shiny::NS()</a></code> (namespace) in the UI function, and called in the server function with <code><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html">shiny::moduleServer()</a></code>.</p>
<section id="variable-inputs-mod_var_input" class="level4"><h4 class="anchored" data-anchor-id="variable-inputs-mod_var_input">Variable inputs (<span style="font-size: 0.95em;"><code>mod_var_input</code></span>)</h4>
<p><code>mod_var_input_ui()</code> creates a dedicated namespace for the <code>inputId</code>s with <code><a href="https://rdrr.io/pkg/shiny/man/NS.html">shiny::NS()</a></code>:</p>
<div class="callout callout-style-default callout-caution callout-titled" title="mod_var_input">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
mod_var_input
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<details open=""><summary>show/hide mod_var_input_ui()</summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mod_var_input_ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/tagList.html">tagList</a></span><span class="op">(</span></span>
<span>    <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span><span class="op">(</span></span>
<span>      inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"y"</span><span class="op">)</span>,</span>
<span>      label <span class="op">=</span> <span class="st">"Y-axis:"</span>,</span>
<span>      choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>        <span class="st">"IMDB rating"</span> <span class="op">=</span> <span class="st">"imdb_rating"</span>,</span>
<span>        <span class="st">"IMDB number of votes"</span> <span class="op">=</span> <span class="st">"imdb_num_votes"</span>,</span>
<span>        <span class="st">"Critics Score"</span> <span class="op">=</span> <span class="st">"critics_score"</span>,</span>
<span>        <span class="st">"Audience Score"</span> <span class="op">=</span> <span class="st">"audience_score"</span>,</span>
<span>        <span class="st">"Runtime"</span> <span class="op">=</span> <span class="st">"runtime"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      selected <span class="op">=</span> <span class="st">"audience_score"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span><span class="op">(</span></span>
<span>      inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span>,</span>
<span>      label <span class="op">=</span> <span class="st">"X-axis:"</span>,</span>
<span>      choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>        <span class="st">"IMDB rating"</span> <span class="op">=</span> <span class="st">"imdb_rating"</span>,</span>
<span>        <span class="st">"IMDB number of votes"</span> <span class="op">=</span> <span class="st">"imdb_num_votes"</span>,</span>
<span>        <span class="st">"Critics Score"</span> <span class="op">=</span> <span class="st">"critics_score"</span>,</span>
<span>        <span class="st">"Audience Score"</span> <span class="op">=</span> <span class="st">"audience_score"</span>,</span>
<span>        <span class="st">"Runtime"</span> <span class="op">=</span> <span class="st">"runtime"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      selected <span class="op">=</span> <span class="st">"imdb_rating"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span><span class="op">(</span></span>
<span>      inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"z"</span><span class="op">)</span>,</span>
<span>      label <span class="op">=</span> <span class="st">"Color by:"</span>,</span>
<span>      choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>        <span class="st">"Title Type"</span> <span class="op">=</span> <span class="st">"title_type"</span>,</span>
<span>        <span class="st">"Genre"</span> <span class="op">=</span> <span class="st">"genre"</span>,</span>
<span>        <span class="st">"MPAA Rating"</span> <span class="op">=</span> <span class="st">"mpaa_rating"</span>,</span>
<span>        <span class="st">"Critics Rating"</span> <span class="op">=</span> <span class="st">"critics_rating"</span>,</span>
<span>        <span class="st">"Audience Rating"</span> <span class="op">=</span> <span class="st">"audience_rating"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      selected <span class="op">=</span> <span class="st">"mpaa_rating"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html">sliderInput</a></span><span class="op">(</span></span>
<span>      inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"alpha"</span><span class="op">)</span>,</span>
<span>      label <span class="op">=</span> <span class="st">"Alpha:"</span>,</span>
<span>      min <span class="op">=</span> <span class="fl">0</span>, max <span class="op">=</span> <span class="fl">1</span>, step <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>      value <span class="op">=</span> <span class="fl">0.5</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html">sliderInput</a></span><span class="op">(</span></span>
<span>      inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"size"</span><span class="op">)</span>,</span>
<span>      label <span class="op">=</span> <span class="st">"Size:"</span>,</span>
<span>      min <span class="op">=</span> <span class="fl">0</span>, max <span class="op">=</span> <span class="fl">5</span>,</span>
<span>      value <span class="op">=</span> <span class="fl">2</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textInput.html">textInput</a></span><span class="op">(</span></span>
<span>      inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"plot_title"</span><span class="op">)</span>,</span>
<span>      label <span class="op">=</span> <span class="st">"Plot title"</span>,</span>
<span>      placeholder <span class="op">=</span> <span class="st">"Enter plot title"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<p><code>mod_var_input_server()</code> returns these values in reactive list with <code><a href="https://rdrr.io/pkg/shiny/man/reactive.html">shiny::reactive()</a></code>:</p>
<div class="callout callout-style-default callout-caution callout-titled" title="mod_var_input_server">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
mod_var_input_server
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<details open=""><summary>show/hide mod_var_input_server()</summary><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mod_var_input_server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"x"</span> <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="va">input</span><span class="op">$</span><span class="va">x</span></span>
<span>        <span class="op">}</span><span class="op">)</span>,</span>
<span>        <span class="st">"y"</span> <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="va">input</span><span class="op">$</span><span class="va">y</span></span>
<span>        <span class="op">}</span><span class="op">)</span>,</span>
<span>        <span class="st">"z"</span> <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="va">input</span><span class="op">$</span><span class="va">z</span></span>
<span>        <span class="op">}</span><span class="op">)</span>,</span>
<span>        <span class="st">"alpha"</span> <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="va">input</span><span class="op">$</span><span class="va">alpha</span></span>
<span>        <span class="op">}</span><span class="op">)</span>,</span>
<span>        <span class="st">"size"</span> <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="va">input</span><span class="op">$</span><span class="va">size</span></span>
<span>        <span class="op">}</span><span class="op">)</span>,</span>
<span>        <span class="st">"plot_title"</span> <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="va">input</span><span class="op">$</span><span class="va">plot_title</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section><section id="scatter-plot-display-mod_scatter_display" class="level4"><h4 class="anchored" data-anchor-id="scatter-plot-display-mod_scatter_display">Scatter-plot display (<span style="font-size: 0.95em;"><code>mod_scatter_display</code></span>)</h4>
<p><code>mod_scatter_display_ui()</code> creates a dedicated namespace for the plot <code>outputId</code> (as <code>"scatterplot"</code>), along with some help text:</p>
<div class="callout callout-style-default callout-caution callout-titled" title="mod_scatter_display_ui">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
mod_scatter_display_ui
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<details open=""><summary>show/hide mod_scatter_display_ui()</summary><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mod_scatter_display_ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/tagList.html">tagList</a></span><span class="op">(</span></span>
<span>    <span class="fu">shiny</span><span class="fu">::</span><span class="va"><a href="https://rstudio.github.io/htmltools/reference/builder.html">tags</a></span><span class="op">$</span><span class="fu">br</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    <span class="fu">shiny</span><span class="fu">::</span><span class="va"><a href="https://rstudio.github.io/htmltools/reference/builder.html">tags</a></span><span class="op">$</span><span class="fu">blockquote</span><span class="op">(</span></span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="va"><a href="https://rstudio.github.io/htmltools/reference/builder.html">tags</a></span><span class="op">$</span><span class="fu">em</span><span class="op">(</span></span>
<span>        <span class="fu">shiny</span><span class="fu">::</span><span class="va"><a href="https://rstudio.github.io/htmltools/reference/builder.html">tags</a></span><span class="op">$</span><span class="fu">h6</span><span class="op">(</span><span class="st">"The data for this application comes from the "</span>,</span>
<span>        <span class="fu">shiny</span><span class="fu">::</span><span class="va"><a href="https://rstudio.github.io/htmltools/reference/builder.html">tags</a></span><span class="op">$</span><span class="fu">a</span><span class="op">(</span><span class="st">"Building web applications with Shiny"</span>,</span>
<span>          href <span class="op">=</span> <span class="st">"https://rstudio-education.github.io/shiny-course/"</span><span class="op">)</span>,</span>
<span>                      <span class="st">"tutorial"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>    <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html">plotOutput</a></span><span class="op">(</span>outputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"scatterplot"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<p>The code to render the <code>output$scatterplot</code> is contained in the nested call to <code><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html">shiny::moduleServer()</a></code> in <code>mod_scatter_display_server()</code>:</p>
<p>After loading the <code>movies</code> data and collecting the returned values from <code>mod_var_input_server()</code>, and creating the <code>input()</code> reactive, the <code>scatter_plot()</code> utility function creates the <code>plot</code> object and adds the <code>plot_title()</code>:</p>
<div class="callout callout-style-default callout-caution callout-titled" title="mod_scatter_display_server">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
mod_scatter_display_server
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<details open=""><summary>show/hide mod_scatter_display_server()</summary><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mod_scatter_display_server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">var_inputs</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    </span>
<span>    <span class="co"># data --------------------------------------------------------------------</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"movies.RData"</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">inputs</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="va">plot_title</span> <span class="op">&lt;-</span> <span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/toTitleCase.html">toTitleCase</a></span><span class="op">(</span><span class="va">var_inputs</span><span class="op">$</span><span class="fu">plot_title</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>        x <span class="op">=</span> <span class="va">var_inputs</span><span class="op">$</span><span class="fu">x</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        y <span class="op">=</span> <span class="va">var_inputs</span><span class="op">$</span><span class="fu">y</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        z <span class="op">=</span> <span class="va">var_inputs</span><span class="op">$</span><span class="fu">z</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        alpha <span class="op">=</span> <span class="va">var_inputs</span><span class="op">$</span><span class="fu">alpha</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        size <span class="op">=</span> <span class="va">var_inputs</span><span class="op">$</span><span class="fu">size</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        plot_title <span class="op">=</span> <span class="va">plot_title</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">scatterplot</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html">renderPlot</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu">scatter_plot</span><span class="op">(</span></span>
<span>        df <span class="op">=</span> <span class="va">movies</span>,</span>
<span>        x_var <span class="op">=</span> <span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">x</span>,</span>
<span>        y_var <span class="op">=</span> <span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">y</span>,</span>
<span>        col_var <span class="op">=</span> <span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">z</span>,</span>
<span>        alpha_var <span class="op">=</span> <span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">alpha</span>,</span>
<span>        size_var <span class="op">=</span> <span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">size</span></span>
<span>      <span class="op">)</span></span>
<span>      <span class="va">plot</span> <span class="op">+</span></span>
<span>        <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>          title <span class="op">=</span> <span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">plot_title</span>,</span>
<span>          x <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/toTitleCase.html">toTitleCase</a></span><span class="op">(</span><span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">x</span><span class="op">)</span>, <span class="st">"_"</span>, <span class="st">" "</span><span class="op">)</span>,</span>
<span>          y <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/toTitleCase.html">toTitleCase</a></span><span class="op">(</span><span class="fu">inputs</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">y</span><span class="op">)</span>, <span class="st">"_"</span>, <span class="st">" "</span><span class="op">)</span></span>
<span>        <span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<p>Both UI and server module functions are combined into a single module <code>.R</code> file and all modules are placed in the <code>R/</code> folder so they are sourced when the application is run.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">R/</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a> <span class="ex">├──</span> mod_scatter_display.R</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a> <span class="ex">├──</span> mod_var_input.R</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a> <span class="ex">└──</span> utils.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="standalone-app-function" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="standalone-app-function">Standalone app function</h3>
<p>Both module functions are combined in the <code>ui</code> and <code>server</code> arguments of <code><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shiny::shinyApp()</a></code>. The <code>id</code> arguments (<code>"vars"</code> and <code>"plot"</code>) connect the UI functions to their server counterparts, and the output from <code>mod_var_input_server()</code> is the <code>var_inputs</code> argument in <code>mod_scatter_display_server()</code>.</p>
<p>The call to <code><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shiny::shinyApp()</a></code> is wrapped in the <code>movies_app()</code> function and placed in <code>app.R</code></p>
<div class="callout callout-style-default callout-caution callout-titled" title="movies_app()">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
movies_app()
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<details open=""><summary>show/hide movies_app() in app.R</summary><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># install ------------------------------------</span></span>
<span><span class="co"># after installing, comment this out</span></span>
<span><span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"shiny"</span>, <span class="st">"shinythemes"</span>, <span class="st">"stringr"</span>, <span class="st">"ggplot2"</span>, <span class="st">"rlang"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="va">pkgs</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># packages ------------------------------------</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/">shiny</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/shinythemes/">shinythemes</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rlang.r-lib.org">rlang</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">movies_app</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span></span>
<span>    ui <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span></span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/titlePanel.html">titlePanel</a></span><span class="op">(</span></span>
<span>        <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">div</a></span><span class="op">(</span></span>
<span>          <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html">img</a></span><span class="op">(</span></span>
<span>            src <span class="op">=</span> <span class="st">"shiny.png"</span>,</span>
<span>            height <span class="op">=</span> <span class="fl">60</span>,</span>
<span>            width <span class="op">=</span> <span class="fl">55</span>,</span>
<span>            style <span class="op">=</span> <span class="st">"margin:10px 10px"</span></span>
<span>            <span class="op">)</span>, </span>
<span>         <span class="st">"Movies Reviews"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">sidebarLayout</a></span><span class="op">(</span></span>
<span>        <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">sidebarPanel</a></span><span class="op">(</span></span>
<span>          <span class="fu">mod_var_input_ui</span><span class="op">(</span><span class="st">"vars"</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">mainPanel</a></span><span class="op">(</span></span>
<span>          <span class="fu">mod_scatter_display_ui</span><span class="op">(</span><span class="st">"plot"</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">selected_vars</span> <span class="op">&lt;-</span> <span class="fu">mod_var_input_server</span><span class="op">(</span><span class="st">"vars"</span><span class="op">)</span></span>
<span></span>
<span>      <span class="fu">mod_scatter_display_server</span><span class="op">(</span><span class="st">"plot"</span>, var_inputs <span class="op">=</span> <span class="va">selected_vars</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">movies_app</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<p>I can run the app with <code>movies_app()</code>.</p>
<div class="column-page-inset-right">
<div id="fig-movie_reviews_projApp" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="fig-movie_reviews_projApp" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/movie_reviews_projApp.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-movie_reviews_projApp"></p>
<figcaption class="figure-caption">(a) Movie reviews app</figcaption></figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;6: View a deployed version <a href="https://mjfrigaard.shinyapps.io/projapp/">here</a>.</figcaption></figure>
</div>
</div>
<p>The files in the <code>03_projApp</code> repo are below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">projApp/</span> <span class="co"># 03_projApp branch</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> DESCRIPTION</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> R/</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   ├── mod_scatter_display.R</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   ├── mod_var_input.R</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   └── utils.R</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> README.md</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> app.R</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> movies.RData</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> projApp.Rproj</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> rsconnect/</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   └── shinyapps.io/</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>       └── user/</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>           └── projApp.dcf</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="ex">└──</span> www/</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    <span class="ex">└──</span> shiny.png</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span> directories, 10 files</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/new_branch_ico.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption class="figure-caption">New Git Branch</figcaption></figure>
</div>
<p>The code for this section was pushed to the [<a href="https://github.com/mjfrigaard/projApp/tree/03_projApp"><code>03_projApp</code></a>] branch of the [<a href="https://github.com/mjfrigaard/projApp"><code>projApp</code></a>] repo.</p>
</div></div></section></section><section id="project-dependencies" class="level2"><h2 class="anchored" data-anchor-id="project-dependencies">Project dependencies</h2>
<section id="renv" class="level3"><h3 class="anchored" data-anchor-id="renv"><span style="font-size: 1.05em;"><code>renv</code></span></h3>
<p>If you use <a href="https://rstudio.github.io/renv/articles/renv.html"><code>renv</code></a>, keep track of your dependencies by regularly running <code><a href="https://rstudio.github.io/renv/reference/status.html">renv::status()</a></code> and <code><a href="https://rstudio.github.io/renv/reference/snapshot.html">renv::snapshot()</a></code>.</p>
<div class="callout callout-style-default callout-caution callout-titled" title="Using `renv`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Using <code>renv</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Start by initiating <code>renv</code> with <code><a href="https://rstudio.github.io/renv/reference/init.html">renv::init()</a></code>, then run <code><a href="https://rstudio.github.io/renv/reference/status.html">renv::status()</a></code> to check which packages have been added to the lockfile:</p>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/renv/reference/status.html">status</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details><summary>show/hide example renv::status() output</summary><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">The</span> following package<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="ex">are</span> in an inconsistent state:</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a> <span class="ex">package</span>      installed recorded used</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a> <span class="ex">colorspace</span>   y         n        y   </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a> <span class="ex">fansi</span>        y         n        y   </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a> <span class="ex">farver</span>       y         n        y   </span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a> <span class="ex">ggplot2</span>      y         n        y   </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a> <span class="ex">gtable</span>       y         n        y   </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a> <span class="ex">isoband</span>      y         n        y   </span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a> <span class="ex">labeling</span>     y         n        y   </span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a> <span class="ex">lattice</span>      y         n        y   </span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a> <span class="ex">MASS</span>         y         n        y   </span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a> <span class="ex">Matrix</span>       y         n        y   </span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a> <span class="ex">mgcv</span>         y         n        y   </span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a> <span class="ex">munsell</span>      y         n        y   </span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a> <span class="ex">nlme</span>         y         n        y   </span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a> <span class="ex">pillar</span>       y         n        y   </span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a> <span class="ex">pkgconfig</span>    y         n        y   </span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a> <span class="ex">RColorBrewer</span> y         n        y   </span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a> <span class="ex">scales</span>       y         n        y   </span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a> <span class="ex">shinythemes</span>  y         n        y   </span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a> <span class="ex">tibble</span>       y         n        y   </span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a> <span class="ex">utf8</span>         y         n        y   </span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a> <span class="ex">vctrs</span>        y         n        y   </span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a> <span class="ex">viridisLite</span>  y         n        y   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Take a ‘snapshot’ to capture the current package dependencies:</p>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/renv/reference/snapshot.html">snapshot</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details><summary>show/hide example renv::snapshot() output</summary><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">The</span> following package<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="ex">will</span> be updated in the lockfile:</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># CRAN --------------------------------------------------</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> lattice        [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 0.21-8]</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> MASS           [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 7.3-60]</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> Matrix         [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 1.5-3]</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> mgcv           [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 1.8-42]</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> nlme           [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 3.1-162]</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> vctrs          [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 0.6.3]</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># RSPM --------------------------------------------------</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> colorspace     [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 2.1-0]</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> fansi          [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 1.0.4]</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> farver         [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 2.1.1]</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> ggplot2        [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 3.4.2]</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> gtable         [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 0.3.3]</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> isoband        [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 0.2.7]</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> labeling       [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 0.4.2]</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> munsell        [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 0.5.0]</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> pillar         [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 1.9.0]</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> pkgconfig      [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 2.0.3]</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> RColorBrewer   [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 1.1-3]</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> scales         [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 1.2.1]</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> shinythemes    [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 1.2.0]</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> tibble         [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 3.2.1]</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> utf8           [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 1.2.3]</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> viridisLite    [<span class="pp">*</span> <span class="at">-</span><span class="op">&gt;</span> 0.4.2]</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a><span class="ex">Do</span> you want to proceed<span class="pp">?</span> <span class="pp">[</span><span class="ss">Y/n</span><span class="pp">]</span>: y</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> Lockfile written to <span class="st">'~/path/to/projApp/renv.lock'</span>.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section></section><section id="recap" class="level2"><h2 class="anchored" data-anchor-id="recap">Recap</h2>
<p>This chapter has covered some of the differences between developing shiny apps and regular R programming, creating new shiny projects in Posit Workbench, and some practices to adopt that can make the transition to app-packages a little easier. The code used in this chapter are stored in the <a href="https://github.com/mjfrigaard/projApp"><code>projApp</code> repository</a>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Recap
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="font-size: 1.05em; color: #696969;">
<ul>
<li><p>Placing any utility or helper files in an <code>R/</code> folder removes the need to call <code><a href="https://rdrr.io/r/base/source.html">source()</a></code> in <code>app.R</code></p></li>
<li><p>Images, CSS, JavaScript, and other static resources can be stored in <code>www/</code> and shiny will serve these files when the application is run.</p></li>
<li><p><code>README.md</code> files can can be used to document application description, purpose, requirements, etc.</p></li>
<li><p><code>DESCRIPTION</code> files provide metadata and includes fields that affect application deployment (i.e., <code>DisplayMode: Showcase</code>)</p></li>
<li><p>Converting the application code into functions (modules and standalone app functions) creates a ‘division of labor’ for each component, which makes it easier to think about and work on them independently.</p></li>
<li><p>Finally, if you’re using <code>renv</code>, run <code><a href="https://rstudio.github.io/renv/reference/status.html">renv::status()</a></code> and <code><a href="https://rstudio.github.io/renv/reference/snapshot.html">renv::snapshot()</a></code> to manage dependencies</p></li>
</ul>
</div>
</div>
</div>
</div>
<p>In the next chapter, I’ll cover what makes a package a package, and some do’s and don’ts when converting a developed shiny application into an R package.</p>
<p>end <code>shiny.qmd</code></p>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./intro.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Introduction</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./packages.html" class="pagination-link">
        <span class="nav-page-text">Packages</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>